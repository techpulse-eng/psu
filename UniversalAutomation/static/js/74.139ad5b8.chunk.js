(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[74],{1380:function(e,t,n){"use strict";n.r(t),n.d(t,"Marketplace",(function(){return I}));var a=n(25),o=n(0),i=n.n(o),r=n(919),s=n(457),l=n(95),c=n(74),d=n(416),u=n(617),p=n(423),b=n(460),h=n(49),j=n.n(h),v=n(86),m=n(45),w=n(186),f=n(473),x=n(455),O=n(122),k=n.n(O),y=n(22),g=n(924),S=n(4);function C(e){var t=e.name,n=e.version,a=e.installed,o=e.mutationOptions,i=Object(g.a)(function(){var e=Object(v.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.put("/api/v1/dashboard/marketplace/".concat(null===t||void 0===t?void 0:t.name,"/").concat(null===t||void 0===t?void 0:t.version));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){x.b.success("Saved component!"),y.a.refetchQueries("/dashboard/marketplace");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o&&(null===o||void 0===o?void 0:o.onSuccess)&&(null===o||void 0===o||o.onSuccess.apply(o,t))}}),r=i.mutateAsync,s=i.isLoading;return a?Object(S.jsx)(l.a,{title:"Component Installed",children:Object(S.jsx)(w.a,{style:{color:m.presetPrimaryColors.green,padding:8}})}):Object(S.jsx)(l.a,{title:"Install",children:Object(S.jsx)(c.a,{type:"text",icon:Object(S.jsx)(f.a,{}),onClick:function(){return r({name:t,version:n})},loading:s})})}function I(){var e=r.a.useForm(),t=Object(a.a)(e,1)[0],n=i.a.useState("new"),o=Object(a.a)(n,2),h=o[0],j=o[1],v=i.a.useState(1),m=Object(a.a)(v,2),w=m[0],f=m[1],x=Object(p.a)("/dashboard/marketplace"),O=x.data,k=x.isLoading,y=Object(p.a)("/dashboard/marketplace/module?page=".concat(w),{enabled:"browse"===h,keepPreviousData:!0}),g=y.isLoading,I=y.isFetching,D=y.data,P=y.refetch,A=[{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{key:"version",title:"Version",dataIndex:"version",width:"min-content",align:"center"},{title:"Authors",key:"authors",dataIndex:"authors"},{title:"Downloads",key:"downloadCount",dataIndex:"downloadCount",width:"min-content",align:"center"},{title:"Actions",key:"actions",align:"left",width:"min-content",render:function(e,t){return Object(S.jsxs)(s.b,{children:[Object(S.jsx)(C,{name:t.title,version:t.version,installed:t.installed,mutationOptions:{onSuccess:function(){"browse"===h&&P()}}}),Object(S.jsx)(l.a,{title:"View",children:Object(S.jsx)(c.a,{type:"text",icon:Object(S.jsx)(u.a,{}),onClick:function(e){return window.open("https://marketplace.universaldashboard.io/Dashboard/".concat(t.title))}})})]})}}];return Object(S.jsx)(b.default,{title:"Marketplace",showSearch:"browse"!==h,showMarketplaceSearch:"browse"===h,actions:[Object(S.jsx)(r.a,{name:"published_folder_editable_form",form:t,onValuesChange:function(e){var t=e.dataToDisplay;j(t)},children:Object(S.jsx)(r.a.Item,{name:"dataToDisplay",style:{margin:0},noStyle:!0,children:Object(S.jsxs)(d.a.Group,{buttonStyle:"solid",defaultValue:h,children:[Object(S.jsx)(d.a.Button,{value:"new",defaultChecked:!0,children:"New"}),Object(S.jsx)(d.a.Button,{value:"popular",children:"Popular"}),Object(S.jsx)(d.a.Button,{value:"browse",children:"Browse"})]})})})],columns:A,loading:k||g||I,data:"new"===h?null===O||void 0===O?void 0:O.newPackages:"popular"===h?null===O||void 0===O?void 0:O.mostDownloadedPackages:null===D||void 0===D?void 0:D.modules,rowKey:function(e){return e.id||"key"},pagination:{style:{display:"browse"!==h&&"none"},total:(null===D||void 0===D?void 0:D.totalItems)||10,onChange:function(e){return f(e)}}})}t.default=I}}]);
//# sourceMappingURL=74.139ad5b8.chunk.js.map
(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[40,2],{1445:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return A}));var n=a(0),r=a.n(n),i=a(37),l=a(415),c=a(127),o=a(452),s=a(92),d=a(954),u=a(453),b=a(989),j=a(49),h=a.n(j),v=a(12),m=a(84),O=a(27),f=a(70),x=a(925),p=a(414),y=a(48),w=a(3);function k(){var e=Object(l.a)("/variable/secret",{enabled:!1}),t=e.data,a=e.refetch,i=Object(l.a)("/variable",{enabled:!1}),s=i.data,d=i.refetch,b=r.a.useState([]),j=Object(O.a)(b,2),k=j[0],S=j[1],I=r.a.useState(),g=Object(O.a)(I,2),C=g[0],N=g[1],W=Object(c.e)().onOk;function V(){return(V=Object(m.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<C.length)){e.next=8;break}return a=C[t],e.next=5,W("/variable","create",{name:a.name,vault:a.vault,type:a.type});case 5:t++,e.next=1;break;case 8:S([]),N([]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.a.useEffect((function(){d()}),[d]);var q={selectedRowKeys:k,onChange:function(e,t){S(e),N(t)},getCheckboxProps:function(e){return{disabled:null===s||void 0===s?void 0:s.some((function(t){return t.name===e.name})),name:e.name}}};return Object(w.jsxs)(n.Fragment,{children:[Object(w.jsx)(c.d,{requiredRoles:["Administrator","Operator"],requiredAccessControls:y.b.Create,allowedWithOneWayGitSync:!1,children:Object(w.jsx)(f.a,{children:"Import Secret Variable"})}),Object(w.jsx)(c.b,{title:"Import Secret Variable",onClickOk:function(){return V.apply(this,arguments)},onCancel:function(){S([]),N([])},children:Object(w.jsxs)(x.a,{component:!1,children:[Object(w.jsx)(x.a.Item,{children:Object(w.jsx)(o.b,{direction:"vertical",size:"small",children:Object(w.jsx)(p.a.Text,{style:{fontFamily:"SFProDisplay-Semibold"},children:"You can also import pre-existing secrets as variables into Universal. The variable values are not imported but will be looked up during execution."})})}),Object(w.jsx)(u.default,{data:t,columns:[{key:"name",title:"Name",dataIndex:"name",editable:!1},{key:"vault",title:"Vault",dataIndex:"vault",editable:!1},{key:"type",title:"Type",dataIndex:"type",editable:!1}],queryFn:a,rowKey:function(e){return e.name},rowSelection:Object(v.a)({},q)})]})})]})}var S=a(455),I=a(209);function g(e){var t=e.buttonType,a=void 0===t?null:t,r=e.buttonText,i=void 0===r?"Create New Variable":r,l=e.buttonStyle,o=void 0===l?null:l,s=Object(c.e)(),d=s.onOk,u=s.form;return Object(w.jsxs)(n.Fragment,{children:[Object(w.jsx)(c.d,{requiredRoles:["Administrator","Operator"],requiredAccessControls:y.b.Create,allowedWithOneWayGitSync:!1,children:Object(w.jsx)(f.a,{children:i,type:a,style:o})}),Object(w.jsx)(c.b,{title:"Create variable",onClickOk:function(){d("/variable","create",{})},formName:"create_variable_form",children:Object(w.jsx)(I.b,{schemaName:"variable",children:Object(w.jsx)(I.d,{name:"create_variable_form",form:u,preserve:!1})})})]})}var C=a(161),N=a(693),W=a(22);function V(e){var t=e.secret,a=Object(c.e)(),r=a.onOk,i=a.form;function l(){return(l=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r("/variable/secret","update",t);case 2:W.a.invalidateQueries("/variable");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(n.Fragment,{children:[Object(w.jsx)(c.d,{requiredRoles:["Administrator","Operator"],requiredAccessControls:y.b.Edit,allowedWithOneWayGitSync:!0,children:Object(w.jsx)(f.a,{children:"Set Secret Value"})}),Object(w.jsx)(c.b,{title:"Set Secret Value",onClickOk:function(){return l.apply(this,arguments)},children:Object(w.jsxs)(x.a,{component:!1,form:i,children:[Object(w.jsx)(x.a.Item,{children:Object(w.jsx)(p.a,{children:"Setting the secret value will set the value in the vault."})}),"PSCredential"===t.type&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(x.a.Item,{label:"Username",name:"username",children:Object(w.jsx)(N.default,{})}),Object(w.jsx)(x.a.Item,{label:"Password",name:"password",children:Object(w.jsx)(N.default,{type:"password"})})]}),"PSCredential"!==t.type&&Object(w.jsx)(x.a.Item,{label:"Value",name:"value",children:Object(w.jsx)(N.default,{})})]})})]})}var q=a(456);function A(){var e=Object(l.a)("/variable",{enabled:!1,refetchOnWindowFocus:!1}),t=e.data,a=e.isLoading,n=e.refetch;function r(e){return!!(null===e||void 0===e?void 0:e.vault)}var j=[{key:"category",title:"Category",editable:!1,width:"min-content",align:"left",render:function(e,t){return t.missingSecret?Object(w.jsxs)(o.b,{children:[Object(w.jsx)(s.a,{title:"This secret does not exist in the vault.",children:Object(w.jsx)(C.a,{style:{color:"red"}})}),Object(i.r)(t)]}):Object(i.r)(t)}},{key:"name",title:"Name",dataIndex:"name",editable:!0},{title:"Value",key:"value",dataIndex:"value",editable:!0,render:function(e,t){return t.vault?"********":t.displayValue}},{key:"type",title:"Type",dataIndex:"type",editable:!1,render:function(e,t){return"false"!==t.type?function(e){switch(e){case"System.String":return"String";case"System.Boolean":return"Boolean";case"System.Int32":return"Integer";case"System.Object[]":return"Array";default:return e}}(t.type):"-"}},{key:"vault",title:"Vault",dataIndex:"vault",editable:!1},{key:"description",title:"Description",dataIndex:"description",editable:!0},{width:"fit-content",dataIndex:"actions",editable:!1,render:function(e,t){return Object(w.jsxs)(o.b,{style:{justifyContent:"flex-end",width:"100%"},children:[t.vault&&Object(w.jsx)(c.a,{children:Object(w.jsx)(V,{secret:t})}),Object(w.jsx)(c.a,{children:Object(w.jsx)(b.default,{hidden:r(t),record:t,allowedWithOneWayGitSync:!1})}),Object(w.jsx)(S.default,{resource:t,allowedWithOneWayGitSync:!1})]})}}];return Object(w.jsx)(d.a,{title:"Variables",subTitle:"Variables available throughout the PowerShell Universal platform.",extra:[Object(w.jsx)(q.a,{url:"platform/variables"})],children:Object(w.jsx)(u.default,{title:"Variables",actions:[Object(w.jsx)(c.a,{children:Object(w.jsx)(g,{})}),Object(w.jsx)(c.a,{children:Object(w.jsx)(k,{})})],columns:j,data:t,loading:a,queryFn:n})})}},983:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(0);var n=a(932),r=a(452),i=a(414),l=a(3);function c(){return Object(l.jsx)(n.a,{type:"info",message:Object(l.jsxs)(r.b,{align:"center",style:{width:"100%",justifyContent:"space-between"},children:["Authentication requires a license.",Object(l.jsx)(i.a.Link,{href:"https://ironmansoftware.com/powershell-universal/?rel=product",target:"_blank",children:"Buy License."})]})})}},989:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return h}));var n=a(12),r=a(74),i=(a(0),a(48)),l=a(70),c=a(209),o=a(457),s=a(127),d=a(299),u=a(983),b=a(111),j=a(3);function h(e){var t,a=e.record,h=e.schemaName,v=e.allowedWithOneWayGitSync,m=Object(r.a)(e,["record","schemaName","allowedWithOneWayGitSync"]),O=Object(o.a)().getButtonProps,f=Object(d.a)(),x=Object(s.e)(),p=x.onOk,y=x.form,w=Object(b.a)().licensed;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(s.d,{requiredRoles:["Administrator","Operator"],requiredAccessControls:i.b.Edit,accessControls:m.accessControls,allowedWithOneWayGitSync:v,children:Object(j.jsx)(l.a,Object(n.a)(Object(n.a)(Object(n.a)({},m),O({action:"edit"})),{},{action:"edit"}))}),Object(j.jsxs)(s.b,{title:"Edit Resource",onClickOk:function(){var e,t,n,r,i,l,c,o,s,d,u,b="tag"===(null===a||void 0===a||null===(e=a.resourceInfo)||void 0===e?void 0:e.schemaName)||"role"===(null===a||void 0===a||null===(t=a.resourceInfo)||void 0===t?void 0:t.schemaName)||"endpoint"===(null===a||void 0===a||null===(n=a.resourceInfo)||void 0===n?void 0:n.schemaName)||"ratelimit"===(null===a||void 0===a||null===(r=a.resourceInfo)||void 0===r?void 0:r.schemaName)||"dashboard"===(null===a||void 0===a||null===(i=a.resourceInfo)||void 0===i?void 0:i.schemaName)||"schedule"===(null===a||void 0===a||null===(l=a.resourceInfo)||void 0===l?void 0:l.schemaName)||"publishedfolder"===(null===a||void 0===a||null===(c=a.resourceInfo)||void 0===c?void 0:c.schemaName)?null===a||void 0===a||null===(o=a.resourceInfo)||void 0===o?void 0:o.self:null===a||void 0===a||null===(s=a.resourceInfo)||void 0===s?void 0:s.parent;"page"===(null===a||void 0===a||null===(d=a.resourceInfo)||void 0===d?void 0:d.schemaName)&&(b=(null===a||void 0===a||null===(u=a.resourceInfo)||void 0===u?void 0:u.self)+"?ignoreContent=true"),p(b,"update",a)},children:[Object(j.jsx)(c.b,{schemaName:h||(null===a||void 0===a||null===(t=a.resourceInfo)||void 0===t?void 0:t.schemaName),children:Object(j.jsx)(c.d,{name:"edit_form",form:y,inEditMode:!0,preserve:!1,defaultValues:f(a)})}),!w(i.e.Dashboard)&&Object(j.jsx)(u.a,{})]})]})}}}]);
//# sourceMappingURL=40.f494a67e.chunk.js.map
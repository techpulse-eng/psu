(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[32],{1064:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var r=t(27),o=t(0),i=t.n(o),a=t(932),u=t(416),c=t(996),l=t(37),d=t(3);function s(e){var n=e.traceId,t=i.a.useState(""),o=Object(r.a)(t,2),s=o[0],v=o[1];return i.a.useEffect((function(){var e=(new u.a).withUrl(Object(l.s)("/loghub")).withAutomaticReconnect().configureLogging(u.b.Debug).build();return e.on("sendLog",(function(e){v((function(n){return n+"".concat(e,"\r\n")}))})),e.start().then((function(){return e.send("subscribe",n)})).catch((function(e){return console.log("signalr error",e)})),function(){e.stop()}}),[n]),Object(d.jsx)(a.a.ErrorBoundary,{children:Object(d.jsx)(c.b,{readonly:!0,children:Object(d.jsx)(c.a,{value:s,language:"psulog",options:{readOnly:!0}})})})}},1332:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return w}));var r=t(12),o=t(49),i=t.n(o),a=t(84),u=t(27),c=t(0),l=t.n(c),d=t(43),s=t(454),v=t(452),b=t(961),g=t(996),p=t(22),f=t(415),h=t(117),m=t.n(h),j=t(1064),O=t(3),x=Object(c.lazy)((function(){return t.e(72).then(t.bind(null,1418))})),y=Object(c.lazy)((function(){return t.e(73).then(t.bind(null,1466))})),C=Object(c.lazy)((function(){return t.e(70).then(t.bind(null,1419))})),k=Object(c.lazy)((function(){return t.e(71).then(t.bind(null,1420))}));function w(){var e=Object(d.i)().id,n=Object(f.a)("/endpoint/".concat(e),{enabled:!1}).data,t=Object(p.c)([{queryKey:"/endpoint/".concat(e,"/parts"),queryFn:function(){var n=Object(a.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.get("/api/v1/endpoint/".concat(e,"/parts"));case 2:return n.abrupt("return",n.sent.data);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),enabled:!!e,refetchOnWindowFocus:!1}]),o=Object(u.a)(t,1)[0].data,c=l.a.useState("info"),h=Object(u.a)(c,2),w=h[0],I=h[1],D={info:Object(O.jsxs)(v.b,{direction:"vertical",size:"middle",style:{width:"100%"},children:[Object(O.jsx)(x,{}),Object(O.jsx)(y,{}),Object(O.jsx)(C,{}),Object(O.jsx)(k,{})]}),log:Object(O.jsx)(j.a,{traceId:"endpoint:".concat(e)})};return Object(O.jsx)(s.i,{resource:Object(r.a)(Object(r.a)({},n),{},{parts:o,fullUrl:"".concat(window.location.origin).concat(null===n||void 0===n?void 0:n.url)}),children:Object(O.jsxs)(s.e,{children:[Object(O.jsx)(s.a,{children:Object(O.jsx)(g.b,{children:Object(O.jsx)(g.c,{title:"Editor",height:"calc(100vh - 200px)"})})}),Object(O.jsx)(s.g,{children:Object(O.jsx)(b.a,{bordered:!1,headStyle:{borderBottom:0,height:64},bodyStyle:{paddingTop:24},tabList:[{key:"info",tab:"Info"},{key:"log",tab:"Log"}],activeTabKey:w,onTabChange:function(e){return I(e)},tabProps:{type:"line",tabBarStyle:{height:64}},children:D[w]})})]})})}},996:function(e,n,t){"use strict";t.d(n,"b",(function(){return K})),t.d(n,"a",(function(){return R})),t.d(n,"c",(function(){return U}));var r=t(74),o=t(12),i=t(27),a=t(49),u=t.n(a),c=t(84),l=t(0),d=t.n(l),s=t(450),v=t(92),b=t(280),g=t(961),p=t(70),f=t(37),h=t(22),m=t(443),j=t(360),O=t(361),x=t(106),y=t(437),C=t(99),k=t(1038),w=t(128),I={base:"vs-dark",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#060606","activityBar.foreground":"#A9A9A9","editor.background":"#060606","editor.foreground":"#ffffff4d","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#141414","editor.selectionBackground":"#141414"}},D={base:"vs",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#E1ECF9","activityBar.foreground":"#A9A9A9","editor.background":"#ffffff","editor.foreground":"#000000","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#c2c2c2","editor.selectionBackground":"#e1ecf8"}},S=t(111),B=t(48),T=t(1043),F=t(454),M=t(225),V=t(117),A=t.n(V),E=[{range:null,label:"Dashboard: Modal",kind:27,documentation:"Creates a new modal.",insertText:'Show-UDModal -Content {\n\tNew-UDTypography "Hello, World"\n}'},{range:null,label:"Dashboard: Chart with Colors",kind:27,documentation:"Creates a chart with colors",insertText:"$Data = Get-Process | Sort-Object -Property CPU -Descending | Select-Object -First 10 \n$Options = @{\n    Type = 'bar'\n    Data = $Data\n    BackgroundColor = 'Red'\n    BorderColor = '#c61d4a'\n    HoverBackgroundColor = 'Blue'\n    HoverBorderColor = '#451dc6'\n    DataProperty = 'CPU'\n    LabelProperty = 'ProcessName'\n}\n\nNew-UDChartJS @Options"},{range:null,label:"Dashboard: Form with validation",kind:27,documentation:"Creates a form with validation",insertText:"New-UDForm -Content {\nNew-UDTextbox -Id 'txtValidateForm'\n} -OnValidate {\n    $FormContent = $EventData\n\n    if ($FormContent.txtValidateForm -eq $null -or $FormContent.txtValidateForm -eq '') {\n        New-UDFormValidationResult -ValidationError \"txtValidateForm is required\"\n    } else {\n        New-UDFormValidationResult -Valid\n    }\n} -OnSubmit {\n    Show-UDToast -Message $Body\n}"}],L=t(3);k.c.config({paths:{vs:Object(f.s)("/admin/vs")}}),k.c.init().then((function(e){e.languages.registerCompletionItemProvider("powershell",{provideCompletionItems:function(){var e=Object(c.a)(u.a.mark((function e(n,t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{incomplete:!1,suggestions:E});case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()}),e.languages.registerDocumentFormattingEditProvider("powershell",{displayName:"PowerShell",provideDocumentFormattingEdits:function(){var e=Object(c.a)(u.a.mark((function e(n,t,r){var o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post(Object(f.s)("/api/v1/editor/format"),n.getValue(),{headers:{"content-type":"text/plain"}});case 2:return o=e.sent,i=o.data,e.abrupt("return",[{text:i,range:{startColumn:1,startLineNumber:1,endLineNumber:n.getLineCount(),endColumn:n.getLineMaxColumn(n.getLineCount())}}]);case 5:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()});var n=["$","-","\\","/",":","."],t=function(n){switch(n){case 0:return e.languages.CompletionItemKind.Text;case 2:return e.languages.CompletionItemKind.Method;case 3:return e.languages.CompletionItemKind.Folder;case 4:return e.languages.CompletionItemKind.File;case 5:return e.languages.CompletionItemKind.Property;case 6:return e.languages.CompletionItemKind.Method;case 7:case 9:return e.languages.CompletionItemKind.Property;default:return e.languages.CompletionItemKind.Text}};e.languages.registerCompletionItemProvider("powershell",{triggerCharacters:n,provideCompletionItems:function(){var e=Object(c.a)(u.a.mark((function e(r,o,i){var a,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===n.findIndex((function(e){return e===i.triggerCharacter}))){e.next=7;break}return e.next=3,A.a.post(Object(f.s)("/api/v1/editor/complete"),{content:r.getValue(),cursorPosition:r.getOffsetAt(o)});case 3:return a=e.sent,c=a.data,l=null===c||void 0===c?void 0:c.map((function(e){return 3===e.type||4===e.type?{insertText:e.label,label:e.label,documentation:e.help,kind:t(e.type)}:{insertText:e.text,label:e.text,documentation:e.help,kind:t(e.type)}})),e.abrupt("return",{incomplete:!1,suggestions:l});case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()})}));var P=d.a.createContext(null);function K(e){var n=e.children,t=e.refetch,r=void 0===t?function(){}:t,o=e.readonly,a=void 0!==o&&o,l=d.a.useState(a),v=Object(i.a)(l,2),b=v[0],g=v[1],p=d.a.useState(!1),m=Object(i.a)(p,2),j=m[0],O=m[1],x=Object(h.b)().mutateAsync,y=Object(w.b)().currentTheme,C=Object(S.a)().userData,B=Object(k.d)(),F=Object(M.a)({onSuccess:function(e){return s.b.success("Copied.")}}).copy,V=d.a.useRef(null),E=d.a.useCallback(function(){var e=Object(c.a)(u.a.mark((function e(n,t,o){var i,a,c,l,d,v,b,p,f,m,j,y;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),g(!0),"/script"===n&&(o.content=null===V||void 0===V||null===(a=V.current)||void 0===a?void 0:a.getValue()),"/endpoint"===n&&(n=null===o||void 0===o||null===(c=o.resourceInfo)||void 0===c?void 0:c.self,o.scriptBlock=null===V||void 0===V||null===(l=V.current)||void 0===l?void 0:l.getValue()),"/dashboard"===n&&(n=null===o||void 0===o||null===(d=o.resourceInfo)||void 0===d?void 0:d.self,o.content=null===V||void 0===V||null===(v=V.current)||void 0===v?void 0:v.getValue()),n.startsWith("/role")&&(n=null===o||void 0===o||null===(b=o.resourceInfo)||void 0===b?void 0:b.self,o.policy=null===V||void 0===V||null===(p=V.current)||void 0===p?void 0:p.getValue()),"/settings"===n&&(n="/settings/authentication/1",o.settings=null===V||void 0===V||null===(f=V.current)||void 0===f?void 0:f.getValue()),n.startsWith("/module")&&(n=null===o||void 0===o||null===(m=o.resourceInfo)||void 0===m?void 0:m.self,o.content=null===V||void 0===V||null===(j=V.current)||void 0===j?void 0:j.getValue()),"configuration"===(null===o||void 0===o||null===(i=o.resourceInfo)||void 0===i?void 0:i.schemaName)&&(o.content=null===V||void 0===V||null===(y=V.current)||void 0===y?void 0:y.getValue({preserveBOM:!0,lineEnding:"\r\n"})),e.next=11,x({key:n,action:t,resource:o},{onError:function(e){O(!1),g(!1),s.b.error(e.message)},onSuccess:function(e,t){O(!1),g(!1),s.b.success("Changes saved!"),h.a.refetchQueries(n),r()}});case 11:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),[x,r]),K=d.a.useCallback((function(e,n,t){V.current=e,n.languages.register({id:"psulog"}),n.languages.setMonarchTokensProvider("psulog",{tokenizer:{root:[[/\[error.*/,"custom-error"],[/\[verbose.*/,"custom-verbose"],[/\[warning.*/,"custom-warning"],[/\[debug.*/,"custom-debug"],[/\[information.*/,"custom-info"]]}});var o=e.getModel();a||o.onDidChangeContent((function(){var e=o.getVersionId();!function(e,n){var t;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){return e.apply(void 0,o)}),n)}}(Object(c.a)(u.a.mark((function t(){var r,i,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.getVersionId(),e===r){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,A.a.post(Object(f.s)("/api/v1/editor/parse"),o.getValue(),{headers:{"content-type":"text/plain"}});case 5:i=t.sent,a=i.data,c=a.map((function(e){return{startColumn:e.token.startColumn,endColumn:e.token.endColumn,startLineNumber:e.token.startLine,endLineNumber:e.token.endLine,severity:T.a.Error,message:e.message}})),n.editor.setModelMarkers(o,"powershell",c);case 9:case"end":return t.stop()}}),t)}))),300)()})),t&&e.addCommand(n.KeyMod.CtrlCmd|n.KeyCode.KEY_S,(function(){var e;return E(null===t||void 0===t||null===(e=t.resourceInfo)||void 0===e?void 0:e.parent,"update",t)})),e.addAction({id:"refresh",label:"Refresh",keybindings:[n.KeyCode.F5],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){return r(),null}}),e.addAction({id:"format",label:"Format",keybindings:[n.KeyCode.F8],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(){return e.trigger("anyString","editor.action.formatDocument",null),null}})}),[r,E,a]);d.a.useEffect((function(){B&&(B.editor.defineTheme("psu-dark",I),B.editor.defineTheme("psu-light",D),B.editor.setTheme("dark"===y?"psu-dark":"psu-light"))}),[y,B]);var N=d.a.useCallback((function(){var e;return F(null===V||void 0===V||null===(e=V.current)||void 0===e?void 0:e.getValue())}),[F]),R=function(){var e;return null===V||void 0===V||null===(e=V.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomIn",{})},U=function(){var e;return null===V||void 0===V||null===(e=V.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomOut",{})},z=d.a.useMemo((function(){return{isReadOnly:b,setIsReadOnly:g,onSave:E,monaco:B,editor:null===V||void 0===V?void 0:V.current,userData:C,handleEditorDidMount:K,currentTheme:y,onCopy:N,zoomIn:R,zoomOut:U,isSaving:j}}),[y,K,b,B,N,E,C,j]);return Object(L.jsx)(P.Provider,{value:z,children:n})}function N(e){var n,t,r,o=e.children,i=e.resource;return Object(L.jsx)(C.a,{requiredRoles:["Administrator","Operator"],requiredAccessControls:B.b.Edit,accessControls:null===i||void 0===i?void 0:i.accessControls,allowedWithOneWayGitSync:!1,children:Object(L.jsx)(v.a,{title:"Save",children:d.a.cloneElement(o,{type:(null===o||void 0===o||null===(n=o.props)||void 0===n?void 0:n.type)||"text",icon:(null===o||void 0===o||null===(t=o.props)||void 0===t?void 0:t.icon)||Object(L.jsx)(m.a,{}),onClick:Object(f.a)(null===o||void 0===o||null===(r=o.props)||void 0===r?void 0:r.onClick)})})})}function R(e){var n=Object.assign({},e),t=d.a.useContext(P),r=t.currentTheme,i=t.handleEditorDidMount;return Object(L.jsx)(k.b,Object(o.a)({theme:"dark"===r?"psu-dark":"psu-light",language:"powershell",loading:Object(L.jsx)(b.a,{tip:"Loading content..."}),height:"calc((100vh - 256px) - 48px)",onMount:function(e,n){return i(e,n,null)}},n))}function U(e){var n=e.title,t=e.options,i=e.showSave,a=void 0===i||i,u=e.actions,c=e.hideToolbar,s=Object(r.a)(e,["title","options","showSave","actions","hideToolbar"]),h=d.a.useContext(P),m=h.handleEditorDidMount,C=h.currentTheme,k=h.onSave,w=h.onCopy,I=h.zoomIn,D=h.zoomOut,S=h.isSaving,B=Object(F.j)(),T=null===B||void 0===B?void 0:B.resource;return Object(L.jsx)(g.a,{bordered:!1,bodyStyle:{padding:0},title:n,extra:!c&&Object(L.jsxs)(l.Fragment,{children:[u,Object(L.jsx)(v.a,{title:"Zoom in",children:Object(L.jsx)(p.a,{type:"text",icon:Object(L.jsx)(j.a,{}),onClick:function(){return I()}})}),Object(L.jsx)(v.a,{title:"Zoom out",children:Object(L.jsx)(p.a,{type:"text",icon:Object(L.jsx)(O.a,{}),onClick:function(){return D()}})}),a&&Object(L.jsx)(N,{resource:T,children:Object(L.jsx)(p.a,{icon:S?Object(L.jsx)(x.a,{}):null,onClick:Object(f.a)((function(){var e;return k(null===T||void 0===T||null===(e=T.resourceInfo)||void 0===e?void 0:e.parent,"update",T)}))})}),Object(L.jsx)(v.a,{title:"Copy",children:Object(L.jsx)(p.a,{type:"text",icon:Object(L.jsx)(y.a,{}),onClick:function(){return w()}})}),Object(L.jsx)(F.b,{children:Object(L.jsx)(p.a,{})})]}),children:Object(L.jsx)(R,Object(o.a)(Object(o.a)({language:"powershell",height:"calc((100vh - 256px) - 48px)",value:(null===T||void 0===T?void 0:T.content)||(null===T||void 0===T?void 0:T.scriptBlock)||(null===T||void 0===T?void 0:T.settings)||(null===s||void 0===s?void 0:s.value),onMount:function(e,n){return m(e,n,T)},theme:"dark"===C?"psu-dark":"psu-light",loading:(null===s||void 0===s?void 0:s.loading)||Object(L.jsx)(b.a,{tip:"Loading content..."})},s),{},{options:Object(o.a)({wordWrap:"on",wrappingIndent:"same",minimap:{enabled:!1},lineHeight:20,lineNumbersMinChars:5,scrollBeyondLastLine:!1,hideCursorInOverviewRuler:!0,overviewRulerLanes:0,overviewRulerBorder:!1},t)}))})}}}]);
//# sourceMappingURL=32.233523f3.chunk.js.map
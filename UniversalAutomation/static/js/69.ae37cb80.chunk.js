(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[69],{1302:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return C}));var i=t(68),r=t(27),l=t(0),o=t.n(l),a=t(272),c=t(414),d=t(452),u=t(696),s=t(954),h=t(932),f=t(944),v=t(37),j=t(415),b=t(127),x=t(608),p=t(128),O=t(1196),g=t.n(O),m=t(456),y=t(3),k=a.default.Option,w=o.a.lazy((function(){return Promise.resolve().then(t.bind(null,453))})),S=o.a.lazy((function(){return t.e(2).then(t.bind(null,989))})),E=o.a.lazy((function(){return Promise.resolve().then(t.bind(null,455))})),I=o.a.lazy((function(){return t.e(3).then(t.bind(null,1017))})),W=o.a.lazy((function(){return t.e(42).then(t.bind(null,1417))}));function C(){var e=o.a.useState([]),n=Object(r.a)(e,2),t=n[0],l=n[1],O=localStorage.getItem("api-view"),C=o.a.useState(O||"folder"),T=Object(r.a)(C,2),P=T[0],z=T[1],D=o.a.useState(""),F=Object(r.a)(D,2),R=F[0],A=F[1],G=Object(p.b)().currentTheme,J=Object(j.a)("/endpoint",{enabled:!1}),L=J.data,U=J.isLoading,q=J.refetch,H=function e(n){var t=n.children.filter((function(e){return 0===e.children.length})).map((function(e){return e.key}));return n.children=n.children.filter((function(e){return-1===t.indexOf(e.key)})),n.children.forEach((function(n){return e(n)})),n},M=function(){var e={title:"RegEx",key:"RegEx",children:[]},n={title:"Endpoints",key:"",children:[e],regex:e};return null===L||void 0===L||L.filter((function(e){return!e.url.startsWith("^\\")})).forEach((function(e){e.url.split("/").filter((function(e){return""!==e})).reduce((function(n,t,i,r){return n[t="/"+t]||(n[t]={children:[]},n.children.push({title:t,key:e.url,children:n[t].children})),n[t]}),n)})),null===L||void 0===L||L.filter((function(e){return e.url.startsWith("^\\")})).forEach((function(n){e.children.push({title:n.url,key:n.url,children:[]})})),[H(n)]}(),N=Object(j.a)("/configuration/status/Endpoint").data,Y=[{key:"method",title:"Method",dataIndex:"method",width:"5%",render:function(e,n){var t;return Object(y.jsx)(c.a,{children:Object(y.jsx)(d.b,{children:null===(t=n.method)||void 0===t?void 0:t.map((function(e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(c.a.Text,{strong:!0,style:{color:Object(v.n)(e)},children:e.toUpperCase()})})}))})})}},{key:"url",title:"Url",dataIndex:"url"},{key:"environment",title:"Environment",dataIndex:"environment",width:"min-content",align:"center",responsive:["xl"],render:function(e,n){return null===(null===n||void 0===n?void 0:n.environment)?"Default":null===n||void 0===n?void 0:n.environment}},{key:"description",title:"Description",dataIndex:"description"},{key:"path",title:"Path",dataIndex:"path",render:function(e,n){return(null===n||void 0===n?void 0:n.path)||"endpoints.ps1"},responsive:["xl"]},{key:"role",title:"Role",dataIndex:"role",responsive:["xl"],render:function(e,n){var t;return null===n||void 0===n||null===(t=n.role)||void 0===t?void 0:t.map((function(e){return Object(y.jsx)(u.a,{color:"blue",children:e},e)}))}},{key:"authentication",title:"Authentication",dataIndex:"authentication",align:"center",responsive:["xl"],render:function(e,n){return(null===n||void 0===n?void 0:n.authentication)?"Enabled":"Disabled"}},{key:"tags",title:"Tags",dataIndex:"tags",editable:!1,render:function(e,n){var r,o;return(null===(r=n.tag)||void 0===r?void 0:r.length)>0?null===n||void 0===n||null===(o=n.tag)||void 0===o?void 0:o.map((function(e){return Object(y.jsx)(u.a,{color:null===e||void 0===e?void 0:e.color,style:{cursor:"pointer"},onClick:function(){t.find((function(n){return n.name===e.name}))||l([].concat(Object(i.a)(t),[e]))},children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.name)})):null},responsive:["xl"]},{width:"fit-content",dataIndex:"actions",render:function(e,n){return Object(y.jsxs)(d.b,{children:[Object(y.jsx)(b.a,{children:Object(y.jsx)(S,{record:n,allowedWithOneWayGitSync:!1})}),null===(null===n||void 0===n?void 0:n.path)&&Object(y.jsx)(I,{to:"".concat(null===n||void 0===n?void 0:n.id),allowedWithOneWayGitSync:!1}),Object(y.jsx)(E,{resource:n,allowedWithOneWayGitSync:!1})]})}}];return Object(y.jsx)(s.a,{title:"Endpoints",subTitle:"HTTP API endpoints that execute PowerShell Scripts.",extra:[Object(y.jsx)(m.a,{url:"api/about"})],children:!1===(null===N||void 0===N?void 0:N.success)&&(null===N||void 0===N?void 0:N.error)?Object(y.jsx)(h.a,{type:"error",message:"These is an error with the configuration script for this page. You will need to correct the issue manually before continuing. ",description:null===N||void 0===N?void 0:N.error}):Object(y.jsxs)(f.a,{hasSider:(null===M||void 0===M?void 0:M.length)>0&&"folder"===P,style:{height:"100%",backgroundColor:"dark"===G?"#141414":"white"},children:[(null===M||void 0===M?void 0:M.length)>0&&"folder"===P&&Object(y.jsx)(f.a.Sider,{theme:G,children:Object(y.jsxs)("div",{style:{width:"100%"},children:[Object(y.jsx)("div",{className:"ant-table-title",style:{backgroundColor:"dark"===G?"#141414":"white",width:"100%",height:"64px",padding:"20px"},children:Object(y.jsx)(c.a,{children:"Folders"})}),Object(y.jsx)("div",{style:{height:"54px",backgroundColor:"dark"===G?"#1d1d1d":"#fafafa"}}),Object(y.jsx)(g.a,{defaultExpandAll:!0,treeData:M,onSelect:function(e){return A(e[0].toString())},style:{height:"100%"}})]})}),Object(y.jsx)(f.a.Content,{children:Object(y.jsx)(w,{title:"Endpoints",actions:[t.map((function(e){return Object(y.jsx)(u.a,{color:e.color,closable:!0,onClose:function(){l(t.filter((function(n){return n.name!==e.name})))},children:e.name})})),Object(y.jsx)(b.a,{children:Object(y.jsx)(W,{})}),Object(y.jsxs)(a.default,{value:P,onChange:function(e){localStorage.setItem("api-view",e),z(e)},suffixIcon:Object(y.jsx)(x.a,{}),children:[Object(y.jsx)(k,{value:"folder",children:"Folder"}),Object(y.jsx)(k,{value:"list",children:"List"})]},"view-select")],columns:Y,loading:U,data:function(){var e=null===L||void 0===L?void 0:L.filter((function(e){var n;return 0===t.length||e.tag&&(null===(n=e.tag)||void 0===n?void 0:n.find((function(e){return t.find((function(n){return n.name===e.name}))})))}));return null===e||void 0===e?void 0:e.filter((function(e){return"list"===P||function(e){return""===R&&0===M[0].children.filter((function(n){return e.url.startsWith(n.key)})).length||""!==R&&e.url.startsWith(R)||""===R&&-1===e.url.trimStart("/").indexOf("/")}(e)||function(e){return"RegEx"===R&&e.url.startsWith("^\\")}(e)}))}(),queryFn:q})})]})})}}}]);
//# sourceMappingURL=69.ae37cb80.chunk.js.map
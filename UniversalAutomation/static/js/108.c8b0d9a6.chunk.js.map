{"version":3,"sources":["components/terminal/historyTable.tsx"],"names":["Table","React","lazy","TerminalHistories","instanceId","useParams","useQuery","histories","data","isLoading","instance","columns","title","dataIndex","key","render","text","record","Text","type","style","fontSize","color","dayjs","to","timeStamp","sorter","a","b","input","localeCompare","terminal","subTitle","identity","name","id","map","m","loading","expandable","expandedRowRender","row","output","rowExpandable"],"mappings":"uTASMA,EAAQC,IAAMC,MAAK,kBAAM,4CAEhB,SAASC,IAAqB,IAAD,EAChCC,EAAeC,cAAfD,WADgC,EAEDE,YAAQ,6BAA0CF,EAA1C,aAAjCG,EAF0B,EAEhCC,KAAiBC,EAFe,EAEfA,UACXC,EAAaJ,YAAQ,6BAAyCF,IAApEI,KAEFG,EAA4C,CAC9C,CACIC,MAAO,YACPC,UAAW,YACXC,IAAK,YACLC,OAAQ,SAACC,EAAMC,GACX,OACI,eAAC,IAAD,WACI,cAAC,IAAWC,KAAZ,CAAiBC,KAAK,YAAYC,MAAO,CAAEC,SAAU,IAArD,SACI,cAAC,IAAD,CAAiBD,MAAO,CAAEE,MAAO,UAAWD,SAAU,eAE1D,cAAC,IAAWH,KAAZ,CAAiBC,KAAK,YAAYC,MAAO,CAAEC,SAAU,IAArD,SACKE,MAAQC,GAAGD,IAAK,OAACN,QAAD,IAACA,OAAD,EAACA,EAAQQ,mBAM9C,CACIb,MAAO,QACPC,UAAW,QACXC,IAAK,QACLY,OAAQ,SAACC,EAAGC,GAAJ,OAAUD,EAAEE,MAAMC,cAAcF,EAAEC,UAIlD,OACI,cAAC,IAAD,CAAYjB,MAAK,OAAEF,QAAF,IAAEA,OAAF,EAAEA,EAAUqB,SAAUC,SAAQ,iBAAKtB,QAAL,IAAKA,GAAL,UAAKA,EAAUuB,gBAAf,aAAK,EAAoBC,KAAzB,oBAAkCxB,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAUyB,GAA5C,KAA/C,SACI,cAACnC,EAAD,CACIY,MAAM,2BACND,QAASA,EACTH,KAAI,OAAED,QAAF,IAAEA,OAAF,EAAEA,EAAW6B,KAAI,SAAAC,GACjB,OAAO,2BACAA,GADP,IAEIvB,IAAKuB,EAAEF,QAGfG,QAAS7B,EACT8B,WAAY,CACRC,kBAAmB,SAACC,GAAD,OAA0B,8BAAMA,EAAIC,UACvDC,cAAe,SAACF,GAAD,OAAS","file":"static/js/108.c8b0d9a6.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { PageHeader, Space, Typography } from \"antd\";\r\nimport { useQuery } from \"react-query3\";\r\nimport { CustomColumns, TerminalHistory, TerminalInstance } from 'types';\r\n\r\nimport { HistoryOutlined } from \"@ant-design/icons\";\r\nimport dayjs from \"dayjs\";\r\nimport { useParams } from \"react-router\";\r\n\r\nconst Table = React.lazy(() => import(\"components/ui/Table\"));\r\n\r\nexport default function TerminalHistories() {\r\n    const { instanceId } = useParams();\r\n    const { data: histories, isLoading } = useQuery<TerminalHistory[]>(`/terminal/instance/${instanceId}/history`);\r\n    const { data: instance } = useQuery<TerminalInstance>(`/terminal/instance/${instanceId}`);\r\n\r\n    const columns: CustomColumns<TerminalHistory>[] = [\r\n        {\r\n            title: 'Timestamp',\r\n            dataIndex: 'timeStamp',\r\n            key: 'timeStamp',\r\n            render: (text, record) => {\r\n                return (\r\n                    <Space>\r\n                        <Typography.Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n                            <HistoryOutlined style={{ color: \"inherit\", fontSize: \"inherit\" }} />\r\n                        </Typography.Text>\r\n                        <Typography.Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n                            {dayjs().to(dayjs(record?.timeStamp))}\r\n                        </Typography.Text>\r\n                    </Space>\r\n                )\r\n            }\r\n        },\r\n        {\r\n            title: 'Input',\r\n            dataIndex: 'input',\r\n            key: 'input',\r\n            sorter: (a, b) => a.input.localeCompare(b.input)\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <PageHeader title={instance?.terminal} subTitle={`${instance?.identity?.name} (${instance?.id})`}>\r\n            <Table\r\n                title=\"Terminal Command History\"\r\n                columns={columns}\r\n                data={histories?.map(m => {\r\n                    return {\r\n                        ...m,\r\n                        key: m.id\r\n                    }\r\n                })}\r\n                loading={isLoading}\r\n                expandable={{\r\n                    expandedRowRender: (row: TerminalHistory) => <pre>{row.output}</pre>,\r\n                    rowExpandable: (row) => true\r\n                }}\r\n            />\r\n\r\n        </PageHeader>\r\n    );\r\n}\r\n"],"sourceRoot":""}
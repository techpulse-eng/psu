(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[61,3],{1017:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return j}));var n=a(12),i=a(74),r=(a(0),a(99)),c=a(92),s=a(70),o=a(36),l=a(587),d=a(48),u=a(3);function j(e){var t=e.to,a=e.accessControls,j=e.allowedWithOneWayGitSync,b=Object(i.a)(e,["to","accessControls","allowedWithOneWayGitSync"]);return Object(u.jsx)(r.a,{requiredRoles:["Administrator","Operator"],requiredAccessControls:d.b.Edit,accessControls:a,allowedWithOneWayGitSync:j,children:Object(u.jsx)(c.a,{title:"Edit Details",children:Object(u.jsx)(o.b,{to:t,children:Object(u.jsx)(s.a,Object(n.a)({type:"text",icon:Object(u.jsx)(l.a,{})},b))})})})}},1415:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return P}));var n=a(49),i=a.n(n),r=a(12),c=a(84),s=a(27),o=a(0),l=a.n(o),d=a(415),u=a(22),j=a(272),b=a(925),h=a(451),m=a(92),O=a(70),p=a(926),f=a(693),x=a(933),y=a(450),g=a(452),v=a(924),k=a(954),S=a(414),I=a(48),C=a(453),W=a(161),w=a(439),T=a(1017),q=a(299),A=a(99),B=a(456),F=a(3),D=l.a.lazy((function(){return Promise.resolve().then(a.bind(null,455))})),E=j.default.Option,L=function(e){var t=l.a.useState(!1),a=Object(s.a)(t,2),n=a[0],o=a[1],d=l.a.useState(!1),j=Object(s.a)(d,2),x=j[0],y=j[1],g=b.a.useForm(),v=Object(s.a)(g,1)[0],k=Object(u.b)().mutateAsync,S=Object(q.a)(),I=l.a.useCallback(Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.validateFields();case 2:return a=t.sent,y(!0),t.next=6,k(Object(r.a)({key:"/settings/authentication/".concat(e.resource.id),action:"update"},S(Object(r.a)(Object(r.a)({},e.resource),a))),{onError:function(e){var t;o(!1),y(!1),h.a.error({message:"Error",description:null===(t=e.response)||void 0===t?void 0:t.data,icon:Object(F.jsx)(W.a,{style:{color:"red"}})})},onSuccess:function(e,t){y(!1),o(!1),u.a.refetchQueries("/settings/authentication")}});case 6:case"end":return t.stop()}}),t)}))),[v,k,S,e.resource]);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(A.a,{requiredRoles:["Administrator","Operator"],allowedWithOneWayGitSync:!1,children:Object(F.jsx)(m.a,{title:"Edit",children:Object(F.jsx)(O.a,{onClick:function(){return o(!0)},icon:Object(F.jsx)(w.a,{}),type:"text"})})}),Object(F.jsx)(p.a,{title:"SAML2 Options",visible:n,onCancel:function(){return o(!1)},footer:[Object(F.jsx)(B.a,{url:"config/security/saml2",style:{float:"left"}}),Object(F.jsx)(O.a,{onClick:function(){o(!1)},children:"Cancel"},"back"),Object(F.jsx)(O.a,{type:"primary",onClick:function(){I()},loading:x,children:"Save"},"submit")],children:Object(F.jsxs)(b.a,{size:"small",form:v,layout:"vertical",initialValues:Object(r.a)({},e.resource),children:[Object(F.jsx)(b.a.Item,{name:"entityId",label:"Entity ID",tooltip:"The service provider entity ID.",style:{marginBottom:0},rules:[{required:!0,message:"The entity ID is required"}],children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"identityProviderEntityId",label:"Identity Provider Entity ID",tooltip:"The identity provider entity ID. This will be used as the metadata address if none is specified.",rules:[{required:!0,message:"The identity provider entity ID is required"}],style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"metadataAddress",label:"Metadata Address",tooltip:"The metadata address if it is different than the identity provider ID.",style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"callbackPath",label:"Return URL",tooltip:"The return URL after authentication has been completed.",style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"singleSignOnServiceUrl",label:"Single Sign-On Service URL",tooltip:"The URL to redirect to to perform the single sign-on request.",style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"signingKey",label:"Signing Key",tooltip:"The path to a signing key (.cert) file.",style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"serviceCertificate",label:"Service Certificate",tooltip:"The certificate responsible for signing requests. This can be a path to a file or the distinguished named of a certificate.",style:{marginBottom:0},children:Object(F.jsx)(f.default,{})})]})})]})},G=function(e){var t=l.a.useState(!1),a=Object(s.a)(t,2),n=a[0],o=a[1],d=l.a.useState(!1),y=Object(s.a)(d,2),g=y[0],v=y[1],k=b.a.useForm(),S=Object(s.a)(k,1)[0],I=Object(u.b)().mutateAsync,C=Object(q.a)(),T=l.a.useCallback(Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.validateFields();case 2:return a=t.sent,v(!0),t.next=6,I(Object(r.a)({key:"/settings/authentication/".concat(e.resource.id),action:"update"},C(Object(r.a)(Object(r.a)({},e.resource),a))),{onError:function(e){var t;o(!1),v(!1),h.a.error({message:"Error",description:null===(t=e.response)||void 0===t?void 0:t.data,icon:Object(F.jsx)(W.a,{style:{color:"red"}})})},onSuccess:function(e,t){v(!1),o(!1),u.a.refetchQueries("/settings/authentication")}});case 6:case"end":return t.stop()}}),t)}))),[S,I,C,e.resource]);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(A.a,{requiredRoles:["Administrator","Operator"],allowedWithOneWayGitSync:!1,children:Object(F.jsx)(m.a,{title:"Edit",children:Object(F.jsx)(O.a,{onClick:function(){return o(!0)},icon:Object(F.jsx)(w.a,{}),type:"text"})})}),Object(F.jsx)(p.a,{title:"WS-Federation Options",visible:n,onCancel:function(){return o(!1)},footer:[Object(F.jsx)(B.a,{url:"config/security/ws-federation",style:{float:"left"}}),Object(F.jsx)(O.a,{onClick:function(){o(!1)},children:"Cancel"},"back"),Object(F.jsx)(O.a,{type:"primary",onClick:function(){T()},loading:g,children:"Save"},"submit")],children:Object(F.jsxs)(b.a,{size:"small",form:S,layout:"vertical",initialValues:Object(r.a)({},e.resource),children:[Object(F.jsx)(b.a.Item,{name:"callbackPath",label:"Callback Path",tooltip:"The callback path that the WS-Federation provider will use.",style:{marginBottom:0},rules:[{required:!0,message:"The callback path is required!"}],children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"metadataAddress",label:"Metadata Address",tooltip:"The meta data address.",rules:[{required:!0,message:"The metadata address is required!"}],style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"wtrealm",label:"WTrealm",tooltip:"The WTRealm.",rules:[{required:!0,message:"The Wtrealm is required!"}],style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"wreply",label:"Wreply",tooltip:"The Wreply.",rules:[{required:!0,message:"The Wreply is required!"}],style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"useTokenLifetime",label:"Use Token Lifetime",tooltip:"Indicates that the authentication session lifetime (e.g. cookies) should match that of the authentication token.",style:{marginBottom:0},valuePropName:"checked",children:Object(F.jsx)(x.default,{})}),Object(F.jsx)(b.a.Item,{name:"correlationCookieSameSite",label:"Correlation Cookie SameSite",tooltip:"List of permissions to request.",style:{marginBottom:0},children:Object(F.jsxs)(j.default,{children:[Object(F.jsx)(j.default.Option,{value:"none",children:"None"}),Object(F.jsx)(j.default.Option,{value:"lax",children:"Lax"}),Object(F.jsx)(j.default.Option,{value:"strict",children:"Strict"})]})})]})})]})},R=function(e){var t=l.a.useState(!1),a=Object(s.a)(t,2),n=a[0],o=a[1],d=l.a.useState(!1),y=Object(s.a)(d,2),g=y[0],v=y[1],k=b.a.useForm(),S=Object(s.a)(k,1)[0],I=Object(u.b)().mutateAsync,C=Object(q.a)(),T=l.a.useCallback(Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.validateFields();case 2:return a=t.sent,v(!0),t.next=6,I(Object(r.a)({key:"/settings/authentication/".concat(e.resource.id),action:"update"},C(Object(r.a)(Object(r.a)({},e.resource),a))),{onError:function(e){var t;o(!1),v(!1),h.a.error({message:"Error",description:null===(t=e.response)||void 0===t?void 0:t.data,icon:Object(F.jsx)(W.a,{style:{color:"red"}})})},onSuccess:function(e,t){v(!1),o(!1),u.a.refetchQueries("/settings/authentication")}});case 6:case"end":return t.stop()}}),t)}))),[S,I,C,e.resource]);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(A.a,{requiredRoles:["Administrator","Operator"],allowedWithOneWayGitSync:!1,children:Object(F.jsx)(m.a,{title:"Edit",children:Object(F.jsx)(O.a,{onClick:function(){return o(!0)},icon:Object(F.jsx)(w.a,{}),type:"text"})})}),Object(F.jsx)(p.a,{title:"OpenID Connect Options",visible:n,onCancel:function(){return o(!1)},footer:[Object(F.jsx)(B.a,{url:"config/security/openid-connect",style:{float:"left"}}),Object(F.jsx)(O.a,{onClick:function(){o(!1)},children:"Cancel"},"back"),Object(F.jsx)(O.a,{type:"primary",onClick:function(){T()},loading:g,children:"Save"},"submit")],children:Object(F.jsxs)(b.a,{size:"small",form:S,layout:"vertical",initialValues:Object(r.a)({},e.resource),children:[Object(F.jsx)(b.a.Item,{name:"callbackPath",label:"Callback Path",tooltip:"The callback path that the OpenID Connect provider will use.",style:{marginBottom:0},rules:[{required:!0,message:"The callback path is required!"}],children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"clientId",label:"Client ID",tooltip:"The client ID used to register this application.",rules:[{required:!0,message:"The client ID is required!"}],style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"clientSecret",label:"Client Secret",tooltip:"The client secret used to identify this application.",style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"authority",label:"Authority",tooltip:"The URL to the authority authenticating the request.",style:{marginBottom:0},rules:[{required:!0,message:"The authority is required!"}],children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"resource",label:"Resource",tooltip:"An additional resource to request access to via an access token.",style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"responseType",label:"Response Type",tooltip:"The OpenID Connect response type. Specify code, token, and\\or token_id separated by spaces",rules:[{required:!0,message:"Response type is required!"}],style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"saveTokens",label:"Save Tokens",tooltip:"Defines whether access and refresh tokens should be stored.",style:{marginBottom:0},valuePropName:"checked",children:Object(F.jsx)(x.default,{})}),Object(F.jsx)(b.a.Item,{name:"useTokenLifetime",label:"Use Token Lifetime",tooltip:"Indicates that the authentication session lifetime (e.g. cookies) should match that of the authentication token.",style:{marginBottom:0},valuePropName:"checked",children:Object(F.jsx)(x.default,{})}),Object(F.jsx)(b.a.Item,{name:"getClaimsFromUserInfoEndpoint",label:"Get Claims From User Info Endpoint",tooltip:"Whether to retrieve additional claims or not after creating an identity from id_token received from token endpoint. ",style:{marginBottom:0},valuePropName:"checked",children:Object(F.jsx)(x.default,{})}),Object(F.jsx)(b.a.Item,{name:"scopes",label:"Scopes",tooltip:"List of permissions to request. Separate scopes by spaces",style:{marginBottom:0},children:Object(F.jsx)(f.default,{})}),Object(F.jsx)(b.a.Item,{name:"correlationCookieSameSite",label:"Correlation Cookie SameSite",tooltip:"List of permissions to request.",style:{marginBottom:0},children:Object(F.jsxs)(j.default,{children:[Object(F.jsx)(j.default.Option,{value:"none",children:"None"}),Object(F.jsx)(j.default.Option,{value:"lax",children:"Lax"}),Object(F.jsx)(j.default.Option,{value:"strict",children:"Strict"})]})})]})})]})};function P(){var e=Object(u.b)().mutateAsync,t=l.a.useState(!1),a=Object(s.a)(t,2),n=a[0],o=a[1],b=Object(d.a)("/settings/authentication",{refetchOnWindowFocus:!1}),m=b.data,O=b.isLoading,p=b.refetch,f=l.a.useCallback(function(){var t=Object(c.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==m.filter((function(e){return!e.disabled})).length||a.disabled){t.next=3;break}return y.b.error("You must have at least one enabled authentication method."),t.abrupt("return");case 3:return t.next=5,e(Object(r.a)(Object(r.a)({key:"/settings/authentication/".concat(a.id),action:"update"},a),{},{disabled:!a.disabled}),{onSuccess:function(e,t){p()}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,p,m]),w=l.a.useCallback(function(){var t=Object(c.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(!0),t.next=3,e({key:"/settings/authentication",action:"create",type:a,disabled:!0},{onError:function(e){o(!1),h.a.error({message:"Error",description:e.response.data,icon:Object(F.jsx)(W.a,{style:{color:"red"}})})},onSuccess:function(e,t){o(!1),p()}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,p]),q=[I.c.Form,I.c.OpenIDConnect,I.c.Saml2,I.c.Windows,I.c.WSFederation].filter((function(e){return-1===(null===m||void 0===m?void 0:m.map((function(e){return e.type})).indexOf(e))})),P=function(e){switch(e){case I.c.Form:return"Form";case I.c.Windows:return"Windows";case I.c.OpenIDConnect:return"OpenID Connect";case I.c.WSFederation:return"WS-Federation";case I.c.Saml2:return"SAML2"}},U=[{key:"type",title:"Type",dataIndex:"type",editable:!1,sorter:function(e,t){return P(e.type).localeCompare(P(t.type))},sortDirections:["descend"],render:function(e,t){return Object(F.jsx)(g.b,{children:P(t.type)})}},{key:"source",title:"Source",dataIndex:"source",editable:!1},{key:"enabled",title:"Enabled",dataIndex:"enabled",editable:!1,render:function(e,t){return Object(F.jsx)(v.a,{disabled:"appsettings.json"===t.source,okText:"Yes",cancelText:"No",onConfirm:function(){return f(t)},title:"Are you sure you want to ".concat(t.disabled?"enabled":"disable"," this authentication method? You may lose access to the admin console if not configured properly."),children:Object(F.jsx)(x.default,{disabled:"appsettings.json"===t.source,checked:!t.disabled})})}},{width:"fit-content",dataIndex:"actions",editable:!1,render:function(e,t){return"appsettings.json"===t.source?Object(F.jsx)(F.Fragment,{}):t.type===I.c.Form?Object(F.jsx)(g.b,{children:Object(F.jsx)(T.default,{to:"".concat(null===t||void 0===t?void 0:t.id),allowedWithOneWayGitSync:!1})}):t.type===I.c.OpenIDConnect?Object(F.jsxs)(g.b,{children:[Object(F.jsx)(R,{resource:t,allowedWithOneWayGitSync:!1}),Object(F.jsx)(D,{resource:t,refetch:["/settings/authentication"],allowedWithOneWayGitSync:!1})]}):t.type===I.c.WSFederation?Object(F.jsxs)(g.b,{children:[Object(F.jsx)(G,{resource:t,allowedWithOneWayGitSync:!1}),Object(F.jsx)(D,{resource:t,refetch:["/settings/authentication"],allowedWithOneWayGitSync:!1})]}):t.type===I.c.Saml2?Object(F.jsxs)(g.b,{children:[Object(F.jsx)(L,{resource:t,allowedWithOneWayGitSync:!1}),Object(F.jsx)(D,{resource:t,refetch:["/settings/authentication"],allowedWithOneWayGitSync:!1})]}):Object(F.jsx)(g.b,{children:Object(F.jsx)(D,{resource:t,refetch:["/settings/authentication"],allowedWithOneWayGitSync:!1})})}}];return Object(F.jsx)(k.a,{title:"Authentication",subTitle:"Authentication methods for the platform.",extra:[q.length>0&&Object(F.jsx)(A.a,{requiredRoles:["Administrator","Operator"],allowedWithOneWayGitSync:!1,children:Object(F.jsx)(j.default,{style:{width:250},placeholder:Object(F.jsx)(S.a,{children:"Add Authentication Method"}),onChange:w,loading:n,disabled:n,children:q.map((function(e){return Object(F.jsx)(E,{value:e,children:P(e)},e)}))})}),Object(F.jsx)(B.a,{url:"config/security#forms-authentication"})],children:Object(F.jsx)(C.default,{title:"Authentication",data:m,columns:U,loading:O,queryFn:p})})}}}]);
//# sourceMappingURL=61.ebbf6591.chunk.js.map
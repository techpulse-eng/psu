{"version":3,"sources":["components/ui/ResourceInfo.tsx","components/dashboard/components/PowerButton.tsx","components/dashboard/components/DashboardViewButton.tsx","components/dashboard/components/DashboardViews.tsx","components/dashboard/ComponentsDrawer.tsx","components/dashboard/dashboard.tsx","components/editor/themes/EditorThemes.tsx","components/ui/Editor/snippets.js","components/ui/Editor/Editor.tsx"],"names":["ResourceInfo","props","navigate","useNavigate","bordered","bodyStyle","padding","ghost","onBack","PowerButton","dashboard","allowedWithOneWayGitSync","useMutation","dashboardId","axios","put","then","res","data","onError","error","variables","context","message","onSuccess","queryClient","refetchQueries","stale","active","inactive","isStarting","isLoading","start","mutateAsync","isRestarting","restart","delete","isStoping","stop","requiredRoles","title","getPopupContainer","document","getElementsByTagName","placement","trigger","overlay","onClick","key","id","Item","disabled","status","icon","loading","type","DashboardViewButton","href","toRelativeUrl","baseUrl","target","DashboardTerminal","lazy","DashboardSettings","DashboardOutput","DashboardEndpoints","DashboardSessions","DashboardComponents","DashboardViews","useState","current","setCurrent","usePageContext","resource","tabs","tab","dashboardComponents","length","views","settings","log","console","endpoints","sessions","modules","headStyle","borderBottom","height","paddingTop","tabList","activeTabKey","onTabChange","tabProps","tabBarStyle","tabBarExtraContent","Loader","tip","ComponentsDrawer","useParams","useQuery","enabled","components","isOpen","setIsOpen","selectedComponents","setSelectedComponents","selectedRowKeys","setSelectedRowKeys","setQueryData","columns","dataIndex","render","_","record","some","component","CheckCircleOutlined","color","MinusCircleOutlined","danger","DeleteOutlined","comp","filter","x","action","Fragment","rowSelection","onChange","selectedRows","selectedModules","map","resourceInfo","getCheckboxProps","install","name","AppstoreAddOutlined","visible","closable","width","onClose","Title","Paragraph","to","GiftOutlined","Table","actions","PlusCircleOutlined","rowKey","DashboardPage","Page","capitalize","subTitle","tags","setStatusColor","extra","Group","psuDark","base","inherit","rules","token","foreground","colors","psuLight","snippets","range","label","kind","documentation","insertText","loader","config","paths","vs","init","monaco","languages","registerCompletionItemProvider","provideCompletionItems","model","options","a","incomplete","suggestions","registerDocumentFormattingEditProvider","displayName","provideDocumentFormattingEdits","post","getValue","headers","text","startColumn","startLineNumber","endLineNumber","getLineCount","endColumn","getLineMaxColumn","triggerChars","getKind","CompletionItemKind","Text","Method","Folder","File","Property","triggerCharacters","position","findIndex","triggerCharacter","content","cursorPosition","getOffsetAt","help","EditorContext","React","createContext","CodeEditor","children","refetch","readonly","isReadOnly","setIsReadOnly","isSaving","setIsSaving","currentTheme","useThemeSwitcher","userData","useAppStore","useMonaco","copy","useClipboard","success","editorRef","useRef","onSave","useCallback","self","startsWith","schemaName","preserveBOM","lineEnding","handleEditorDidMount","editor","register","setMonarchTokensProvider","tokenizer","root","getModel","onDidChangeContent","versionId","getVersionId","callback","delay","timer","args","clearTimeout","setTimeout","debounce","newVersionId","markerData","startLine","endLine","severity","MarkerSeverity","Error","setModelMarkers","addCommand","KeyMod","CtrlCmd","KeyCode","KEY_S","parent","addAction","keybindings","F5","precondition","keybindingContext","contextMenuGroupId","contextMenuOrder","run","ed","F8","useEffect","defineTheme","setTheme","onCopy","zoomIn","zoomOut","value","useMemo","Provider","SaveButton","child","requiredAccessControls","AccessControlTypes","Edit","accessControls","cloneElement","SaveFilled","callAll","BaseEditor","useContext","theme","language","onMount","FullEditor","showSave","hideToolbar","ZoomInOutlined","ZoomOutOutlined","LoadingOutlined","CopyFilled","scriptBlock","wordWrap","wrappingIndent","minimap","lineHeight","lineNumbersMinChars","scrollBeyondLastLine","hideCursorInOverviewRuler","overviewRulerLanes","overviewRulerBorder"],"mappings":"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","file":"static/js/20.303dc257.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Card, PageHeaderProps, PageHeader } from \"antd\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function ResourceInfo(props: PageHeaderProps & { children?: React.ReactNode }) {\r\n  const navigate = useNavigate();\r\n\r\n  return (\r\n    <Card bordered={false} bodyStyle={{padding: 0}}>\r\n      <PageHeader {...props} ghost={true} onBack={() => navigate(-1)} />\r\n    </Card>\r\n  );\r\n}\r\n","/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport {\r\n  PauseCircleOutlined,\r\n  PlayCircleOutlined,\r\n  PoweroffOutlined,\r\n  ReloadOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { Button, Dropdown, Menu, message, Tooltip } from \"antd\";\r\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\r\nimport RoleGuard from \"components/standalone/role-guard\";\r\nimport queryClient from \"components/utils/queryClient\";\r\nimport React from \"react\";\r\nimport { useMutation } from \"react-query3\";\r\nimport { Dashboard } from \"types\";\r\n\r\nexport default function PowerButton({ dashboard, allowedWithOneWayGitSync }: { dashboard: Dashboard, allowedWithOneWayGitSync?: boolean }) {\r\n  const { isLoading: isStarting, mutateAsync: start } = useMutation(\r\n    (dashboardId: number) =>\r\n      axios\r\n        .put(`/api/v1/dashboard/${dashboardId}/status`)\r\n        .then((res: AxiosResponse<Dashboard>) => res.data),\r\n    {\r\n      onError: (error: AxiosError, variables, context) => {\r\n        message.error(`Dashboard ${variables}; ${error?.message}`);\r\n      },\r\n      onSuccess: (data, variables) => {\r\n        //queryClient.setQueryData(`/dashboard/${variables}`, data);\r\n        queryClient.refetchQueries(`/dashboard/${variables}`);\r\n        queryClient.refetchQueries(`/dashboard/diagnostics/memory`, {\r\n          stale: true,\r\n          active: true,\r\n          inactive: true,\r\n        });\r\n        queryClient.refetchQueries(`/dashboard/diagnostics/endpoints`, {\r\n          stale: true,\r\n          active: true,\r\n          inactive: true,\r\n        });\r\n        queryClient.refetchQueries(`/dashboard/diagnostics/sessions`, {\r\n          stale: true,\r\n          active: true,\r\n          inactive: true,\r\n        });\r\n        queryClient.refetchQueries(`/dashboard`, { stale: true });\r\n      },\r\n    }\r\n  );\r\n\r\n  const { isLoading: isRestarting, mutateAsync: restart } = useMutation(\r\n    (dashboardId: number) =>\r\n      axios\r\n        .put(`/api/v1/dashboard/${dashboardId}/status/restart`)\r\n        .then((res: AxiosResponse<Dashboard>) => res.data),\r\n    {\r\n      onError: (error: AxiosError, variables, context) => {\r\n        message.error(`Dashboard ${variables}; ${error?.message}`);\r\n      },\r\n      onSuccess: (data, variables) => {\r\n        //queryClient.setQueryData(`/dashboard/${variables}`, data);\r\n        queryClient.refetchQueries(`/dashboard`, { stale: true });\r\n        queryClient.refetchQueries(`/dashboard/${variables}`, { stale: true });\r\n        queryClient.refetchQueries(`/dashboard/diagnostics/endpoints`, {\r\n          stale: true,\r\n        });\r\n        queryClient.refetchQueries(`/dashboard/diagnostics/sessions`, {\r\n          stale: true,\r\n        });\r\n        queryClient.refetchQueries(`/dashboard/diagnostics/memory`, {\r\n          stale: true,\r\n        });\r\n      },\r\n    }\r\n  );\r\n\r\n  const { isLoading: isStoping, mutateAsync: stop } = useMutation(\r\n    (dashboardId: number) =>\r\n      axios\r\n        .delete(`/api/v1/dashboard/${dashboardId}/status`)\r\n        .then((res: AxiosResponse<Dashboard>) => res.data),\r\n    {\r\n      onError: (error: AxiosError, variables, context) => {\r\n        message.error(`Dashboard ${variables}; ${error?.message}`);\r\n      },\r\n      onSuccess: (data, variables) => {\r\n        //queryClient.setQueryData(`/dashboard/${variables}`, data);\r\n        queryClient.refetchQueries(`/dashboard`, { stale: true });\r\n        queryClient.refetchQueries(`/dashboard/${variables}`);\r\n        queryClient.refetchQueries(`/dashboard/diagnostics/endpoints`, {\r\n          stale: true,\r\n        });\r\n        queryClient.refetchQueries(`/dashboard/diagnostics/sessions`, {\r\n          stale: true,\r\n        });\r\n        queryClient.refetchQueries(`/dashboard/diagnostics/memory`, {\r\n          stale: true,\r\n        });\r\n      },\r\n    }\r\n  );\r\n\r\n  const onClick = (key) => {\r\n    return key === \"start\"\r\n      ? start(dashboard?.id)\r\n      : key === \"stop\"\r\n        ? stop(dashboard?.id)\r\n        : key === \"restart\"\r\n          ? restart(dashboard?.id)\r\n          : null;\r\n  };\r\n\r\n  return (\r\n    <RoleGuard requiredRoles={[\"Operator\", \"Administrator\"]} allowedWithOneWayGitSync={allowedWithOneWayGitSync}>\r\n      <Tooltip title=\"Power\">\r\n        <Dropdown\r\n          getPopupContainer={() => document.getElementsByTagName(\"body\")[0]}\r\n          placement=\"bottomCenter\"\r\n          trigger={[\"click\"]}\r\n          overlay={() => (\r\n            <Menu onClick={({ key }) => onClick(key)} key={dashboard?.id}>\r\n              <Menu.Item\r\n                disabled={dashboard?.status === 1}\r\n                key=\"start\"\r\n                icon={<PlayCircleOutlined />}\r\n              >\r\n                Start\r\n              </Menu.Item>\r\n              <Menu.Item\r\n                disabled={dashboard?.status === 0}\r\n                key=\"stop\"\r\n                icon={<PauseCircleOutlined />}\r\n              >\r\n                Stop\r\n              </Menu.Item>\r\n              <Menu.Item\r\n                disabled={dashboard?.status === 0}\r\n                key=\"restart\"\r\n                icon={<ReloadOutlined />}\r\n              >\r\n                Restart\r\n              </Menu.Item>\r\n            </Menu>\r\n          )}\r\n        >\r\n          <Button\r\n            loading={isStoping || isStarting || isRestarting}\r\n            icon={<PoweroffOutlined />}\r\n            type=\"text\"\r\n          />\r\n        </Dropdown>\r\n      </Tooltip>\r\n    </RoleGuard>\r\n  );\r\n}\r\n","import { GlobalOutlined } from \"@ant-design/icons\";\r\nimport { Button, ButtonProps, Tooltip } from \"antd\";\r\nimport { toRelativeUrl } from \"components/utils/utils\";\r\nimport React from \"react\";\r\nimport { Dashboard } from \"types\";\r\n\r\ntype DashboardViewButtonProps = {\r\n  dashboard: Dashboard;\r\n} & ButtonProps;\r\n\r\nexport default function DashboardViewButton({\r\n  dashboard,\r\n  ...props\r\n}: DashboardViewButtonProps) {\r\n  return (\r\n    <Tooltip title=\"View\">\r\n      <Button\r\n        {...props}\r\n        icon={<GlobalOutlined />}\r\n        type=\"text\"\r\n        href={toRelativeUrl(`${dashboard?.baseUrl}`)}\r\n        target=\"_blank\"\r\n      />\r\n    </Tooltip>\r\n  );\r\n}","import React, { lazy, useState } from \"react\";\r\nimport { Button, Card, Space } from \"antd\";\r\nimport Loader from \"../../utils/Loader\";\r\nimport { RightPanelSizeButton, usePageContext } from \"components/pages/Page\";\r\nimport { CardTabListType } from \"antd/es/card\";\r\n\r\nconst DashboardTerminal = lazy(() => import(\"./DashboardTerminal\"));\r\nconst DashboardSettings = lazy(() => import(\"./DashoardbSettings\"));\r\nconst DashboardOutput = lazy(() => import(\"./DashboardOutput\"));\r\nconst DashboardEndpoints = lazy(() => import(\"./Endpoints\"));\r\nconst DashboardSessions = lazy(() => import(\"./Sessions\"));\r\nconst DashboardComponents = lazy(() => import(\"./DashboardComponents\"));\r\n\r\nexport default function DashboardViews() {\r\n  const [current, setCurrent] = useState(\"settings\");\r\n  const { resource: dashboard } = usePageContext();\r\n\r\n  const tabs: CardTabListType[] = [\r\n    {\r\n      key: \"settings\",\r\n      tab: \"Settings\",\r\n    },\r\n    {\r\n      key: \"log\",\r\n      tab: \"Log\",\r\n    },\r\n    {\r\n      key: \"console\",\r\n      tab: \"Console\",\r\n    },\r\n    {\r\n      key: \"endpoints\",\r\n      tab: \"Endpoints\",\r\n    },\r\n    {\r\n      key: \"sessions\",\r\n      tab: \"Sessions\",\r\n    },\r\n    {\r\n      key: \"modules\",\r\n      tab: \"Modules\",\r\n      disabled:\r\n        dashboard?.dashboardComponents?.length < 0 ||\r\n        (dashboard?.dashboardComponents?.length > 0 &&\r\n          dashboard?.dashboardComponents[0] === null),\r\n    },\r\n  ];\r\n\r\n  const views = {\r\n    settings: <DashboardSettings />,\r\n    log: <DashboardOutput />,\r\n    console: <DashboardTerminal />,\r\n    endpoints: <DashboardEndpoints />,\r\n    sessions: <DashboardSessions />,\r\n    modules: <DashboardComponents />,\r\n  };\r\n\r\n  return (\r\n    <Card\r\n      bordered={false}\r\n      headStyle={{ borderBottom: 0, height: 64 }}\r\n      bodyStyle={current === \"log\" ? { padding: 0 } : { paddingTop: 24 }}\r\n      tabList={tabs}\r\n      activeTabKey={current}\r\n      onTabChange={(key) => setCurrent(key)}\r\n      tabProps={{\r\n        type: \"line\",\r\n        tabBarStyle: { height: 64 },\r\n      }}\r\n      tabBarExtraContent={\r\n        <Space>\r\n          <RightPanelSizeButton>\r\n            <Button />\r\n          </RightPanelSizeButton>\r\n        </Space>\r\n      }\r\n    >\r\n      <Loader tip={`Loading ${current}`}>{views[current]}</Loader>\r\n    </Card>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { CustomColumns, Dashboard, Module } from \"../../types\";\r\nimport { useParams } from \"react-router\";\r\nimport {\r\n  CheckCircleOutlined,\r\n  MinusCircleOutlined,\r\n  GiftOutlined,\r\n  PlusCircleOutlined,\r\n  AppstoreAddOutlined,\r\n  DeleteOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { Tag, Drawer, Typography, Button, Tooltip } from \"antd\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useQuery } from \"react-query3\";\r\nimport queryClient, { useMutation } from \"components/utils/queryClient\";\r\nimport Table from \"components/ui/Table\";\r\n\r\nexport default function ComponentsDrawer() {\r\n  const { id } = useParams();\r\n  const { data: dashboard } = useQuery<Dashboard>(`/dashboard/${id}`, {\r\n    enabled: !!id,\r\n  });\r\n  const { data: components } = useQuery<Module[]>(`/dashboardcomponent`, {\r\n    enabled: !!id,\r\n  });\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [selectedComponents, setSelectedComponents] = useState<Module[] | null>(\r\n    []\r\n  );\r\n  const [selectedRowKeys, setSelectedRowKeys] = useState([]);\r\n  const { mutateAsync, isLoading } = useMutation({\r\n    onSuccess: (data) => {\r\n      queryClient.setQueryData(`/dashboard/${id}`, data);\r\n      queryClient.refetchQueries(`/dashboard`);\r\n    },\r\n  });\r\n\r\n  const columns: CustomColumns<Module>[] = [\r\n    {\r\n      dataIndex: \"name\",\r\n      title: \"Name\",\r\n    },\r\n    {\r\n      dataIndex: \"version\",\r\n      title: \"Version\",\r\n    },\r\n    {\r\n      dataIndex: \"actions\",\r\n      render: (_, record) => {\r\n        return dashboard?.dashboardComponents?.some(\r\n          (component) => component?.id === record?.id\r\n        ) ? (\r\n          <Tag icon={<CheckCircleOutlined />} color=\"success\">\r\n            Added\r\n          </Tag>\r\n        ) : (\r\n          <Tag icon={<MinusCircleOutlined />} color=\"processing\">\r\n            Not added\r\n          </Tag>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      dataIndex: 'remove',\r\n      render: (_, record) => {\r\n        return dashboard?.dashboardComponents?.some(\r\n          (component) => component?.id === record?.id\r\n        ) ? (\r\n          <Button\r\n            danger\r\n            icon={<DeleteOutlined />}\r\n            loading={isLoading}\r\n            onClick={() => {\r\n              let comp = dashboard?.dashboardComponents.filter(x => x.id !== record?.id)\r\n              mutateAsync({\r\n                key: `/dashboard/${id}`,\r\n                action: \"update\",\r\n                ...{\r\n                  ...dashboard,\r\n                  dashboardComponents: comp,\r\n                },\r\n              });\r\n            }}\r\n          >\r\n            Remove\r\n          </Button>\r\n        ) : (\r\n          <React.Fragment />\r\n        );\r\n      }\r\n    }\r\n  ];\r\n\r\n  const rowSelection = {\r\n    selectedRowKeys: selectedRowKeys,\r\n    onChange: (selectedRowKeys: React.Key[], selectedRows: Module[]) => {\r\n      setSelectedRowKeys(selectedRowKeys);\r\n      let selectedModules = selectedRows?.map(\r\n        ({ resourceInfo, ...rest }) => rest\r\n      );\r\n      setSelectedComponents(selectedModules);\r\n    },\r\n    getCheckboxProps: (record: Module) => ({\r\n      disabled: dashboard?.dashboardComponents?.some(\r\n        (install) => install?.id === record?.id\r\n      ),\r\n      name: record?.name,\r\n    }),\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Tooltip title=\"Add components\">\r\n        <Button\r\n          icon={<AppstoreAddOutlined />}\r\n          type=\"text\"\r\n          onClick={() => setIsOpen(true)}\r\n        />\r\n      </Tooltip>\r\n      <Drawer\r\n        title=\"Add Components\"\r\n        visible={isOpen}\r\n        closable\r\n        width={1000}\r\n        onClose={() => setIsOpen(false)}\r\n      >\r\n        <React.Fragment>\r\n          <Typography>\r\n            <Typography.Title>About Components</Typography.Title>\r\n            <Typography.Paragraph>\r\n              You can select components that you want to add to this dashboard.\r\n              Components are external PowerShell modules that are hosted in the\r\n              Universal Dashboard Marketplace. If you want to add more\r\n              components to the table below, you can navigate to the marketplace\r\n              page by clicking the Marketplace button\r\n            </Typography.Paragraph>\r\n            <Link to=\"/admin/dashboards/marketplace\">\r\n              <Button type=\"default\" icon={<GiftOutlined />}>\r\n                Marketplace\r\n              </Button>\r\n            </Link>\r\n          </Typography>\r\n          <Table\r\n            title=\"Installed Components\"\r\n            actions={[\r\n              <Button\r\n                type=\"primary\"\r\n                loading={isLoading}\r\n                disabled={\r\n                  components?.length === dashboard?.dashboardComponents?.length\r\n                }\r\n                icon={<PlusCircleOutlined />}\r\n                onClick={() => {\r\n                  let comp = dashboard?.dashboardComponents\r\n                    ? [...dashboard.dashboardComponents, ...selectedComponents]\r\n                    : selectedComponents;\r\n                  mutateAsync({\r\n                    key: `/dashboard/${id}`,\r\n                    action: \"update\",\r\n                    ...{\r\n                      ...dashboard,\r\n                      dashboardComponents: comp,\r\n                    },\r\n                  });\r\n                  setSelectedRowKeys([]);\r\n                }}\r\n              >\r\n                Add\r\n              </Button>,\r\n            ]}\r\n            rowKey={(record: Module) => record?.id}\r\n            columns={columns}\r\n            data={components}\r\n            rowSelection={{ ...rowSelection }}\r\n          />\r\n        </React.Fragment>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Dashboard } from \"../../types\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useQuery } from \"react-query3\";\r\nimport Page, {\r\n  LeftPanel,\r\n  PageContentBase,\r\n  PageHeader,\r\n  RightPanel,\r\n} from \"components/pages/Page\";\r\nimport { CodeEditor, FullEditor } from \"components/ui/Editor/Editor\";\r\nimport ResourceInfo from \"components/ui/ResourceInfo\";\r\nimport DashboardViews from \"./components/DashboardViews\";\r\nimport { Button } from \"antd\";\r\nimport PowerButton from \"./components/PowerButton\";\r\nimport ComponentsDrawer from \"./ComponentsDrawer\";\r\nimport DashboardViewButton from \"./components/DashboardViewButton\";\r\nimport { capitalize, setStatusColor } from \"components/utils/utils\";\r\n\r\nconst DashboardPage = () => {\r\n  const { id } = useParams();\r\n  const { data: dashboard } = useQuery<Dashboard>(`/dashboard/${id}`, {\r\n    enabled: !!id,\r\n  });\r\n\r\n\r\n  return (\r\n    <Page resource={dashboard}>\r\n      <PageHeader>\r\n        <ResourceInfo\r\n          title={capitalize(dashboard?.name)}\r\n          subTitle={`#${dashboard?.id}`}\r\n          tags={setStatusColor(dashboard?.status)}\r\n          extra={\r\n            <Button.Group>\r\n              <ComponentsDrawer />\r\n              <DashboardViewButton dashboard={dashboard} />\r\n              <PowerButton dashboard={dashboard} />\r\n            </Button.Group>\r\n          }\r\n        />\r\n      </PageHeader>\r\n      <PageContentBase>\r\n        <LeftPanel>\r\n          <CodeEditor>\r\n            <FullEditor title=\"Code Editor\" />\r\n          </CodeEditor>\r\n        </LeftPanel>\r\n        <RightPanel>\r\n          <DashboardViews />\r\n        </RightPanel>\r\n      </PageContentBase>\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default DashboardPage;\r\n","import { editor } from \"monaco-editor\";\r\n\r\nconst psuDark: editor.IStandaloneThemeData = {\r\n  base: \"vs-dark\" as editor.BuiltinTheme,\r\n  inherit: true,\r\n  rules: [\r\n    { token: \"custom-error\", foreground: \"d32029\"},\r\n    { token: \"custom-verbose\", foreground: \"177ddc\" },\r\n    { token: \"custom-warning\", foreground: \"d89614\" },\r\n    { token: \"custom-debug\", foreground: \"13a8a8\" },\r\n    \r\n  ],\r\n  colors: {\r\n    \"activityBar.background\": \"#060606\",\r\n    \"activityBar.foreground\": \"#A9A9A9\",\r\n    \"editor.background\": \"#060606\",\r\n    \"editor.foreground\": \"#ffffff4d\",\r\n    \"activityBarBadge.background\": \"#A9A9A9\",\r\n    \"editor.lineHighlightBackground\": \"#141414\",\r\n    \"editor.selectionBackground\": \"#141414\",\r\n  },\r\n};\r\n\r\nconst psuLight: editor.IStandaloneThemeData = {\r\n  base: \"vs\" as editor.BuiltinTheme,\r\n  inherit: true,\r\n  rules: [\r\n    { token: \"custom-error\", foreground: \"d32029\"},\r\n    { token: \"custom-verbose\", foreground: \"177ddc\" },\r\n    { token: \"custom-warning\", foreground: \"d89614\" },\r\n    { token: \"custom-debug\", foreground: \"13a8a8\" },\r\n    \r\n  ],\r\n  colors: {\r\n    \"activityBar.background\": \"#E1ECF9\",\r\n    \"activityBar.foreground\": \"#A9A9A9\",\r\n    \"editor.background\": \"#ffffff\",\r\n    \"editor.foreground\": \"#000000\",\r\n    \"activityBarBadge.background\": \"#A9A9A9\",\r\n    \"editor.lineHighlightBackground\": \"#c2c2c2\",\r\n    \"editor.selectionBackground\": \"#e1ecf8\",\r\n  },\r\n};\r\n\r\nexport { psuDark, psuLight };\r\n","const snippets = [\r\n    {\r\n        range: null,\r\n        label: 'Dashboard: Modal',\r\n        kind: 27,\r\n        documentation: 'Creates a new modal.',\r\n        insertText: 'Show-UDModal -Content {\\n\\tNew-UDTypography \"Hello, World\"\\n}'\r\n    },\r\n    {\r\n        range: null,\r\n        label: 'Dashboard: Chart with Colors',\r\n        kind: 27,\r\n        documentation: 'Creates a chart with colors',\r\n        insertText: `$Data = Get-Process | Sort-Object -Property CPU -Descending | Select-Object -First 10 \r\n$Options = @{\r\n    Type = 'bar'\r\n    Data = $Data\r\n    BackgroundColor = 'Red'\r\n    BorderColor = '#c61d4a'\r\n    HoverBackgroundColor = 'Blue'\r\n    HoverBorderColor = '#451dc6'\r\n    DataProperty = 'CPU'\r\n    LabelProperty = 'ProcessName'\r\n}\r\n\r\nNew-UDChartJS @Options`\r\n    },\r\n    {\r\n        range: null,\r\n        label: 'Dashboard: Form with validation',\r\n        kind: 27,\r\n        documentation: 'Creates a form with validation',\r\n        insertText: `New-UDForm -Content {\r\nNew-UDTextbox -Id 'txtValidateForm'\r\n} -OnValidate {\r\n    $FormContent = $EventData\r\n\r\n    if ($FormContent.txtValidateForm -eq $null -or $FormContent.txtValidateForm -eq '') {\r\n        New-UDFormValidationResult -ValidationError \"txtValidateForm is required\"\r\n    } else {\r\n        New-UDFormValidationResult -Valid\r\n    }\r\n} -OnSubmit {\r\n    Show-UDToast -Message $Body\r\n}`\r\n    },\r\n];\r\n\r\nexport default snippets;\r\n","import React, { Fragment } from \"react\";\r\nimport { Button, Card, message, Spin, Tooltip } from \"antd\";\r\nimport { callAll, toRelativeUrl } from \"components/utils/utils\";\r\nimport queryClient, { useMutation } from \"components/utils/queryClient\";\r\nimport {\r\n  CopyFilled,\r\n  SaveFilled,\r\n  ZoomInOutlined,\r\n  ZoomOutOutlined,\r\n  LoadingOutlined,\r\n} from \"@ant-design/icons\";\r\nimport RoleGuard from \"components/standalone/role-guard\";\r\nimport Editor, {\r\n  useMonaco,\r\n  EditorProps,\r\n  loader,\r\n  Monaco,\r\n} from \"@monaco-editor/react\";\r\nimport { useThemeSwitcher } from \"react-css-theme-switcher\";\r\nimport { psuDark, psuLight } from \"../../editor/themes/EditorThemes\";\r\nimport useAppStore from \"components/context/app/Hooks\";\r\nimport { AccessControlTypes, Accessible } from \"types\";\r\nimport { editor, MarkerSeverity } from \"monaco-editor\";\r\nimport { LeftPanelSizeButton, usePageContext } from \"components/pages/Page\";\r\nimport useClipboard from \"use-clipboard-hook\";\r\nimport { CardProps } from \"antd/es\";\r\nimport axios from \"axios\";\r\nimport snippets from './snippets';\r\n\r\nloader.config({ paths: { vs: toRelativeUrl(\"/admin/vs\") } });\r\nloader.init().then(monaco => {\r\n  monaco.languages.registerCompletionItemProvider(\"powershell\", {\r\n    provideCompletionItems: async (model, options, token) => {\r\n\r\n      return {\r\n        incomplete: false,\r\n        suggestions: snippets\r\n      }\r\n    }\r\n  });\r\n\r\n  monaco.languages.registerDocumentFormattingEditProvider(\"powershell\", {\r\n    displayName: \"PowerShell\",\r\n    provideDocumentFormattingEdits: async (model, options, token) => {\r\n      let { data } = await axios.post(toRelativeUrl(`/api/v1/editor/format`), model.getValue(), {\r\n        headers: {\r\n          'content-type': 'text/plain'\r\n        }\r\n      });\r\n\r\n      return [{\r\n        text: data,\r\n        range: {\r\n          startColumn: 1,\r\n          startLineNumber: 1,\r\n          endLineNumber: model.getLineCount(),\r\n          endColumn: model.getLineMaxColumn(model.getLineCount())\r\n        }\r\n      }];\r\n    }\r\n  })\r\n\r\n  const triggerChars = [\"$\", \"-\", \"\\\\\", \"/\", \":\", \".\"]\r\n\r\n  const getKind = (type: number) => {\r\n    switch (type) {\r\n      case 0: return monaco.languages.CompletionItemKind.Text;\r\n      case 2: return monaco.languages.CompletionItemKind.Method;\r\n      case 3: return monaco.languages.CompletionItemKind.Folder;\r\n      case 4: return monaco.languages.CompletionItemKind.File;\r\n      case 5: return monaco.languages.CompletionItemKind.Property;\r\n      case 6: return monaco.languages.CompletionItemKind.Method;\r\n      case 7: return monaco.languages.CompletionItemKind.Property;\r\n      case 9: return monaco.languages.CompletionItemKind.Property;\r\n      default: return monaco.languages.CompletionItemKind.Text;\r\n    }\r\n  }\r\n\r\n  monaco.languages.registerCompletionItemProvider(\"powershell\", {\r\n    triggerCharacters: triggerChars,\r\n    provideCompletionItems: async (model, position, context) => {\r\n      if (triggerChars.findIndex(x => x === context.triggerCharacter) !== -1) {\r\n        let { data } = await axios.post(toRelativeUrl(`/api/v1/editor/complete`), {\r\n          content: model.getValue(),\r\n          cursorPosition: model.getOffsetAt(position)\r\n        });\r\n\r\n        const suggestions = data?.map(x => {\r\n          if (x.type === 3 || x.type === 4) {\r\n\r\n            return {\r\n              insertText: x.label,\r\n              label: x.label,\r\n              documentation: x.help,\r\n              kind: getKind(x.type),\r\n            }\r\n          }\r\n\r\n          return {\r\n            insertText: x.text,\r\n            label: x.text,\r\n            documentation: x.help,\r\n            kind: getKind(x.type),\r\n          }\r\n        });\r\n\r\n        return {\r\n          incomplete: false,\r\n          suggestions\r\n        }\r\n      }\r\n\r\n      return null;\r\n    }\r\n  });\r\n})\r\n\r\ninterface EditorContextProps {\r\n  isReadOnly: boolean;\r\n  setIsReadOnly: React.Dispatch<React.SetStateAction<boolean>>;\r\n  onSave: (key: any, action: any, resource: any) => Promise<void>;\r\n  monaco: Monaco;\r\n  editor: editor.IStandaloneCodeEditor;\r\n  userData: Accessible;\r\n  handleEditorDidMount: (editor: any, monaco: any, resource: any) => void;\r\n  currentTheme: string;\r\n  onCopy: () => void;\r\n  zoomIn: () => void;\r\n  zoomOut: () => void;\r\n  isSaving: boolean;\r\n}\r\n\r\nconst EditorContext = React.createContext<EditorContextProps>(null);\r\n\r\nfunction CodeEditor({ children, refetch = () => { }, readonly = false }) {\r\n  const [isReadOnly, setIsReadOnly] = React.useState(readonly);\r\n  const [isSaving, setIsSaving] = React.useState(false);\r\n  const { mutateAsync } = useMutation<any>();\r\n  const { currentTheme } = useThemeSwitcher();\r\n  const { userData } = useAppStore();\r\n  const monaco = useMonaco();\r\n\r\n  const { copy } = useClipboard({\r\n    onSuccess: (text) => message.success(`Copied.`),\r\n  });\r\n\r\n  const editorRef = React.useRef<editor.IStandaloneCodeEditor>(null);\r\n\r\n\r\n  const onSave = React.useCallback(\r\n    async (key: string, action: any, resource: any) => {\r\n\r\n      setIsSaving(true);\r\n      setIsReadOnly(true);\r\n\r\n      if (key === \"/script\") {\r\n        resource[\"content\"] = editorRef?.current?.getValue();\r\n      }\r\n\r\n      if (key === \"/endpoint\") {\r\n        key = resource?.resourceInfo?.self;\r\n        resource[\"scriptBlock\"] = editorRef?.current?.getValue();\r\n      }\r\n\r\n      if (key === \"/dashboard\") {\r\n        key = resource?.resourceInfo?.self;\r\n        resource[\"content\"] = editorRef?.current?.getValue();\r\n      }\r\n\r\n      if (key.startsWith(\"/role\")) {\r\n        key = resource?.resourceInfo?.self;\r\n        resource[\"policy\"] = editorRef?.current?.getValue();\r\n      }\r\n\r\n      if (key === \"/settings\") {\r\n        key = \"/settings/authentication/1\";\r\n        resource[\"settings\"] = editorRef?.current?.getValue();\r\n      }\r\n\r\n      if (key.startsWith('/module')) {\r\n        key = resource?.resourceInfo?.self;\r\n        resource[\"content\"] = editorRef?.current?.getValue();\r\n      }\r\n\r\n      if (resource?.resourceInfo?.schemaName === \"configuration\") {\r\n        resource[\"content\"] = editorRef?.current?.getValue({\r\n          preserveBOM: true,\r\n          lineEnding: \"\\r\\n\",\r\n        });\r\n      }\r\n\r\n      await mutateAsync(\r\n        { key, action, resource },\r\n        {\r\n          onError: (error) => {\r\n            setIsSaving(false);\r\n            setIsReadOnly(false);\r\n            message.error(error.message);\r\n          },\r\n          onSuccess: (data, variables) => {\r\n            setIsSaving(false);\r\n            setIsReadOnly(false);\r\n            message.success(\"Changes saved!\");\r\n            queryClient.refetchQueries(key);\r\n            refetch()\r\n          },\r\n        }\r\n      );\r\n    },\r\n    [mutateAsync, refetch]\r\n  );\r\n\r\n\r\n  const handleEditorDidMount = React.useCallback(\r\n    (editor, monaco, resource) => {\r\n      editorRef.current = editor;\r\n\r\n      monaco.languages.register({ id: \"psulog\" });\r\n      monaco.languages.setMonarchTokensProvider(\"psulog\", {\r\n        tokenizer: {\r\n          root: [\r\n            [/\\[error.*/, \"custom-error\"],\r\n            [/\\[verbose.*/, \"custom-verbose\"],\r\n            [/\\[warning.*/, \"custom-warning\"],\r\n            [/\\[debug.*/, \"custom-debug\"],\r\n            [/\\[information.*/, \"custom-info\"],\r\n          ],\r\n        },\r\n      });\r\n\r\n      const debounce = (callback, delay) => {\r\n        let timer;\r\n        return (...args) => {\r\n          clearTimeout(timer);\r\n          timer = setTimeout(() => callback(...args), delay);\r\n        }\r\n      }\r\n\r\n      const model = editor.getModel();\r\n      if (!readonly) {\r\n        model.onDidChangeContent(() => {\r\n          var versionId = model.getVersionId();\r\n          debounce(async () => {\r\n            var newVersionId = model.getVersionId();\r\n            if (versionId !== newVersionId) return;\r\n\r\n            let { data } = await axios.post(toRelativeUrl(`/api/v1/editor/parse`), model.getValue(), {\r\n              headers: {\r\n                'content-type': 'text/plain'\r\n              }\r\n            });\r\n\r\n            const markerData = data.map(x => {\r\n              return {\r\n                startColumn: x.token.startColumn,\r\n                endColumn: x.token.endColumn,\r\n                startLineNumber: x.token.startLine,\r\n                endLineNumber: x.token.endLine,\r\n                severity: MarkerSeverity.Error,\r\n                message: x.message\r\n              }\r\n            });\r\n\r\n            monaco.editor.setModelMarkers(model, 'powershell', markerData);\r\n          }, 300)();\r\n\r\n        });\r\n      }\r\n\r\n      if (resource) {\r\n        editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KEY_S, () => onSave(resource?.resourceInfo?.parent, \"update\", resource));\r\n      }\r\n\r\n      editor.addAction({\r\n        // An unique identifier of the contributed action.\r\n        id: \"refresh\",\r\n\r\n        // A label of the action that will be presented to the user.\r\n        label: \"Refresh\",\r\n\r\n        // An optional array of keybindings for the action.\r\n        keybindings: [monaco.KeyCode.F5],\r\n\r\n        // A precondition for this action.\r\n        precondition: null,\r\n\r\n        // A rule to evaluate on top of the precondition in order to dispatch the keybindings.\r\n        keybindingContext: null,\r\n\r\n        contextMenuGroupId: \"navigation\",\r\n\r\n        contextMenuOrder: 1.5,\r\n        run: function (ed) {\r\n          refetch();\r\n          return null;\r\n        },\r\n      });\r\n      editor.addAction({\r\n        // An unique identifier of the contributed action.\r\n        id: \"format\",\r\n\r\n        // A label of the action that will be presented to the user.\r\n        label: \"Format\",\r\n\r\n        // An optional array of keybindings for the action.\r\n        keybindings: [monaco.KeyCode.F8],\r\n\r\n        // A precondition for this action.\r\n        precondition: null,\r\n\r\n        // A rule to evaluate on top of the precondition in order to dispatch the keybindings.\r\n        keybindingContext: null,\r\n\r\n        contextMenuGroupId: \"navigation\",\r\n\r\n        contextMenuOrder: 1.5,\r\n\r\n        run: () => {\r\n          editor.trigger(\r\n            \"anyString\",\r\n            \"editor.action.formatDocument\",\r\n            null\r\n          );\r\n          // editorRef.current.getAction('editor.action.formatDocument').run();\r\n          return null;\r\n        },\r\n      });\r\n    },\r\n    [refetch, onSave, readonly]\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (monaco) {\r\n      monaco.editor.defineTheme(\"psu-dark\", psuDark);\r\n      monaco.editor.defineTheme(\"psu-light\", psuLight);\r\n      monaco.editor.setTheme(\r\n        currentTheme === \"dark\" ? \"psu-dark\" : \"psu-light\"\r\n      );\r\n    }\r\n  }, [currentTheme, monaco]);\r\n\r\n  const onCopy = React.useCallback(() => copy(editorRef?.current?.getValue()), [\r\n    copy,\r\n  ]);\r\n  const zoomIn = () =>\r\n    editorRef?.current?.trigger(\"keyboard\", \"editor.action.fontZoomIn\", {});\r\n  const zoomOut = () =>\r\n    editorRef?.current?.trigger(\"keyboard\", \"editor.action.fontZoomOut\", {});\r\n\r\n  const value = React.useMemo(\r\n    () => ({\r\n      isReadOnly,\r\n      setIsReadOnly,\r\n      onSave,\r\n      monaco,\r\n      editor: editorRef?.current,\r\n      userData,\r\n      handleEditorDidMount,\r\n      currentTheme,\r\n      onCopy,\r\n      zoomIn,\r\n      zoomOut,\r\n      isSaving\r\n    }),\r\n    [\r\n      currentTheme,\r\n      handleEditorDidMount,\r\n      isReadOnly,\r\n      monaco,\r\n      onCopy,\r\n      onSave,\r\n      userData,\r\n      isSaving\r\n    ]\r\n  );\r\n\r\n  return (\r\n    <EditorContext.Provider value={value}>{children}</EditorContext.Provider>\r\n  );\r\n}\r\n\r\nfunction SaveButton({ children: child, resource }) {\r\n  return (\r\n    <RoleGuard requiredRoles={[\"Administrator\", \"Operator\"]} requiredAccessControls={AccessControlTypes.Edit} accessControls={resource?.accessControls} allowedWithOneWayGitSync={false}>\r\n      <Tooltip title=\"Save\">\r\n        {React.cloneElement(child, {\r\n          type: child?.props?.type || \"text\",\r\n          icon: child?.props?.icon || <SaveFilled />,\r\n          onClick: callAll(child?.props?.onClick),\r\n        })}\r\n      </Tooltip>\r\n    </RoleGuard>\r\n  );\r\n}\r\n\r\nfunction BaseEditor({ ...props }: EditorProps) {\r\n  const { currentTheme, handleEditorDidMount } = React.useContext(\r\n    EditorContext\r\n  );\r\n  return (\r\n    <Editor\r\n      theme={currentTheme === \"dark\" ? \"psu-dark\" : \"psu-light\"}\r\n      language=\"powershell\"\r\n      loading={<Spin tip=\"Loading content...\" />}\r\n      height=\"calc((100vh - 256px) - 48px)\"\r\n      onMount={(editor, monaco) => handleEditorDidMount(editor, monaco, null)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\ntype FullEditorProps = {\r\n  title?: string;\r\n  showSave?: boolean;\r\n  refetch?: () => void;\r\n  options?: EditorProps[\"options\"];\r\n  actions?: CardProps[\"extra\"]\r\n  hideToolbar?: boolean;\r\n} & EditorProps;\r\n\r\nfunction FullEditor({\r\n  title,\r\n  options,\r\n  showSave = true,\r\n  actions,\r\n  hideToolbar,\r\n  ...props\r\n}: FullEditorProps) {\r\n  const {\r\n    handleEditorDidMount,\r\n    currentTheme,\r\n    onSave,\r\n    onCopy,\r\n    zoomIn,\r\n    zoomOut,\r\n    isSaving\r\n  } = React.useContext(EditorContext);\r\n  const context = usePageContext();\r\n  const resource = context?.resource;\r\n\r\n\r\n  return (\r\n    <Card\r\n      bordered={false}\r\n      bodyStyle={{ padding: 0 }}\r\n      title={title}\r\n      extra={\r\n        !hideToolbar && <Fragment>\r\n          {actions}\r\n          <Tooltip title=\"Zoom in\">\r\n            <Button\r\n              type=\"text\"\r\n              icon={<ZoomInOutlined />}\r\n              onClick={() => zoomIn()}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"Zoom out\">\r\n            <Button\r\n              type=\"text\"\r\n              icon={<ZoomOutOutlined />}\r\n              onClick={() => zoomOut()}\r\n            />\r\n          </Tooltip>\r\n          {showSave && (\r\n            <SaveButton resource={resource}>\r\n              <Button\r\n                icon={isSaving ? <LoadingOutlined /> : null}\r\n                onClick={callAll(() =>\r\n                  onSave(resource?.resourceInfo?.parent, \"update\", resource)\r\n                )}\r\n              />\r\n            </SaveButton>\r\n          )}\r\n          <Tooltip title=\"Copy\">\r\n            <Button\r\n              type=\"text\"\r\n              icon={<CopyFilled />}\r\n              onClick={() => onCopy()}\r\n            />\r\n          </Tooltip>\r\n          <LeftPanelSizeButton>\r\n            <Button />\r\n          </LeftPanelSizeButton>\r\n        </Fragment >\r\n      }\r\n    >\r\n      <BaseEditor\r\n        language=\"powershell\"\r\n        //@ts-ignore\r\n        height=\"calc((100vh - 256px) - 48px)\"\r\n        value={resource?.content || resource?.scriptBlock || resource?.settings || props?.value}\r\n        onMount={(editor, monaco) => handleEditorDidMount(editor, monaco, resource)}\r\n        theme={currentTheme === \"dark\" ? \"psu-dark\" : \"psu-light\"}\r\n        loading={props?.loading || <Spin tip=\"Loading content...\" />}\r\n        {...props}\r\n        options={{\r\n          wordWrap: \"on\",\r\n          wrappingIndent: \"same\",\r\n          minimap: {\r\n            enabled: false,\r\n          },\r\n          lineHeight: 20,\r\n          lineNumbersMinChars: 5,\r\n          scrollBeyondLastLine: false,\r\n          hideCursorInOverviewRuler: true,\r\n          overviewRulerLanes: 0,\r\n          overviewRulerBorder: false,\r\n          ...options,\r\n        }}\r\n      />\r\n    </Card >\r\n  );\r\n}\r\n\r\nconst useEditorContext = () => React.useContext(EditorContext);\r\n\r\nexport { CodeEditor, BaseEditor, FullEditor, SaveButton, useEditorContext };\r\n"],"sourceRoot":""}
(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[55],{1596:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return p}));var o=t(12),r=(t(0),t(37)),i=t(48),a=t(415),u=t(996),l=t(690),d=t(933),c=t(44),s=t(3);function v(e){var n=e.isVisible,t=e.setIsVisible;return Object(s.jsx)(d.default,{size:"small",style:{backgroundColor:n?c.presetPrimaryColors.blue:c.presetPrimaryColors.red},checkedChildren:"Show Time",unCheckedChildren:"Hide Time",checked:n,onChange:t})}var g={readOnly:!0,wordWrap:"on",wrappingIndent:"same",minimap:{enabled:!1},lineHeight:20,lineNumbersMinChars:5,scrollBeyondLastLine:!1,scrollbar:{horizontal:"hidden",vertical:"hidden",useShadows:!1},hideCursorInOverviewRuler:!0,overviewRulerLanes:0,overviewRulerBorder:!1};function p(e){var n=e.showTimestamp,t=e.setShowTimestamp,d=e.refetchInterval,c=e.job,p=e.hideToolbar,b=Object(a.a)("/job/".concat(null===c||void 0===c?void 0:c.id,"/log"),{refetchOnWindowFocus:!1,keepPreviousData:!0,refetchInterval:d}),m=b.data,f=b.isLoading,h=b.refetch;function j(){if(f)return null;try{var e;return null===(e=JSON.parse(m.log))||void 0===e?void 0:e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{JobId:null===m||void 0===m?void 0:m.id})}))}catch(n){}}var C=j(),O="";return O=(null===c||void 0===c?void 0:c.status)!==i.i.Completed&&(null===c||void 0===c?void 0:c.status)!==i.i.Failed||null!=C||f?n?Object(r.i)(j()):Object(r.j)(j()):"# This job produced no output",Object(s.jsx)(u.b,{refetch:h,children:Object(s.jsx)(u.c,{title:"Output",language:"psulog",hideToolbar:p,showSave:!1,actions:Object(s.jsx)(v,{isVisible:n,setIsVisible:function(){return t()}}),loading:Object(s.jsx)(l.a,{active:!0,loading:f,paragraph:{rows:5,width:[60,60,40,80,120]}}),options:Object(o.a)({},g),value:O})})}},996:function(e,n,t){"use strict";t.d(n,"b",(function(){return N})),t.d(n,"a",(function(){return K})),t.d(n,"c",(function(){return U}));var o=t(74),r=t(12),i=t(27),a=t(49),u=t.n(a),l=t(84),d=t(0),c=t.n(d),s=t(450),v=t(92),g=t(280),p=t(961),b=t(70),m=t(37),f=t(22),h=t(443),j=t(360),C=t(361),O=t(106),x=t(437),k=t(99),y=t(1038),w=t(128),I={base:"vs-dark",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#060606","activityBar.foreground":"#A9A9A9","editor.background":"#060606","editor.foreground":"#ffffff4d","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#141414","editor.selectionBackground":"#141414"}},T={base:"vs",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#E1ECF9","activityBar.foreground":"#A9A9A9","editor.background":"#ffffff","editor.foreground":"#000000","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#c2c2c2","editor.selectionBackground":"#e1ecf8"}},D=t(111),S=t(48),V=t(1043),B=t(454),M=t(225),F=t(117),A=t.n(F),L=[{range:null,label:"Dashboard: Modal",kind:27,documentation:"Creates a new modal.",insertText:'Show-UDModal -Content {\n\tNew-UDTypography "Hello, World"\n}'},{range:null,label:"Dashboard: Chart with Colors",kind:27,documentation:"Creates a chart with colors",insertText:"$Data = Get-Process | Sort-Object -Property CPU -Descending | Select-Object -First 10 \n$Options = @{\n    Type = 'bar'\n    Data = $Data\n    BackgroundColor = 'Red'\n    BorderColor = '#c61d4a'\n    HoverBackgroundColor = 'Blue'\n    HoverBorderColor = '#451dc6'\n    DataProperty = 'CPU'\n    LabelProperty = 'ProcessName'\n}\n\nNew-UDChartJS @Options"},{range:null,label:"Dashboard: Form with validation",kind:27,documentation:"Creates a form with validation",insertText:"New-UDForm -Content {\nNew-UDTextbox -Id 'txtValidateForm'\n} -OnValidate {\n    $FormContent = $EventData\n\n    if ($FormContent.txtValidateForm -eq $null -or $FormContent.txtValidateForm -eq '') {\n        New-UDFormValidationResult -ValidationError \"txtValidateForm is required\"\n    } else {\n        New-UDFormValidationResult -Valid\n    }\n} -OnSubmit {\n    Show-UDToast -Message $Body\n}"}],P=t(3);y.c.config({paths:{vs:Object(m.s)("/admin/vs")}}),y.c.init().then((function(e){e.languages.registerCompletionItemProvider("powershell",{provideCompletionItems:function(){var e=Object(l.a)(u.a.mark((function e(n,t,o){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{incomplete:!1,suggestions:L});case 1:case"end":return e.stop()}}),e)})));return function(n,t,o){return e.apply(this,arguments)}}()}),e.languages.registerDocumentFormattingEditProvider("powershell",{displayName:"PowerShell",provideDocumentFormattingEdits:function(){var e=Object(l.a)(u.a.mark((function e(n,t,o){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post(Object(m.s)("/api/v1/editor/format"),n.getValue(),{headers:{"content-type":"text/plain"}});case 2:return r=e.sent,i=r.data,e.abrupt("return",[{text:i,range:{startColumn:1,startLineNumber:1,endLineNumber:n.getLineCount(),endColumn:n.getLineMaxColumn(n.getLineCount())}}]);case 5:case"end":return e.stop()}}),e)})));return function(n,t,o){return e.apply(this,arguments)}}()});var n=["$","-","\\","/",":","."],t=function(n){switch(n){case 0:return e.languages.CompletionItemKind.Text;case 2:return e.languages.CompletionItemKind.Method;case 3:return e.languages.CompletionItemKind.Folder;case 4:return e.languages.CompletionItemKind.File;case 5:return e.languages.CompletionItemKind.Property;case 6:return e.languages.CompletionItemKind.Method;case 7:case 9:return e.languages.CompletionItemKind.Property;default:return e.languages.CompletionItemKind.Text}};e.languages.registerCompletionItemProvider("powershell",{triggerCharacters:n,provideCompletionItems:function(){var e=Object(l.a)(u.a.mark((function e(o,r,i){var a,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===n.findIndex((function(e){return e===i.triggerCharacter}))){e.next=7;break}return e.next=3,A.a.post(Object(m.s)("/api/v1/editor/complete"),{content:o.getValue(),cursorPosition:o.getOffsetAt(r)});case 3:return a=e.sent,l=a.data,d=null===l||void 0===l?void 0:l.map((function(e){return 3===e.type||4===e.type?{insertText:e.label,label:e.label,documentation:e.help,kind:t(e.type)}:{insertText:e.text,label:e.text,documentation:e.help,kind:t(e.type)}})),e.abrupt("return",{incomplete:!1,suggestions:d});case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(n,t,o){return e.apply(this,arguments)}}()})}));var E=c.a.createContext(null);function N(e){var n=e.children,t=e.refetch,o=void 0===t?function(){}:t,r=e.readonly,a=void 0!==r&&r,d=c.a.useState(a),v=Object(i.a)(d,2),g=v[0],p=v[1],b=c.a.useState(!1),h=Object(i.a)(b,2),j=h[0],C=h[1],O=Object(f.b)().mutateAsync,x=Object(w.b)().currentTheme,k=Object(D.a)().userData,S=Object(y.d)(),B=Object(M.a)({onSuccess:function(e){return s.b.success("Copied.")}}).copy,F=c.a.useRef(null),L=c.a.useCallback(function(){var e=Object(l.a)(u.a.mark((function e(n,t,r){var i,a,l,d,c,v,g,b,m,h,j,x;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),p(!0),"/script"===n&&(r.content=null===F||void 0===F||null===(a=F.current)||void 0===a?void 0:a.getValue()),"/endpoint"===n&&(n=null===r||void 0===r||null===(l=r.resourceInfo)||void 0===l?void 0:l.self,r.scriptBlock=null===F||void 0===F||null===(d=F.current)||void 0===d?void 0:d.getValue()),"/dashboard"===n&&(n=null===r||void 0===r||null===(c=r.resourceInfo)||void 0===c?void 0:c.self,r.content=null===F||void 0===F||null===(v=F.current)||void 0===v?void 0:v.getValue()),n.startsWith("/role")&&(n=null===r||void 0===r||null===(g=r.resourceInfo)||void 0===g?void 0:g.self,r.policy=null===F||void 0===F||null===(b=F.current)||void 0===b?void 0:b.getValue()),"/settings"===n&&(n="/settings/authentication/1",r.settings=null===F||void 0===F||null===(m=F.current)||void 0===m?void 0:m.getValue()),n.startsWith("/module")&&(n=null===r||void 0===r||null===(h=r.resourceInfo)||void 0===h?void 0:h.self,r.content=null===F||void 0===F||null===(j=F.current)||void 0===j?void 0:j.getValue()),"configuration"===(null===r||void 0===r||null===(i=r.resourceInfo)||void 0===i?void 0:i.schemaName)&&(r.content=null===F||void 0===F||null===(x=F.current)||void 0===x?void 0:x.getValue({preserveBOM:!0,lineEnding:"\r\n"})),e.next=11,O({key:n,action:t,resource:r},{onError:function(e){C(!1),p(!1),s.b.error(e.message)},onSuccess:function(e,t){C(!1),p(!1),s.b.success("Changes saved!"),f.a.refetchQueries(n),o()}});case 11:case"end":return e.stop()}}),e)})));return function(n,t,o){return e.apply(this,arguments)}}(),[O,o]),N=c.a.useCallback((function(e,n,t){F.current=e,n.languages.register({id:"psulog"}),n.languages.setMonarchTokensProvider("psulog",{tokenizer:{root:[[/\[error.*/,"custom-error"],[/\[verbose.*/,"custom-verbose"],[/\[warning.*/,"custom-warning"],[/\[debug.*/,"custom-debug"],[/\[information.*/,"custom-info"]]}});var r=e.getModel();a||r.onDidChangeContent((function(){var e=r.getVersionId();!function(e,n){var t;return function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){return e.apply(void 0,r)}),n)}}(Object(l.a)(u.a.mark((function t(){var o,i,a,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.getVersionId(),e===o){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,A.a.post(Object(m.s)("/api/v1/editor/parse"),r.getValue(),{headers:{"content-type":"text/plain"}});case 5:i=t.sent,a=i.data,l=a.map((function(e){return{startColumn:e.token.startColumn,endColumn:e.token.endColumn,startLineNumber:e.token.startLine,endLineNumber:e.token.endLine,severity:V.a.Error,message:e.message}})),n.editor.setModelMarkers(r,"powershell",l);case 9:case"end":return t.stop()}}),t)}))),300)()})),t&&e.addCommand(n.KeyMod.CtrlCmd|n.KeyCode.KEY_S,(function(){var e;return L(null===t||void 0===t||null===(e=t.resourceInfo)||void 0===e?void 0:e.parent,"update",t)})),e.addAction({id:"refresh",label:"Refresh",keybindings:[n.KeyCode.F5],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){return o(),null}}),e.addAction({id:"format",label:"Format",keybindings:[n.KeyCode.F8],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(){return e.trigger("anyString","editor.action.formatDocument",null),null}})}),[o,L,a]);c.a.useEffect((function(){S&&(S.editor.defineTheme("psu-dark",I),S.editor.defineTheme("psu-light",T),S.editor.setTheme("dark"===x?"psu-dark":"psu-light"))}),[x,S]);var R=c.a.useCallback((function(){var e;return B(null===F||void 0===F||null===(e=F.current)||void 0===e?void 0:e.getValue())}),[B]),K=function(){var e;return null===F||void 0===F||null===(e=F.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomIn",{})},U=function(){var e;return null===F||void 0===F||null===(e=F.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomOut",{})},$=c.a.useMemo((function(){return{isReadOnly:g,setIsReadOnly:p,onSave:L,monaco:S,editor:null===F||void 0===F?void 0:F.current,userData:k,handleEditorDidMount:N,currentTheme:x,onCopy:R,zoomIn:K,zoomOut:U,isSaving:j}}),[x,N,g,S,R,L,k,j]);return Object(P.jsx)(E.Provider,{value:$,children:n})}function R(e){var n,t,o,r=e.children,i=e.resource;return Object(P.jsx)(k.a,{requiredRoles:["Administrator","Operator"],requiredAccessControls:S.b.Edit,accessControls:null===i||void 0===i?void 0:i.accessControls,allowedWithOneWayGitSync:!1,children:Object(P.jsx)(v.a,{title:"Save",children:c.a.cloneElement(r,{type:(null===r||void 0===r||null===(n=r.props)||void 0===n?void 0:n.type)||"text",icon:(null===r||void 0===r||null===(t=r.props)||void 0===t?void 0:t.icon)||Object(P.jsx)(h.a,{}),onClick:Object(m.a)(null===r||void 0===r||null===(o=r.props)||void 0===o?void 0:o.onClick)})})})}function K(e){var n=Object.assign({},e),t=c.a.useContext(E),o=t.currentTheme,i=t.handleEditorDidMount;return Object(P.jsx)(y.b,Object(r.a)({theme:"dark"===o?"psu-dark":"psu-light",language:"powershell",loading:Object(P.jsx)(g.a,{tip:"Loading content..."}),height:"calc((100vh - 256px) - 48px)",onMount:function(e,n){return i(e,n,null)}},n))}function U(e){var n=e.title,t=e.options,i=e.showSave,a=void 0===i||i,u=e.actions,l=e.hideToolbar,s=Object(o.a)(e,["title","options","showSave","actions","hideToolbar"]),f=c.a.useContext(E),h=f.handleEditorDidMount,k=f.currentTheme,y=f.onSave,w=f.onCopy,I=f.zoomIn,T=f.zoomOut,D=f.isSaving,S=Object(B.j)(),V=null===S||void 0===S?void 0:S.resource;return Object(P.jsx)(p.a,{bordered:!1,bodyStyle:{padding:0},title:n,extra:!l&&Object(P.jsxs)(d.Fragment,{children:[u,Object(P.jsx)(v.a,{title:"Zoom in",children:Object(P.jsx)(b.a,{type:"text",icon:Object(P.jsx)(j.a,{}),onClick:function(){return I()}})}),Object(P.jsx)(v.a,{title:"Zoom out",children:Object(P.jsx)(b.a,{type:"text",icon:Object(P.jsx)(C.a,{}),onClick:function(){return T()}})}),a&&Object(P.jsx)(R,{resource:V,children:Object(P.jsx)(b.a,{icon:D?Object(P.jsx)(O.a,{}):null,onClick:Object(m.a)((function(){var e;return y(null===V||void 0===V||null===(e=V.resourceInfo)||void 0===e?void 0:e.parent,"update",V)}))})}),Object(P.jsx)(v.a,{title:"Copy",children:Object(P.jsx)(b.a,{type:"text",icon:Object(P.jsx)(x.a,{}),onClick:function(){return w()}})}),Object(P.jsx)(B.b,{children:Object(P.jsx)(b.a,{})})]}),children:Object(P.jsx)(K,Object(r.a)(Object(r.a)({language:"powershell",height:"calc((100vh - 256px) - 48px)",value:(null===V||void 0===V?void 0:V.content)||(null===V||void 0===V?void 0:V.scriptBlock)||(null===V||void 0===V?void 0:V.settings)||(null===s||void 0===s?void 0:s.value),onMount:function(e,n){return h(e,n,V)},theme:"dark"===k?"psu-dark":"psu-light",loading:(null===s||void 0===s?void 0:s.loading)||Object(P.jsx)(g.a,{tip:"Loading content..."})},s),{},{options:Object(r.a)({wordWrap:"on",wrappingIndent:"same",minimap:{enabled:!1},lineHeight:20,lineNumbersMinChars:5,scrollBeyondLastLine:!1,hideCursorInOverviewRuler:!0,overviewRulerLanes:0,overviewRulerBorder:!1},t)}))})}}}]);
//# sourceMappingURL=55.0cff009e.chunk.js.map
{"version":3,"sources":["components/api/ratelimits.tsx"],"names":["Table","React","lazy","EditModal","DeleteButton","EditorButton","NotLicensed","RateLimitModal","RateLimitSettingsModal","RateLimits","isLicensed","licensed","useAppStore","Feature","Api","useQuery","enabled","ratelimits","data","isLoading","refetch","columns","key","title","dataIndex","width","render","text","record","allowedWithOneWayGitSync","to","id","resource","subTitle","actions","loading","queryFn"],"mappings":"8JAAA,+HAOMA,EAAQC,IAAMC,MAAK,kBAAM,4CACzBC,EAAYF,IAAMC,MAAK,kBAAM,iCAC7BE,EAAeH,IAAMC,MAAK,kBAAM,4CAChCG,EAAeJ,IAAMC,MAAK,kBAAM,kCAChCI,EAAcL,IAAMC,MAAK,kBAAM,iCAC/BK,EAAiBN,IAAMC,MAAK,kBAAM,mCAClCM,EAAyBP,IAAMC,MACnC,kBAAM,mCAGO,SAASO,IAAc,IAE9BC,GAAaC,EADEC,cAAbD,UACoBE,IAAQC,KAFD,EAIcC,YAC/C,aACA,CACEC,SAAS,IAHCC,EAJqB,EAI3BC,KAAkBC,EAJS,EAITA,UAAWC,EAJF,EAIEA,QAO/BC,EAAsC,CAC1C,CACEC,IAAK,WACLC,MAAO,WACPC,UAAW,YAEb,CACEF,IAAK,QACLC,MAAO,QACPC,UAAW,SAEb,CACEF,IAAK,SACLC,MAAO,SACPC,UAAW,UAEb,CACEC,MAAO,cACPD,UAAW,UACXE,OAAQ,SAACC,EAAMC,GACb,OACE,eAAC,IAAD,WACE,cAAC,IAAD,UACE,cAACzB,EAAD,CAAWyB,OAAQA,EAAQC,0BAA0B,MAEvD,cAACxB,EAAD,CAAcyB,GAAE,iBAAKF,QAAL,IAAKA,OAAL,EAAKA,EAAQG,IAAMF,0BAA0B,IAC7D,cAACzB,EAAD,CAAc4B,SAAUJ,EAAQC,0BAA0B,UAOpE,OAAOnB,EACL,cAAC,IAAD,CAAYa,MAAM,cAAcU,SAAS,oDAAzC,SACE,cAACjC,EAAD,CACEuB,MAAM,cACNW,QAAS,CACP,cAAC,IAAD,UACE,cAAC3B,EAAD,MAEF,cAAC,IAAD,UACE,cAACC,EAAD,OAGJa,QAASA,EACTc,QAAShB,EACTD,KAAMD,EACNmB,QAAShB,MAKb,cAACd,EAAD,CAAaiB,MAAM","file":"static/js/64.69227e74.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { RateLimit, Feature, CustomColumns } from \"../../types\";\r\nimport { useQuery } from \"react-query3\";\r\nimport useAppStore from \"components/context/app/Hooks\";\r\nimport { Modal } from \"components/ui/Modal\";\r\nimport { PageHeader, Space } from \"antd\";\r\n\r\nconst Table = React.lazy(() => import(\"components/ui/Table\"));\r\nconst EditModal = React.lazy(() => import(\"components/ui/EditModal\"));\r\nconst DeleteButton = React.lazy(() => import(\"components/ui/DeleteButton\"));\r\nconst EditorButton = React.lazy(() => import(\"components/ui/EditorButton\"));\r\nconst NotLicensed = React.lazy(() => import(\"../pages/notLicensed\"));\r\nconst RateLimitModal = React.lazy(() => import(\"./RateLimitModal\"));\r\nconst RateLimitSettingsModal = React.lazy(\r\n  () => import(\"./RateLimitSettingsModal\")\r\n);\r\n\r\nexport default function RateLimits() {\r\n  const { licensed } = useAppStore();\r\n  const isLicensed = licensed(Feature.Api);\r\n\r\n  const { data: ratelimits, isLoading, refetch } = useQuery<RateLimit[]>(\r\n    \"/ratelimit\",\r\n    {\r\n      enabled: false,\r\n    }\r\n  );\r\n\r\n  const columns: CustomColumns<RateLimit>[] = [\r\n    {\r\n      key: \"endpoint\",\r\n      title: \"Endpoint\",\r\n      dataIndex: \"endpoint\",\r\n    },\r\n    {\r\n      key: \"limit\",\r\n      title: \"Limit\",\r\n      dataIndex: \"limit\",\r\n    },\r\n    {\r\n      key: \"period\",\r\n      title: \"Period\",\r\n      dataIndex: \"period\",\r\n    },\r\n    {\r\n      width: \"fit-content\",\r\n      dataIndex: \"actions\",\r\n      render: (text, record) => {\r\n        return (\r\n          <Space>\r\n            <Modal>\r\n              <EditModal record={record} allowedWithOneWayGitSync={false} />\r\n            </Modal>\r\n            <EditorButton to={`${record?.id}`} allowedWithOneWayGitSync={false} />\r\n            <DeleteButton resource={record} allowedWithOneWayGitSync={false} />\r\n          </Space>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  return isLicensed ? (\r\n    <PageHeader title=\"Rate Limits\" subTitle=\"Rate limits for the PowerShell Universal Web API.\">\r\n      <Table\r\n        title=\"Rate Limits\"\r\n        actions={[\r\n          <Modal>\r\n            <RateLimitModal />\r\n          </Modal>,\r\n          <Modal>\r\n            <RateLimitSettingsModal />\r\n          </Modal>,\r\n        ]}\r\n        columns={columns}\r\n        loading={isLoading}\r\n        data={ratelimits}\r\n        queryFn={refetch}\r\n      />\r\n    </PageHeader>\r\n\r\n  ) : (\r\n    <NotLicensed title=\"Rate limits are only available for licensed instances.\" />\r\n  );\r\n}\r\n"],"sourceRoot":""}
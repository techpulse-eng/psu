(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[60],{1399:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return b}));t(698);var r=t(0),o=t.n(r),i=t(43),a=t(415),u=t(996),l=t(454),c=t(127),d=t(37),s=t(3),v=o.a.lazy((function(){return t.e(122).then(t.bind(null,1032))})),g=o.a.lazy((function(){return t.e(102).then(t.bind(null,1425))})),p=o.a.lazy((function(){return t.e(28).then(t.bind(null,1175))}));function b(){var e=Object(i.i)()["*"],n=Object(a.a)("/script/".concat(e),{enabled:!!e,refetchOnWindowFocus:!1}),t=n.data,r=n.refetch;return Object(s.jsxs)(l.c,{resource:t,children:[Object(s.jsx)(l.f,{children:Object(s.jsx)(v,{title:Object(d.b)(null===t||void 0===t?void 0:t.name),subTitle:"#".concat(null===t||void 0===t?void 0:t.id),extra:[Object(s.jsx)(c.a,{children:!(null===t||void 0===t?void 0:t.disableManualInvocation)&&Object(s.jsx)(p,{script:t,children:"Run"})})]})}),Object(s.jsxs)(l.e,{children:[Object(s.jsx)(l.a,{children:Object(s.jsx)(u.b,{refetch:function(){return r()},children:Object(s.jsx)(u.c,{title:"Code Editor"})})}),Object(s.jsx)(l.g,{children:Object(s.jsx)(g,{})})]})]})}},996:function(e,n,t){"use strict";t.d(n,"b",(function(){return N})),t.d(n,"a",(function(){return R})),t.d(n,"c",(function(){return U}));var r=t(74),o=t(12),i=t(27),a=t(49),u=t.n(a),l=t(84),c=t(0),d=t.n(c),s=t(450),v=t(92),g=t(280),p=t(961),b=t(70),f=t(37),m=t(22),h=t(443),j=t(360),x=t(361),O=t(106),C=t(437),k=t(99),y=t(1038),w=t(128),I={base:"vs-dark",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#060606","activityBar.foreground":"#A9A9A9","editor.background":"#060606","editor.foreground":"#ffffff4d","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#141414","editor.selectionBackground":"#141414"}},D={base:"vs",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#E1ECF9","activityBar.foreground":"#A9A9A9","editor.background":"#ffffff","editor.foreground":"#000000","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#c2c2c2","editor.selectionBackground":"#e1ecf8"}},M=t(111),T=t(48),B=t(1043),F=t(454),S=t(225),V=t(117),A=t.n(V),E=[{range:null,label:"Dashboard: Modal",kind:27,documentation:"Creates a new modal.",insertText:'Show-UDModal -Content {\n\tNew-UDTypography "Hello, World"\n}'},{range:null,label:"Dashboard: Chart with Colors",kind:27,documentation:"Creates a chart with colors",insertText:"$Data = Get-Process | Sort-Object -Property CPU -Descending | Select-Object -First 10 \n$Options = @{\n    Type = 'bar'\n    Data = $Data\n    BackgroundColor = 'Red'\n    BorderColor = '#c61d4a'\n    HoverBackgroundColor = 'Blue'\n    HoverBorderColor = '#451dc6'\n    DataProperty = 'CPU'\n    LabelProperty = 'ProcessName'\n}\n\nNew-UDChartJS @Options"},{range:null,label:"Dashboard: Form with validation",kind:27,documentation:"Creates a form with validation",insertText:"New-UDForm -Content {\nNew-UDTextbox -Id 'txtValidateForm'\n} -OnValidate {\n    $FormContent = $EventData\n\n    if ($FormContent.txtValidateForm -eq $null -or $FormContent.txtValidateForm -eq '') {\n        New-UDFormValidationResult -ValidationError \"txtValidateForm is required\"\n    } else {\n        New-UDFormValidationResult -Valid\n    }\n} -OnSubmit {\n    Show-UDToast -Message $Body\n}"}],P=t(3);y.c.config({paths:{vs:Object(f.s)("/admin/vs")}}),y.c.init().then((function(e){e.languages.registerCompletionItemProvider("powershell",{provideCompletionItems:function(){var e=Object(l.a)(u.a.mark((function e(n,t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{incomplete:!1,suggestions:E});case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()}),e.languages.registerDocumentFormattingEditProvider("powershell",{displayName:"PowerShell",provideDocumentFormattingEdits:function(){var e=Object(l.a)(u.a.mark((function e(n,t,r){var o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post(Object(f.s)("/api/v1/editor/format"),n.getValue(),{headers:{"content-type":"text/plain"}});case 2:return o=e.sent,i=o.data,e.abrupt("return",[{text:i,range:{startColumn:1,startLineNumber:1,endLineNumber:n.getLineCount(),endColumn:n.getLineMaxColumn(n.getLineCount())}}]);case 5:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()});var n=["$","-","\\","/",":","."],t=function(n){switch(n){case 0:return e.languages.CompletionItemKind.Text;case 2:return e.languages.CompletionItemKind.Method;case 3:return e.languages.CompletionItemKind.Folder;case 4:return e.languages.CompletionItemKind.File;case 5:return e.languages.CompletionItemKind.Property;case 6:return e.languages.CompletionItemKind.Method;case 7:case 9:return e.languages.CompletionItemKind.Property;default:return e.languages.CompletionItemKind.Text}};e.languages.registerCompletionItemProvider("powershell",{triggerCharacters:n,provideCompletionItems:function(){var e=Object(l.a)(u.a.mark((function e(r,o,i){var a,l,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===n.findIndex((function(e){return e===i.triggerCharacter}))){e.next=7;break}return e.next=3,A.a.post(Object(f.s)("/api/v1/editor/complete"),{content:r.getValue(),cursorPosition:r.getOffsetAt(o)});case 3:return a=e.sent,l=a.data,c=null===l||void 0===l?void 0:l.map((function(e){return 3===e.type||4===e.type?{insertText:e.label,label:e.label,documentation:e.help,kind:t(e.type)}:{insertText:e.text,label:e.text,documentation:e.help,kind:t(e.type)}})),e.abrupt("return",{incomplete:!1,suggestions:c});case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()})}));var L=d.a.createContext(null);function N(e){var n=e.children,t=e.refetch,r=void 0===t?function(){}:t,o=e.readonly,a=void 0!==o&&o,c=d.a.useState(a),v=Object(i.a)(c,2),g=v[0],p=v[1],b=d.a.useState(!1),h=Object(i.a)(b,2),j=h[0],x=h[1],O=Object(m.b)().mutateAsync,C=Object(w.b)().currentTheme,k=Object(M.a)().userData,T=Object(y.d)(),F=Object(S.a)({onSuccess:function(e){return s.b.success("Copied.")}}).copy,V=d.a.useRef(null),E=d.a.useCallback(function(){var e=Object(l.a)(u.a.mark((function e(n,t,o){var i,a,l,c,d,v,g,b,f,h,j,C;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),p(!0),"/script"===n&&(o.content=null===V||void 0===V||null===(a=V.current)||void 0===a?void 0:a.getValue()),"/endpoint"===n&&(n=null===o||void 0===o||null===(l=o.resourceInfo)||void 0===l?void 0:l.self,o.scriptBlock=null===V||void 0===V||null===(c=V.current)||void 0===c?void 0:c.getValue()),"/dashboard"===n&&(n=null===o||void 0===o||null===(d=o.resourceInfo)||void 0===d?void 0:d.self,o.content=null===V||void 0===V||null===(v=V.current)||void 0===v?void 0:v.getValue()),n.startsWith("/role")&&(n=null===o||void 0===o||null===(g=o.resourceInfo)||void 0===g?void 0:g.self,o.policy=null===V||void 0===V||null===(b=V.current)||void 0===b?void 0:b.getValue()),"/settings"===n&&(n="/settings/authentication/1",o.settings=null===V||void 0===V||null===(f=V.current)||void 0===f?void 0:f.getValue()),n.startsWith("/module")&&(n=null===o||void 0===o||null===(h=o.resourceInfo)||void 0===h?void 0:h.self,o.content=null===V||void 0===V||null===(j=V.current)||void 0===j?void 0:j.getValue()),"configuration"===(null===o||void 0===o||null===(i=o.resourceInfo)||void 0===i?void 0:i.schemaName)&&(o.content=null===V||void 0===V||null===(C=V.current)||void 0===C?void 0:C.getValue({preserveBOM:!0,lineEnding:"\r\n"})),e.next=11,O({key:n,action:t,resource:o},{onError:function(e){x(!1),p(!1),s.b.error(e.message)},onSuccess:function(e,t){x(!1),p(!1),s.b.success("Changes saved!"),m.a.refetchQueries(n),r()}});case 11:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),[O,r]),N=d.a.useCallback((function(e,n,t){V.current=e,n.languages.register({id:"psulog"}),n.languages.setMonarchTokensProvider("psulog",{tokenizer:{root:[[/\[error.*/,"custom-error"],[/\[verbose.*/,"custom-verbose"],[/\[warning.*/,"custom-warning"],[/\[debug.*/,"custom-debug"],[/\[information.*/,"custom-info"]]}});var o=e.getModel();a||o.onDidChangeContent((function(){var e=o.getVersionId();!function(e,n){var t;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){return e.apply(void 0,o)}),n)}}(Object(l.a)(u.a.mark((function t(){var r,i,a,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.getVersionId(),e===r){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,A.a.post(Object(f.s)("/api/v1/editor/parse"),o.getValue(),{headers:{"content-type":"text/plain"}});case 5:i=t.sent,a=i.data,l=a.map((function(e){return{startColumn:e.token.startColumn,endColumn:e.token.endColumn,startLineNumber:e.token.startLine,endLineNumber:e.token.endLine,severity:B.a.Error,message:e.message}})),n.editor.setModelMarkers(o,"powershell",l);case 9:case"end":return t.stop()}}),t)}))),300)()})),t&&e.addCommand(n.KeyMod.CtrlCmd|n.KeyCode.KEY_S,(function(){var e;return E(null===t||void 0===t||null===(e=t.resourceInfo)||void 0===e?void 0:e.parent,"update",t)})),e.addAction({id:"refresh",label:"Refresh",keybindings:[n.KeyCode.F5],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){return r(),null}}),e.addAction({id:"format",label:"Format",keybindings:[n.KeyCode.F8],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(){return e.trigger("anyString","editor.action.formatDocument",null),null}})}),[r,E,a]);d.a.useEffect((function(){T&&(T.editor.defineTheme("psu-dark",I),T.editor.defineTheme("psu-light",D),T.editor.setTheme("dark"===C?"psu-dark":"psu-light"))}),[C,T]);var K=d.a.useCallback((function(){var e;return F(null===V||void 0===V||null===(e=V.current)||void 0===e?void 0:e.getValue())}),[F]),R=function(){var e;return null===V||void 0===V||null===(e=V.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomIn",{})},U=function(){var e;return null===V||void 0===V||null===(e=V.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomOut",{})},$=d.a.useMemo((function(){return{isReadOnly:g,setIsReadOnly:p,onSave:E,monaco:T,editor:null===V||void 0===V?void 0:V.current,userData:k,handleEditorDidMount:N,currentTheme:C,onCopy:K,zoomIn:R,zoomOut:U,isSaving:j}}),[C,N,g,T,K,E,k,j]);return Object(P.jsx)(L.Provider,{value:$,children:n})}function K(e){var n,t,r,o=e.children,i=e.resource;return Object(P.jsx)(k.a,{requiredRoles:["Administrator","Operator"],requiredAccessControls:T.b.Edit,accessControls:null===i||void 0===i?void 0:i.accessControls,allowedWithOneWayGitSync:!1,children:Object(P.jsx)(v.a,{title:"Save",children:d.a.cloneElement(o,{type:(null===o||void 0===o||null===(n=o.props)||void 0===n?void 0:n.type)||"text",icon:(null===o||void 0===o||null===(t=o.props)||void 0===t?void 0:t.icon)||Object(P.jsx)(h.a,{}),onClick:Object(f.a)(null===o||void 0===o||null===(r=o.props)||void 0===r?void 0:r.onClick)})})})}function R(e){var n=Object.assign({},e),t=d.a.useContext(L),r=t.currentTheme,i=t.handleEditorDidMount;return Object(P.jsx)(y.b,Object(o.a)({theme:"dark"===r?"psu-dark":"psu-light",language:"powershell",loading:Object(P.jsx)(g.a,{tip:"Loading content..."}),height:"calc((100vh - 256px) - 48px)",onMount:function(e,n){return i(e,n,null)}},n))}function U(e){var n=e.title,t=e.options,i=e.showSave,a=void 0===i||i,u=e.actions,l=e.hideToolbar,s=Object(r.a)(e,["title","options","showSave","actions","hideToolbar"]),m=d.a.useContext(L),h=m.handleEditorDidMount,k=m.currentTheme,y=m.onSave,w=m.onCopy,I=m.zoomIn,D=m.zoomOut,M=m.isSaving,T=Object(F.j)(),B=null===T||void 0===T?void 0:T.resource;return Object(P.jsx)(p.a,{bordered:!1,bodyStyle:{padding:0},title:n,extra:!l&&Object(P.jsxs)(c.Fragment,{children:[u,Object(P.jsx)(v.a,{title:"Zoom in",children:Object(P.jsx)(b.a,{type:"text",icon:Object(P.jsx)(j.a,{}),onClick:function(){return I()}})}),Object(P.jsx)(v.a,{title:"Zoom out",children:Object(P.jsx)(b.a,{type:"text",icon:Object(P.jsx)(x.a,{}),onClick:function(){return D()}})}),a&&Object(P.jsx)(K,{resource:B,children:Object(P.jsx)(b.a,{icon:M?Object(P.jsx)(O.a,{}):null,onClick:Object(f.a)((function(){var e;return y(null===B||void 0===B||null===(e=B.resourceInfo)||void 0===e?void 0:e.parent,"update",B)}))})}),Object(P.jsx)(v.a,{title:"Copy",children:Object(P.jsx)(b.a,{type:"text",icon:Object(P.jsx)(C.a,{}),onClick:function(){return w()}})}),Object(P.jsx)(F.b,{children:Object(P.jsx)(b.a,{})})]}),children:Object(P.jsx)(R,Object(o.a)(Object(o.a)({language:"powershell",height:"calc((100vh - 256px) - 48px)",value:(null===B||void 0===B?void 0:B.content)||(null===B||void 0===B?void 0:B.scriptBlock)||(null===B||void 0===B?void 0:B.settings)||(null===s||void 0===s?void 0:s.value),onMount:function(e,n){return h(e,n,B)},theme:"dark"===k?"psu-dark":"psu-light",loading:(null===s||void 0===s?void 0:s.loading)||Object(P.jsx)(g.a,{tip:"Loading content..."})},s),{},{options:Object(o.a)({wordWrap:"on",wrappingIndent:"same",minimap:{enabled:!1},lineHeight:20,lineNumbersMinChars:5,scrollBeyondLastLine:!1,hideCursorInOverviewRuler:!0,overviewRulerLanes:0,overviewRulerBorder:!1},t)}))})}}}]);
//# sourceMappingURL=60.55ccdfe4.chunk.js.map
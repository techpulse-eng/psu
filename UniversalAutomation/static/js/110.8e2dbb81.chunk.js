(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[110],{1410:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return L}));var a=n(68),c=n(49),r=n.n(c),i=n(84),o=n(27),l=n(12),u=n(74),s=n(0),d=n(43),j=n(415),b=n(925),p=n(693),O=n(414),f=n(70),x=n(924),h=n(92),y=n(954),v=n(452),g=n(952),k=n(641),m=n(335),w=n(431),I=n(456),S=n(117),C=n.n(S),F=n(3),_=function(e){var t=e.editing,n=e.dataIndex,a=e.title,c=(e.inputType,e.record,e.index,e.children),r=Object(u.a)(e,["editing","dataIndex","title","inputType","record","index","children"]);return Object(F.jsx)("td",Object(l.a)(Object(l.a)({},r),{},{children:t?Object(F.jsx)(b.a.Item,{name:n,style:{margin:0},rules:[{required:!0,message:"Please Input ".concat(a,"!")}],children:Object(F.jsx)(p.default,{})}):c}))};function L(){var e=Object(d.i)().langaugeId,t=Object(s.useState)([]),n=Object(o.a)(t,2),c=n[0],u=n[1],p=Object(s.useState)(0),S=Object(o.a)(p,2),L=S[0],T=S[1],V=function(e){u(e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{_key:e.key})})))},J=Object(j.a)("/translation/".concat(e)),W=J.data,q=J.isLoading,A=Object(j.a)("/translation/".concat(e,"/string"),{onSuccess:function(e){return V(e),T(e.length),e}}),D=A.isLoading,E=A.refetch,K=b.a.useForm(),N=Object(o.a)(K,1)[0],P=Object(s.useState)(""),R=Object(o.a)(P,2),z=R[0],B=R[1],G=function(e){return e._key===z},H=function(){B("")},M=function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.filter((function(e){return e._key!==t})),V(n),T(L-1),e.next=5,C.a.delete("/api/v1/translation/".concat(W.languageId,"/").concat(t));case 5:E();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(i.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={_key:"String".concat(L+1),key:"String".concat(L+1),value:""},n=[].concat(Object(a.a)(c),[t]),V(n),T(L+1),e.next=6,C.a.post("/api/v1/translation/".concat(W.languageId),t);case 6:E();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,i,o,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.validateFields();case 3:return n=e.sent,i=Object(a.a)(c),(o=i.findIndex((function(e){return t===e._key})))>-1?(u=i[o],i.splice(o,1,Object(l.a)(Object(l.a)({},u),n)),V(i),B("")):(i.push(n),V(i),B("")),e.next=9,C.a.put("/api/v1/translation/".concat(W.languageId,"/").concat(t),n);case 9:E(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),X=[{title:"Key",dataIndex:"key",key:"key",onFilter:function(e,t){return t.key.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.key.localeCompare(t.key)},width:"30%",editable:!0},{title:"Value",dataIndex:"value",key:"value",onFilter:function(e,t){return t.value.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.value.localeCompare(t.value)},width:"30%",editable:!0},{dataIndex:"operation",render:function(e,t){return G(t)?Object(F.jsxs)("span",{children:[Object(F.jsx)(O.a.Link,{onClick:function(){return U(t.key)},style:{marginRight:8},children:Object(F.jsx)(f.a,{icon:Object(F.jsx)(k.a,{}),type:"primary",children:"Save"})}),Object(F.jsx)(x.a,{title:"Sure to cancel?",onConfirm:H,children:Object(F.jsx)(f.a,{children:"Cancel"})})]}):Object(F.jsxs)("span",{children:[Object(F.jsx)(O.a.Link,{disabled:""!==z,onClick:function(){return function(e){N.setFieldsValue(Object(l.a)({},e)),B(e._key)}(t)},children:Object(F.jsx)(h.a,{title:"Edit",children:Object(F.jsx)(f.a,{icon:Object(F.jsx)(m.a,{}),type:"text"})})}),Object(F.jsx)(h.a,{title:"Delete",children:Object(F.jsx)(x.a,{title:"Sure to delete this item?",onConfirm:function(){return M(t.key)},children:Object(F.jsx)(f.a,{icon:Object(F.jsx)(w.a,{}),type:"text"})})})]})}}].map((function(e){return e.editable?Object(l.a)(Object(l.a)({},e),{},{onCell:function(t){return{record:t,inputType:"text",dataIndex:e.dataIndex,title:e.title,editing:G(t)}}}):e}));return Object(F.jsx)(y.a,{title:null===W||void 0===W?void 0:W.languageId,subTitle:null===W||void 0===W?void 0:W.name,extra:[Object(F.jsx)(I.a,{url:"platform/translation"})],children:Object(F.jsx)(b.a,{form:N,component:!1,children:Object(F.jsxs)(v.b,{direction:"vertical",style:{width:"100%"},children:[Object(F.jsx)(f.a,{onClick:Q,type:"primary",children:"Add String"}),Object(F.jsx)(g.a,{components:{body:{cell:_}},dataSource:c,columns:X,rowClassName:"editable-row",loading:q||D,pagination:{onChange:H}})]})})})}}}]);
//# sourceMappingURL=110.8e2dbb81.chunk.js.map
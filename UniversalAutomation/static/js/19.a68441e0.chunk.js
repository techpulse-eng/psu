(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[19,2,3,8],{1003:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));n(0);var a=n(928),r=n(70),c=n(593),o=n(3);function i(e){var t=e.title;return Object(o.jsx)(a.a,{title:t,status:"warning",extra:Object(o.jsx)(r.a,{icon:Object(o.jsx)(c.a,{}),onClick:function(){window.location.href="https://ironmansoftware.com/powershell-universal?rel=product"},children:"Buy License"})})}},1017:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var a=n(12),r=n(74),c=(n(0),n(99)),o=n(92),i=n(70),l=n(36),s=n(587),d=n(48),u=n(3);function f(e){var t=e.to,n=e.accessControls,f=e.allowedWithOneWayGitSync,v=Object(r.a)(e,["to","accessControls","allowedWithOneWayGitSync"]);return Object(u.jsx)(c.a,{requiredRoles:["Administrator","Operator"],requiredAccessControls:d.b.Edit,accessControls:n,allowedWithOneWayGitSync:f,children:Object(u.jsx)(o.a,{title:"Edit Details",children:Object(u.jsx)(l.b,{to:t,children:Object(u.jsx)(i.a,Object(a.a)({type:"text",icon:Object(u.jsx)(s.a,{})},v))})})})}},1458:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return B}));var a=n(27),r=n(49),c=n.n(r),o=n(84),i=n(0),l=n.n(i),s=n(272),d=n(452),u=n(280),f=n(1591),v=n(952),h=n(450),b=n(92),j=n(70),p=n(954),m=n(693),O=n(415),y=n(930),x=n(48),C=n(472),w=n(127),I=n(209),k=n(3);function g(){var e=Object(w.e)(),t=e.onOk,n=e.form;return Object(k.jsxs)(i.Fragment,{children:[Object(k.jsx)(w.d,{requiredRoles:["Administrator"],requiredAccessControls:x.b.Create,allowedWithOneWayGitSync:!1,children:Object(k.jsx)(j.a,{children:"Create New Module"})}),Object(k.jsx)(w.b,{title:"Create new module",onClickOk:function(){t("/module","create",{})},formName:"create_module_form",children:Object(k.jsx)(I.b,{schemaName:"module",children:Object(k.jsx)(I.d,{name:"create_module_form",form:n,preserve:!1})})})]})}var N=n(989),S=n(455),P=n(1017),W=n(111),A=n(1003),E=n(117),K=n.n(E),M=n(22),L=n(456),G=s.default.Option;function R(e,t,n){return n.indexOf(e)===t}var F=[{title:"Name",dataIndex:"name",key:"name",onFilter:function(e,t){return t.name.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.name.localeCompare(t.name)},width:100},{title:"Version",dataIndex:"version",key:"version",onFilter:function(e,t){return t.version.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.version.localeCompare(t.version)},width:100},{title:"Path",dataIndex:"path",key:"path",onFilter:function(e,t){return t.path.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.path.localeCompare(t.path)},width:"60%"},{title:"Source",dataIndex:"source",key:"source",render:function(e,t){return 1===t.source?Object(k.jsx)("span",{children:t.repository}):Object(k.jsx)("span",{children:"Local"})}},{width:"fit-content",dataIndex:"actions",render:function(e,t){return t.readOnly?Object(k.jsx)(k.Fragment,{}):Object(k.jsxs)(d.b,{children:[0===t.source&&Object(k.jsx)(w.a,{children:Object(k.jsx)(N.default,{record:t,allowedWithOneWayGitSync:!1})}),Object(k.jsx)(S.default,{resource:t,allowedWithOneWayGitSync:!1}),0===t.source&&Object(k.jsx)(P.default,{allowedWithOneWayGitSync:!1,accessControls:null===t||void 0===t?void 0:t.accessControls,to:"/admin/platform/module/"+(null===t||void 0===t?void 0:t.id)})]})}}],q=function(e){var t=e.search,n=Object(O.a)("/module"),a=n.data;if(n.isLoading||!a)return Object(k.jsx)(u.a,{});var r=""===t?a:a.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})),c=a.filter((function(e){return e.readOnly})).map((function(e){return e.environment})).filter(R),o=function(e,t){var n=new Map;return e.forEach((function(e){var a=t(e),r=n.get(a);r?r.push(e):n.set(a,[e])})),n}(r,(function(e){return e.environment})),i=a.filter((function(e){return!e.readOnly}));return Object(k.jsx)(d.b,{direction:"vertical",style:{width:"100%"},children:Object(k.jsxs)(f.a,{accordion:!0,children:[c.map((function(e){var t=o.get(e);return Object(k.jsx)(f.a.Panel,{header:"".concat(e," (").concat(t?t.length:0," modules)"),children:Object(k.jsx)(v.a,{dataSource:t,columns:F,tableLayout:"fixed"},e)},e)})),i.length>0&&Object(k.jsx)(f.a.Panel,{header:"Universal Modules (".concat(i?i.length:0," modules)"),children:Object(k.jsx)(v.a,{dataSource:i,columns:F,tableLayout:"fixed"},"psuModulesTable")},"psuModules")]})})},_=function(e){var t=e.name,n=e.version,a=e.repository,r=Object(y.a)(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/api/v1/module/save",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){h.b.success("Saved module!"),M.a.refetchQueries("/dashboard/marketplace")}}),i=r.mutateAsync,l=r.isLoading;return Object(k.jsx)(b.a,{title:"Install",children:Object(k.jsx)(j.a,{type:"text",icon:Object(k.jsx)(C.a,{}),onClick:function(){return i({name:t,version:n,repository:a})},loading:l})})},U=[{title:"Name",dataIndex:"name",key:"name",onFilter:function(e,t){return t.name.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.name.localeCompare(t.name)},width:100},{title:"Version",dataIndex:"version",key:"version",onFilter:function(e,t){return t.version.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.version.localeCompare(t.version)},width:100},{width:"fit-content",dataIndex:"actions",render:function(e,t){return Object(k.jsx)(_,{name:t.name,version:t.version,repository:t.repository})}}],V=function(e){var t=e.search,n=e.repository,a=Object(O.a)("/module/find/".concat(n,"/").concat(t),{enabled:!!t}),r=a.data,c=a.isLoading;return Object(k.jsx)(d.b,{direction:"vertical",style:{width:"100%"},children:Object(k.jsx)(v.a,{dataSource:r,columns:U,loading:c})})};function B(){var e=Object(W.a)().licensed,t=l.a.useState(""),n=Object(a.a)(t,2),r=n[0],c=n[1],o=l.a.useState("local"),i=Object(a.a)(o,2),u=i[0],f=i[1],v=Object(O.a)("/module/repository").data;return e(x.e.Automation)?Object(k.jsxs)(p.a,{title:"Modules",subTitle:"Manage PowerShell Modules for your PowerShell Universal environment.",extra:[Object(k.jsxs)(d.b,{children:["local"===u&&Object(k.jsx)(w.a,{children:Object(k.jsx)(g,{})}),Object(k.jsx)(L.a,{url:"platform/modules"})]})],children:[Object(k.jsxs)(m.default.Group,{compact:!0,children:[Object(k.jsxs)(s.default,{defaultValue:"local",style:{width:"15%"},onChange:function(e){return f(e)},children:[Object(k.jsx)(G,{value:"local",children:"Local"}),null===v||void 0===v?void 0:v.map((function(e){return Object(k.jsx)(G,{value:e,children:e})}))]}),Object(k.jsx)(m.default.Search,{allowClear:!0,onSearch:function(e){return c(e)},placeholder:"Search",style:{width:"85%"}})]}),"local"===u&&Object(k.jsx)(q,{search:r}),"local"!==u&&Object(k.jsx)(V,{search:r,repository:u})]}):Object(k.jsx)(A.default,{title:"Modules are only available for licensed instances."})}},1591:function(e,t,n){"use strict";var a=n(6),r=n(7),c=n(0),o=n(13),i=n(23),l=n(24),s=n(28),d=n(32),u=n(9),f=n.n(u),v=n(173),h=n.n(v),b=n(65),j=n(79),p=n(10),m=c.forwardRef((function(e,t){var n,a=e.prefixCls,o=e.forceRender,i=e.className,l=e.style,s=e.children,d=e.isActive,u=e.role,v=c.useState(d||o),h=Object(p.a)(v,2),b=h[0],j=h[1];return c.useEffect((function(){(o||d)&&j(!0)}),[o,d]),b?c.createElement("div",{ref:t,className:f()("".concat(a,"-content"),(n={},Object(r.a)(n,"".concat(a,"-content-active"),d),Object(r.a)(n,"".concat(a,"-content-inactive"),!d),n),i),style:l,role:u},c.createElement("div",{className:"".concat(a,"-content-box")},s)):null}));m.displayName="PanelContent";var O=m,y=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).handleItemClick=function(){var t=e.props,n=t.onItemClick,a=t.panelKey;"function"===typeof n&&n(a)},e.handleKeyPress=function(t){"Enter"!==t.key&&13!==t.keyCode&&13!==t.which||e.handleItemClick()},e}return Object(l.a)(n,[{key:"shouldComponentUpdate",value:function(e){return!h()(this.props,e)}},{key:"render",value:function(){var e,t,n=this,a=this.props,o=a.className,i=a.id,l=a.style,s=a.prefixCls,d=a.header,u=a.headerClass,v=a.children,h=a.isActive,b=a.showArrow,p=a.destroyInactivePanel,m=a.accordion,y=a.forceRender,x=a.openMotion,C=a.expandIcon,w=a.extra,I=a.collapsible,k="disabled"===I,g=f()("".concat(s,"-header"),(e={},Object(r.a)(e,u,u),Object(r.a)(e,"".concat(s,"-header-collapsible-only"),"header"===I),e)),N=f()((t={},Object(r.a)(t,"".concat(s,"-item"),!0),Object(r.a)(t,"".concat(s,"-item-active"),h),Object(r.a)(t,"".concat(s,"-item-disabled"),k),t),o),S=c.createElement("i",{className:"arrow"});return b&&"function"===typeof C&&(S=C(this.props)),c.createElement("div",{className:N,style:l,id:i},c.createElement("div",{className:g,onClick:function(){return"header"!==I&&n.handleItemClick()},role:m?"tab":"button",tabIndex:k?-1:0,"aria-expanded":h,onKeyPress:this.handleKeyPress},b&&S,"header"===I?c.createElement("span",{onClick:this.handleItemClick,className:"".concat(s,"-header-text")},d):d,w&&c.createElement("div",{className:"".concat(s,"-extra")},w)),c.createElement(j.b,Object.assign({visible:h,leavedClassName:"".concat(s,"-content-hidden")},x,{forceRender:y,removeOnLeave:p}),(function(e,t){var n=e.className,a=e.style;return c.createElement(O,{ref:t,prefixCls:s,className:n,style:a,isActive:h,forceRender:y,role:m?"tabpanel":null},v)})))}}]),n}(c.Component);y.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var x=y;function C(e){var t=e;return Array.isArray(t)||(t=t?[t]:[]),t.map((function(e){return String(e)}))}var w=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).onClickItem=function(e){var t=a.state.activeKey;if(a.props.accordion)t=t[0]===e?[]:[e];else{var n=(t=Object(o.a)(t)).indexOf(e);n>-1?t.splice(n,1):t.push(e)}a.setActiveKey(t)},a.getNewChild=function(e,t){if(!e)return null;var n=a.state.activeKey,r=a.props,o=r.prefixCls,i=r.openMotion,l=r.accordion,s=r.destroyInactivePanel,d=r.expandIcon,u=r.collapsible,f=e.key||String(t),v=e.props,h=v.header,b=v.headerClass,j=v.destroyInactivePanel,p=v.collapsible,m=null!==p&&void 0!==p?p:u,O={key:f,panelKey:f,header:h,headerClass:b,isActive:l?n[0]===f:n.indexOf(f)>-1,prefixCls:o,destroyInactivePanel:null!==j&&void 0!==j?j:s,openMotion:i,accordion:l,children:e.props.children,onItemClick:"disabled"===m?null:a.onClickItem,expandIcon:d,collapsible:m};return"string"===typeof e.type?e:c.cloneElement(e,O)},a.getItems=function(){var e=a.props.children;return Object(b.a)(e).map(a.getNewChild)},a.setActiveKey=function(e){"activeKey"in a.props||a.setState({activeKey:e}),a.props.onChange(a.props.accordion?e[0]:e)};var r=e.activeKey,l=e.defaultActiveKey;return"activeKey"in e&&(l=r),a.state={activeKey:C(l)},a}return Object(l.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!h()(this.props,e)||!h()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,a=t.className,o=t.style,i=t.accordion,l=f()((e={},Object(r.a)(e,n,!0),Object(r.a)(e,a,!!a),e));return c.createElement("div",{className:l,style:o,role:i?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=C(e.activeKey)),t}}]),n}(c.Component);w.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},w.Panel=x;var I=w,k=(w.Panel,n(141)),g=n(41),N=n(78),S=n(33),P=function(e){Object(S.a)(!("disabled"in e),"Collapse.Panel",'`disabled` is deprecated. Please use `collapsible="disabled"` instead.');var t=c.useContext(N.b).getPrefixCls,n=e.prefixCls,o=e.className,i=void 0===o?"":o,l=e.showArrow,s=void 0===l||l,d=t("collapse",n),u=f()(Object(r.a)({},"".concat(d,"-no-arrow"),!s),i);return c.createElement(I.Panel,Object(a.a)({},e,{prefixCls:d,className:u}))},W=n(73),A=n(38),E=function(e){var t,n=c.useContext(N.b),o=n.getPrefixCls,i=n.direction,l=e.prefixCls,s=e.className,d=void 0===s?"":s,u=e.bordered,v=void 0===u||u,h=e.ghost,j=o("collapse",l),p=function(){var t=e.expandIconPosition;return void 0!==t?t:"rtl"===i?"right":"left"}(),m=f()((t={},Object(r.a)(t,"".concat(j,"-borderless"),!v),Object(r.a)(t,"".concat(j,"-icon-position-").concat(p),!0),Object(r.a)(t,"".concat(j,"-rtl"),"rtl"===i),Object(r.a)(t,"".concat(j,"-ghost"),!!h),t),d),O=Object(a.a)(Object(a.a)({},W.a),{motionAppear:!1,leavedClassName:"".concat(j,"-content-hidden")});return c.createElement(I,Object(a.a)({openMotion:O},e,{expandIcon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.expandIcon,a=n?n(t):c.createElement(k.a,{rotate:t.isActive?90:void 0});return c.createElement("div",null,Object(A.a)(a,(function(){return{className:f()(a.props.className,"".concat(j,"-arrow"))}})))},prefixCls:j,className:m}),function(){var t=e.children;return Object(b.a)(t).map((function(e,t){var n;if(null===(n=e.props)||void 0===n?void 0:n.disabled){var r=e.key||String(t),c=e.props,o=c.disabled,i=c.collapsible,l=Object(a.a)(Object(a.a)({},Object(g.a)(e.props,["disabled"])),{key:r,collapsible:null!==i&&void 0!==i?i:o?"disabled":void 0});return Object(A.a)(e,l)}return e}))}())};E.Panel=P;var K=E;t.a=K},983:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var a=n(932),r=n(452),c=n(414),o=n(3);function i(){return Object(o.jsx)(a.a,{type:"info",message:Object(o.jsxs)(r.b,{align:"center",style:{width:"100%",justifyContent:"space-between"},children:["Authentication requires a license.",Object(o.jsx)(c.a.Link,{href:"https://ironmansoftware.com/powershell-universal/?rel=product",target:"_blank",children:"Buy License."})]})})}},989:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var a=n(12),r=n(74),c=(n(0),n(48)),o=n(70),i=n(209),l=n(457),s=n(127),d=n(299),u=n(983),f=n(111),v=n(3);function h(e){var t,n=e.record,h=e.schemaName,b=e.allowedWithOneWayGitSync,j=Object(r.a)(e,["record","schemaName","allowedWithOneWayGitSync"]),p=Object(l.a)().getButtonProps,m=Object(d.a)(),O=Object(s.e)(),y=O.onOk,x=O.form,C=Object(f.a)().licensed;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(s.d,{requiredRoles:["Administrator","Operator"],requiredAccessControls:c.b.Edit,accessControls:j.accessControls,allowedWithOneWayGitSync:b,children:Object(v.jsx)(o.a,Object(a.a)(Object(a.a)(Object(a.a)({},j),p({action:"edit"})),{},{action:"edit"}))}),Object(v.jsxs)(s.b,{title:"Edit Resource",onClickOk:function(){var e,t,a,r,c,o,i,l,s,d,u,f="tag"===(null===n||void 0===n||null===(e=n.resourceInfo)||void 0===e?void 0:e.schemaName)||"role"===(null===n||void 0===n||null===(t=n.resourceInfo)||void 0===t?void 0:t.schemaName)||"endpoint"===(null===n||void 0===n||null===(a=n.resourceInfo)||void 0===a?void 0:a.schemaName)||"ratelimit"===(null===n||void 0===n||null===(r=n.resourceInfo)||void 0===r?void 0:r.schemaName)||"dashboard"===(null===n||void 0===n||null===(c=n.resourceInfo)||void 0===c?void 0:c.schemaName)||"schedule"===(null===n||void 0===n||null===(o=n.resourceInfo)||void 0===o?void 0:o.schemaName)||"publishedfolder"===(null===n||void 0===n||null===(i=n.resourceInfo)||void 0===i?void 0:i.schemaName)?null===n||void 0===n||null===(l=n.resourceInfo)||void 0===l?void 0:l.self:null===n||void 0===n||null===(s=n.resourceInfo)||void 0===s?void 0:s.parent;"page"===(null===n||void 0===n||null===(d=n.resourceInfo)||void 0===d?void 0:d.schemaName)&&(f=(null===n||void 0===n||null===(u=n.resourceInfo)||void 0===u?void 0:u.self)+"?ignoreContent=true"),y(f,"update",n)},children:[Object(v.jsx)(i.b,{schemaName:h||(null===n||void 0===n||null===(t=n.resourceInfo)||void 0===t?void 0:t.schemaName),children:Object(v.jsx)(i.d,{name:"edit_form",form:x,inEditMode:!0,preserve:!1,defaultValues:m(n)})}),!C(c.e.Dashboard)&&Object(v.jsx)(u.a,{})]})]})}}}]);
//# sourceMappingURL=19.a68441e0.chunk.js.map
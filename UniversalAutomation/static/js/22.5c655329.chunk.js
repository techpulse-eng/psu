(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[22,3,122],{1017:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var o=n(12),r=n(74),i=(n(0),n(99)),a=n(92),u=n(70),c=n(36),l=n(587),d=n(48),s=n(3);function v(e){var t=e.to,n=e.accessControls,v=e.allowedWithOneWayGitSync,b=Object(r.a)(e,["to","accessControls","allowedWithOneWayGitSync"]);return Object(s.jsx)(i.a,{requiredRoles:["Administrator","Operator"],requiredAccessControls:d.b.Edit,accessControls:n,allowedWithOneWayGitSync:v,children:Object(s.jsx)(a.a,{title:"Edit Details",children:Object(s.jsx)(c.b,{to:t,children:Object(s.jsx)(u.a,Object(o.a)({type:"text",icon:Object(s.jsx)(l.a,{})},b))})})})}},1032:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var o=n(12),r=(n(0),n(961)),i=n(954),a=n(43),u=n(3);function c(e){var t=Object(a.h)();return Object(u.jsx)(r.a,{bordered:!1,bodyStyle:{padding:0},children:Object(u.jsx)(i.a,Object(o.a)(Object(o.a)({},e),{},{ghost:!0,onBack:function(){return t(-1)}}))})}},1064:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(27),r=n(0),i=n.n(r),a=n(932),u=n(416),c=n(996),l=n(37),d=n(3);function s(e){var t=e.traceId,n=i.a.useState(""),r=Object(o.a)(n,2),s=r[0],v=r[1];return i.a.useEffect((function(){var e=(new u.a).withUrl(Object(l.s)("/loghub")).withAutomaticReconnect().configureLogging(u.b.Debug).build();return e.on("sendLog",(function(e){v((function(t){return t+"".concat(e,"\r\n")}))})),e.start().then((function(){return e.send("subscribe",t)})).catch((function(e){return console.log("signalr error",e)})),function(){e.stop()}}),[t]),Object(d.jsx)(a.a.ErrorBoundary,{children:Object(d.jsx)(c.b,{readonly:!0,children:Object(d.jsx)(c.a,{value:s,language:"psulog",options:{readOnly:!0}})})})}},1413:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var o=n(12),r=n(27),i=(n(698),n(0)),a=n.n(i),u=n(43),c=n(996),l=n(454),d=n(22),s=n(415),v=n(1032),b=n(453),g=n(452),f=n(70),p=n(961),j=n(455),h=n(1017),m=n(37),O=n(1064),x=n(3);function y(){var e,t=Object(u.i)().id,n=Object(s.a)("/role/".concat(t),{enabled:!!t,initialData:function(){var e;return(null===(e=d.a.getQueryData("/role"))||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===parseInt(t)})))||null}}).data,i=Object(s.a)("/role/".concat(t,"/identity"),{enabled:!!n}),y=i.data,C=i.isLoading,k=a.a.useState("identities"),w=Object(r.a)(k,2),I=w[0],S=w[1];function D(e){return"Admin"===e.name||"System"===e.name}var B=[{key:"name",title:"Name",dataIndex:"name"},{width:"fit-content",dataIndex:"actions",render:function(e,t){return Object(x.jsxs)(g.b,{children:[Object(x.jsx)(h.default,{to:"/security/identities/".concat(null===t||void 0===t?void 0:t.id),allowedWithOneWayGitSync:!1}),Object(x.jsx)(j.default,{hidden:D(t),resource:t,allowedWithOneWayGitSync:!1})]})}}],T={identities:Object(x.jsx)(b.default,{actions:[Object(x.jsx)(l.h,{children:Object(x.jsx)(f.a,{})})],title:"Identities",data:y,columns:B,loading:C}),log:Object(x.jsx)(O.a,{traceId:"role:".concat(t)})};return Object(x.jsxs)(l.c,{resource:Object(o.a)(Object(o.a)({},n),{},{resourceInfo:Object(o.a)(Object(o.a)({},n.resourceInfo),{},{parent:null===n||void 0===n||null===(e=n.resourceInfo)||void 0===e?void 0:e.self}),content:null===n||void 0===n?void 0:n.policy}),children:[Object(x.jsx)(l.f,{children:Object(x.jsx)(v.default,{title:Object(m.b)(null===n||void 0===n?void 0:n.name),subTitle:"#".concat(null===n||void 0===n?void 0:n.id)})}),Object(x.jsxs)(l.e,{children:[Object(x.jsx)(l.a,{children:Object(x.jsx)(c.b,{children:Object(x.jsx)(c.c,{title:"Policy Editor"})})}),Object(x.jsx)(l.g,{children:Object(x.jsx)(p.a,{bordered:!1,headStyle:{borderBottom:0,height:64},bodyStyle:{paddingTop:24},tabList:[{key:"identities",tab:"Identities"},{key:"log",tab:"Log"}],activeTabKey:I,onTabChange:function(e){return S(e)},tabProps:{type:"line",tabBarStyle:{height:64}},children:T[I]})})]})]})}},996:function(e,t,n){"use strict";n.d(t,"b",(function(){return W})),n.d(t,"a",(function(){return K})),n.d(t,"c",(function(){return R}));var o=n(74),r=n(12),i=n(27),a=n(49),u=n.n(a),c=n(84),l=n(0),d=n.n(l),s=n(450),v=n(92),b=n(280),g=n(961),f=n(70),p=n(37),j=n(22),h=n(443),m=n(360),O=n(361),x=n(106),y=n(437),C=n(99),k=n(1038),w=n(128),I={base:"vs-dark",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#060606","activityBar.foreground":"#A9A9A9","editor.background":"#060606","editor.foreground":"#ffffff4d","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#141414","editor.selectionBackground":"#141414"}},S={base:"vs",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#E1ECF9","activityBar.foreground":"#A9A9A9","editor.background":"#ffffff","editor.foreground":"#000000","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#c2c2c2","editor.selectionBackground":"#e1ecf8"}},D=n(111),B=n(48),T=n(1043),A=n(454),M=n(225),V=n(117),E=n.n(V),F=[{range:null,label:"Dashboard: Modal",kind:27,documentation:"Creates a new modal.",insertText:'Show-UDModal -Content {\n\tNew-UDTypography "Hello, World"\n}'},{range:null,label:"Dashboard: Chart with Colors",kind:27,documentation:"Creates a chart with colors",insertText:"$Data = Get-Process | Sort-Object -Property CPU -Descending | Select-Object -First 10 \n$Options = @{\n    Type = 'bar'\n    Data = $Data\n    BackgroundColor = 'Red'\n    BorderColor = '#c61d4a'\n    HoverBackgroundColor = 'Blue'\n    HoverBorderColor = '#451dc6'\n    DataProperty = 'CPU'\n    LabelProperty = 'ProcessName'\n}\n\nNew-UDChartJS @Options"},{range:null,label:"Dashboard: Form with validation",kind:27,documentation:"Creates a form with validation",insertText:"New-UDForm -Content {\nNew-UDTextbox -Id 'txtValidateForm'\n} -OnValidate {\n    $FormContent = $EventData\n\n    if ($FormContent.txtValidateForm -eq $null -or $FormContent.txtValidateForm -eq '') {\n        New-UDFormValidationResult -ValidationError \"txtValidateForm is required\"\n    } else {\n        New-UDFormValidationResult -Valid\n    }\n} -OnSubmit {\n    Show-UDToast -Message $Body\n}"}],L=n(3);k.c.config({paths:{vs:Object(p.s)("/admin/vs")}}),k.c.init().then((function(e){e.languages.registerCompletionItemProvider("powershell",{provideCompletionItems:function(){var e=Object(c.a)(u.a.mark((function e(t,n,o){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{incomplete:!1,suggestions:F});case 1:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()}),e.languages.registerDocumentFormattingEditProvider("powershell",{displayName:"PowerShell",provideDocumentFormattingEdits:function(){var e=Object(c.a)(u.a.mark((function e(t,n,o){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(Object(p.s)("/api/v1/editor/format"),t.getValue(),{headers:{"content-type":"text/plain"}});case 2:return r=e.sent,i=r.data,e.abrupt("return",[{text:i,range:{startColumn:1,startLineNumber:1,endLineNumber:t.getLineCount(),endColumn:t.getLineMaxColumn(t.getLineCount())}}]);case 5:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()});var t=["$","-","\\","/",":","."],n=function(t){switch(t){case 0:return e.languages.CompletionItemKind.Text;case 2:return e.languages.CompletionItemKind.Method;case 3:return e.languages.CompletionItemKind.Folder;case 4:return e.languages.CompletionItemKind.File;case 5:return e.languages.CompletionItemKind.Property;case 6:return e.languages.CompletionItemKind.Method;case 7:case 9:return e.languages.CompletionItemKind.Property;default:return e.languages.CompletionItemKind.Text}};e.languages.registerCompletionItemProvider("powershell",{triggerCharacters:t,provideCompletionItems:function(){var e=Object(c.a)(u.a.mark((function e(o,r,i){var a,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===t.findIndex((function(e){return e===i.triggerCharacter}))){e.next=7;break}return e.next=3,E.a.post(Object(p.s)("/api/v1/editor/complete"),{content:o.getValue(),cursorPosition:o.getOffsetAt(r)});case 3:return a=e.sent,c=a.data,l=null===c||void 0===c?void 0:c.map((function(e){return 3===e.type||4===e.type?{insertText:e.label,label:e.label,documentation:e.help,kind:n(e.type)}:{insertText:e.text,label:e.text,documentation:e.help,kind:n(e.type)}})),e.abrupt("return",{incomplete:!1,suggestions:l});case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()})}));var P=d.a.createContext(null);function W(e){var t=e.children,n=e.refetch,o=void 0===n?function(){}:n,r=e.readonly,a=void 0!==r&&r,l=d.a.useState(a),v=Object(i.a)(l,2),b=v[0],g=v[1],f=d.a.useState(!1),h=Object(i.a)(f,2),m=h[0],O=h[1],x=Object(j.b)().mutateAsync,y=Object(w.b)().currentTheme,C=Object(D.a)().userData,B=Object(k.d)(),A=Object(M.a)({onSuccess:function(e){return s.b.success("Copied.")}}).copy,V=d.a.useRef(null),F=d.a.useCallback(function(){var e=Object(c.a)(u.a.mark((function e(t,n,r){var i,a,c,l,d,v,b,f,p,h,m,y;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),g(!0),"/script"===t&&(r.content=null===V||void 0===V||null===(a=V.current)||void 0===a?void 0:a.getValue()),"/endpoint"===t&&(t=null===r||void 0===r||null===(c=r.resourceInfo)||void 0===c?void 0:c.self,r.scriptBlock=null===V||void 0===V||null===(l=V.current)||void 0===l?void 0:l.getValue()),"/dashboard"===t&&(t=null===r||void 0===r||null===(d=r.resourceInfo)||void 0===d?void 0:d.self,r.content=null===V||void 0===V||null===(v=V.current)||void 0===v?void 0:v.getValue()),t.startsWith("/role")&&(t=null===r||void 0===r||null===(b=r.resourceInfo)||void 0===b?void 0:b.self,r.policy=null===V||void 0===V||null===(f=V.current)||void 0===f?void 0:f.getValue()),"/settings"===t&&(t="/settings/authentication/1",r.settings=null===V||void 0===V||null===(p=V.current)||void 0===p?void 0:p.getValue()),t.startsWith("/module")&&(t=null===r||void 0===r||null===(h=r.resourceInfo)||void 0===h?void 0:h.self,r.content=null===V||void 0===V||null===(m=V.current)||void 0===m?void 0:m.getValue()),"configuration"===(null===r||void 0===r||null===(i=r.resourceInfo)||void 0===i?void 0:i.schemaName)&&(r.content=null===V||void 0===V||null===(y=V.current)||void 0===y?void 0:y.getValue({preserveBOM:!0,lineEnding:"\r\n"})),e.next=11,x({key:t,action:n,resource:r},{onError:function(e){O(!1),g(!1),s.b.error(e.message)},onSuccess:function(e,n){O(!1),g(!1),s.b.success("Changes saved!"),j.a.refetchQueries(t),o()}});case 11:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),[x,o]),W=d.a.useCallback((function(e,t,n){V.current=e,t.languages.register({id:"psulog"}),t.languages.setMonarchTokensProvider("psulog",{tokenizer:{root:[[/\[error.*/,"custom-error"],[/\[verbose.*/,"custom-verbose"],[/\[warning.*/,"custom-warning"],[/\[debug.*/,"custom-debug"],[/\[information.*/,"custom-info"]]}});var r=e.getModel();a||r.onDidChangeContent((function(){var e=r.getVersionId();!function(e,t){var n;return function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];clearTimeout(n),n=setTimeout((function(){return e.apply(void 0,r)}),t)}}(Object(c.a)(u.a.mark((function n(){var o,i,a,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r.getVersionId(),e===o){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,E.a.post(Object(p.s)("/api/v1/editor/parse"),r.getValue(),{headers:{"content-type":"text/plain"}});case 5:i=n.sent,a=i.data,c=a.map((function(e){return{startColumn:e.token.startColumn,endColumn:e.token.endColumn,startLineNumber:e.token.startLine,endLineNumber:e.token.endLine,severity:T.a.Error,message:e.message}})),t.editor.setModelMarkers(r,"powershell",c);case 9:case"end":return n.stop()}}),n)}))),300)()})),n&&e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KEY_S,(function(){var e;return F(null===n||void 0===n||null===(e=n.resourceInfo)||void 0===e?void 0:e.parent,"update",n)})),e.addAction({id:"refresh",label:"Refresh",keybindings:[t.KeyCode.F5],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){return o(),null}}),e.addAction({id:"format",label:"Format",keybindings:[t.KeyCode.F8],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(){return e.trigger("anyString","editor.action.formatDocument",null),null}})}),[o,F,a]);d.a.useEffect((function(){B&&(B.editor.defineTheme("psu-dark",I),B.editor.defineTheme("psu-light",S),B.editor.setTheme("dark"===y?"psu-dark":"psu-light"))}),[y,B]);var N=d.a.useCallback((function(){var e;return A(null===V||void 0===V||null===(e=V.current)||void 0===e?void 0:e.getValue())}),[A]),K=function(){var e;return null===V||void 0===V||null===(e=V.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomIn",{})},R=function(){var e;return null===V||void 0===V||null===(e=V.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomOut",{})},U=d.a.useMemo((function(){return{isReadOnly:b,setIsReadOnly:g,onSave:F,monaco:B,editor:null===V||void 0===V?void 0:V.current,userData:C,handleEditorDidMount:W,currentTheme:y,onCopy:N,zoomIn:K,zoomOut:R,isSaving:m}}),[y,W,b,B,N,F,C,m]);return Object(L.jsx)(P.Provider,{value:U,children:t})}function N(e){var t,n,o,r=e.children,i=e.resource;return Object(L.jsx)(C.a,{requiredRoles:["Administrator","Operator"],requiredAccessControls:B.b.Edit,accessControls:null===i||void 0===i?void 0:i.accessControls,allowedWithOneWayGitSync:!1,children:Object(L.jsx)(v.a,{title:"Save",children:d.a.cloneElement(r,{type:(null===r||void 0===r||null===(t=r.props)||void 0===t?void 0:t.type)||"text",icon:(null===r||void 0===r||null===(n=r.props)||void 0===n?void 0:n.icon)||Object(L.jsx)(h.a,{}),onClick:Object(p.a)(null===r||void 0===r||null===(o=r.props)||void 0===o?void 0:o.onClick)})})})}function K(e){var t=Object.assign({},e),n=d.a.useContext(P),o=n.currentTheme,i=n.handleEditorDidMount;return Object(L.jsx)(k.b,Object(r.a)({theme:"dark"===o?"psu-dark":"psu-light",language:"powershell",loading:Object(L.jsx)(b.a,{tip:"Loading content..."}),height:"calc((100vh - 256px) - 48px)",onMount:function(e,t){return i(e,t,null)}},t))}function R(e){var t=e.title,n=e.options,i=e.showSave,a=void 0===i||i,u=e.actions,c=e.hideToolbar,s=Object(o.a)(e,["title","options","showSave","actions","hideToolbar"]),j=d.a.useContext(P),h=j.handleEditorDidMount,C=j.currentTheme,k=j.onSave,w=j.onCopy,I=j.zoomIn,S=j.zoomOut,D=j.isSaving,B=Object(A.j)(),T=null===B||void 0===B?void 0:B.resource;return Object(L.jsx)(g.a,{bordered:!1,bodyStyle:{padding:0},title:t,extra:!c&&Object(L.jsxs)(l.Fragment,{children:[u,Object(L.jsx)(v.a,{title:"Zoom in",children:Object(L.jsx)(f.a,{type:"text",icon:Object(L.jsx)(m.a,{}),onClick:function(){return I()}})}),Object(L.jsx)(v.a,{title:"Zoom out",children:Object(L.jsx)(f.a,{type:"text",icon:Object(L.jsx)(O.a,{}),onClick:function(){return S()}})}),a&&Object(L.jsx)(N,{resource:T,children:Object(L.jsx)(f.a,{icon:D?Object(L.jsx)(x.a,{}):null,onClick:Object(p.a)((function(){var e;return k(null===T||void 0===T||null===(e=T.resourceInfo)||void 0===e?void 0:e.parent,"update",T)}))})}),Object(L.jsx)(v.a,{title:"Copy",children:Object(L.jsx)(f.a,{type:"text",icon:Object(L.jsx)(y.a,{}),onClick:function(){return w()}})}),Object(L.jsx)(A.b,{children:Object(L.jsx)(f.a,{})})]}),children:Object(L.jsx)(K,Object(r.a)(Object(r.a)({language:"powershell",height:"calc((100vh - 256px) - 48px)",value:(null===T||void 0===T?void 0:T.content)||(null===T||void 0===T?void 0:T.scriptBlock)||(null===T||void 0===T?void 0:T.settings)||(null===s||void 0===s?void 0:s.value),onMount:function(e,t){return h(e,t,T)},theme:"dark"===C?"psu-dark":"psu-light",loading:(null===s||void 0===s?void 0:s.loading)||Object(L.jsx)(b.a,{tip:"Loading content..."})},s),{},{options:Object(r.a)({wordWrap:"on",wrappingIndent:"same",minimap:{enabled:!1},lineHeight:20,lineNumbersMinChars:5,scrollBeyondLastLine:!1,hideCursorInOverviewRuler:!0,overviewRulerLanes:0,overviewRulerBorder:!1},n)}))})}}}]);
//# sourceMappingURL=22.5c655329.chunk.js.map
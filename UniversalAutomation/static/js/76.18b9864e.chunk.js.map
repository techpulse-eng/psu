{"version":3,"sources":["components/dashboard/components/RemoveComponent.tsx","components/dashboard/components/DashboardComponents.tsx"],"names":["RemoveComponent","componentId","dashboard","useMutation","onSuccess","queryClient","refetchQueries","id","isLoading","mutateAsync","title","cancelText","okButtonProps","type","danger","okText","onConfirm","newComponents","dashboardComponents","filter","component","key","action","removeComponent","color","icon","WarningOutlined","DeleteFilled","loading","DashboardComponents","usePageContext","resource","columns","dataIndex","width","render","_","record","Table","data"],"mappings":"mPASe,SAASA,EAAT,GAMX,IALFC,EAKC,EALDA,YACAC,EAIC,EAJDA,UAIC,EACkCC,YAAY,CAC7CC,UAAW,WACTC,IAAYC,eAAZ,qBAAyCJ,EAAUK,QAF/CC,EADP,EACOA,UAAWC,EADlB,EACkBA,YAoBnB,OACE,cAAC,IAAD,CACEC,MAAM,mDACNC,WAAW,SACXC,cAAe,CAAEC,KAAM,UAAWC,QAAQ,GAC1CC,OAAO,SACPC,UAAW,kBApBf,SAAyBf,GAAsB,IAAD,EACtCgB,EAAa,OAAGf,QAAH,IAAGA,GAAH,UAAGA,EAAWgB,2BAAd,aAAG,EAAgCC,QACpD,SAACC,GAAD,OAAeA,EAAUb,KAAON,KAElCQ,EAAY,aACVY,IAAI,cAAD,OAAgBnB,EAAUK,IAC7Be,OAAQ,UAFC,YAAC,eAILpB,GAJI,IAKPgB,oBAAqBD,MAWNM,CAAgBtB,IACjCuB,MAAM,MACNC,KAAM,cAACC,EAAA,EAAD,IAPR,SASE,cAAC,IAAD,CAAQb,KAAK,OAAOC,QAAM,EAACW,KAAM,cAACE,EAAA,EAAD,IAAkBC,QAASpB,M,aCfnDqB,UA1Ba,WAAO,IACf3B,EAAc4B,cAAxBC,SAEFC,EAAmC,CACvC,CACEC,UAAW,OACXvB,MAAO,QAET,CACEuB,UAAW,UACXvB,MAAO,WAET,CACEuB,UAAW,UACXC,MAAO,cACPC,OAAQ,SAACC,EAAGC,GACV,OACE,cAACrC,EAAD,CAAiBC,YAAW,OAAEoC,QAAF,IAAEA,OAAF,EAAEA,EAAQ9B,GAAIL,UAAWA,OAM7D,OAAO,cAACoC,EAAA,QAAD,CAAOC,KAAI,OAAErC,QAAF,IAAEA,OAAF,EAAEA,EAAWgB,oBAAqBc,QAASA","file":"static/js/76.18b9864e.chunk.js","sourcesContent":["import {\r\n  WarningOutlined,\r\n  DeleteFilled,\r\n} from \"@ant-design/icons\";\r\nimport { Popconfirm, Button } from \"antd\";\r\nimport React from \"react\";\r\nimport { Dashboard } from \"../../../types\";\r\nimport queryClient, { useMutation } from \"../../utils/queryClient\";\r\n\r\nexport default function RemoveComponent({\r\n  componentId,\r\n  dashboard,\r\n}: {\r\n  componentId: number;\r\n  dashboard: Dashboard;\r\n}) {\r\n  const { isLoading, mutateAsync } = useMutation({\r\n    onSuccess: () => {\r\n      queryClient.refetchQueries(`/dashboard/${dashboard.id}`)\r\n    }\r\n  });\r\n\r\n  function removeComponent(componentId: number) {\r\n    const newComponents = dashboard?.dashboardComponents?.filter(\r\n      (component) => component.id !== componentId\r\n    );\r\n    mutateAsync({\r\n      key: `/dashboard/${dashboard.id}`,\r\n      action: \"update\",\r\n      ...{\r\n        ...dashboard,\r\n        dashboardComponents: newComponents,\r\n      },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Popconfirm\r\n      title=\"Are you sure you want to remove this component ?\"\r\n      cancelText=\"Cancel\"\r\n      okButtonProps={{ type: \"primary\", danger: true }}\r\n      okText=\"Remove\"\r\n      onConfirm={() => removeComponent(componentId)}\r\n      color=\"red\"\r\n      icon={<WarningOutlined />}\r\n    >\r\n      <Button type=\"text\" danger icon={<DeleteFilled />} loading={isLoading} />\r\n    </Popconfirm>\r\n  );\r\n}\r\n","import Table from \"../../ui/Table\";\r\nimport { CustomColumns, Module } from \"../../../types\";\r\nimport RemoveComponent from \"./RemoveComponent\";\r\nimport { usePageContext } from \"components/pages/Page\";\r\n\r\nconst DashboardComponents = () => {\r\n  const { resource: dashboard } = usePageContext();\r\n\r\n  const columns: CustomColumns<Module>[] = [\r\n    {\r\n      dataIndex: \"name\",\r\n      title: \"Name\",\r\n    },\r\n    {\r\n      dataIndex: \"version\",\r\n      title: \"Version\",\r\n    },\r\n    {\r\n      dataIndex: \"actions\",\r\n      width: \"fit-content\",\r\n      render: (_, record: Module) => {\r\n        return (\r\n          <RemoveComponent componentId={record?.id} dashboard={dashboard} />\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  return <Table data={dashboard?.dashboardComponents} columns={columns} />;\r\n};\r\n\r\nexport default DashboardComponents;\r\n"],"sourceRoot":""}
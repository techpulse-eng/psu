{"version":3,"sources":["components/dashboard/folders.tsx"],"names":["Table","React","lazy","EditModal","DeleteButton","FolderModal","PublishedFolders","useQuery","folders","data","isLoading","licensed","useAppStore","copy","useClipboard","onSuccess","text","message","info","islicensed","Feature","Dashboard","columns","key","title","dataIndex","render","value","record","role","length","map","color","align","authentication","width","allowedWithOneWayGitSync","resource","type","icon","onClick","window","location","origin","requestPath","subTitle","extra","url","actions","loading"],"mappings":"6JAAA,4IAWMA,EAAQC,IAAMC,MAAK,kBAAM,4CACzBC,EAAYF,IAAMC,MAAK,kBAAM,iCAC7BE,EAAeH,IAAMC,MAAK,kBAAM,4CAChCG,EAAcJ,IAAMC,MAAK,kBAAM,mCAoGtBI,UAjGf,WAA6B,IAAD,EACWC,YACnC,oBADYC,EADY,EAClBC,KAAeC,EADG,EACHA,UAGfC,EAAaC,cAAbD,SAGAE,EAASC,YAAa,CAC5BC,UAAW,SAACC,GAAD,OAAUC,IAAQC,KAAR,0BADfL,KAKFM,EAAaR,EAASS,IAAQC,WAE9BC,EAA4C,CAChD,CACEC,IAAK,OACLC,MAAO,OACPC,UAAW,QAEb,CACEF,IAAK,cACLC,MAAO,cACPC,UAAW,eAEb,CACEF,IAAK,kBACLC,MAAO,mBACPC,UAAW,mBAEb,CACEF,IAAK,OACLC,MAAO,OACPC,UAAW,OACXC,OAAQ,SAACC,EAAOC,GACG,IAAD,IAAhB,OAAIT,IACK,UAAAS,EAAOC,YAAP,eAAaC,QAAS,EAAtB,OACHF,QADG,IACHA,GADG,UACHA,EAAQC,YADL,aACH,EAAcE,KAAI,SAACF,GAAD,OAClB,cAAC,IAAD,CAAgBG,MAAM,OAAtB,SACGH,GADOA,MAKT,OAGX,CACEN,IAAK,iBACLC,MAAO,iBACPC,UAAW,iBACXQ,MAAO,SACPP,OAAQ,SAACV,EAAMY,GAAP,OACA,OAANA,QAAM,IAANA,OAAA,EAAAA,EAAQM,gBAAiB,UAAY,aAEzC,CACEC,MAAO,cACPV,UAAW,UACXC,OAAQ,SAACV,EAAMY,GACb,OACE,eAAC,IAAD,WACE,cAAC,IAAD,UACE,cAACzB,EAAD,CAAWyB,OAAQA,EAAQQ,0BAA0B,MAEvD,cAAChC,EAAD,CAAciC,SAAUT,EAAQQ,0BAA0B,IAC1D,cAAC,IAAD,CACEE,KAAK,OACLC,KAAM,cAAC,IAAD,IACNC,QAAS,kBACP3B,EAAK,GAAD,OAAI4B,OAAOC,SAASC,QAApB,OAA6Bf,EAAOgB,uBAStD,OACE,cAAC,IAAD,CAAYpB,MAAM,oBAAoBqB,SAAS,yEAAyEC,MAAO,CAC7H,cAAC,IAAD,CAAYC,IAAI,gCADlB,SAGE,cAAC/C,EAAD,CACEwB,MAAM,oBACNwB,QAAS,CACP,cAAC,IAAD,UACE,cAAC3C,EAAD,OAGJiB,QAASA,EACT2B,QAASvC,EACTD,KAAMD","file":"static/js/7.ffcd9503.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { CustomColumns, PublishedFolder } from \"../../types\";\r\nimport { Feature } from \"../../types\";\r\nimport { useQuery } from \"react-query3\";\r\nimport useAppStore from \"components/context/app/Hooks\";\r\nimport { Modal } from \"components/ui/Modal\";\r\nimport { Button, message, PageHeader, Space, Tag } from \"antd\";\r\nimport DocsButton from \"components/docsButton\";\r\nimport useClipboard from \"use-clipboard-hook\";\r\nimport { CopyOutlined } from \"@ant-design/icons\";\r\n\r\nconst Table = React.lazy(() => import(\"components/ui/Table\"));\r\nconst EditModal = React.lazy(() => import(\"components/ui/EditModal\"));\r\nconst DeleteButton = React.lazy(() => import(\"components/ui/DeleteButton\"));\r\nconst FolderModal = React.lazy(() => import(\"./FolderModal\"));\r\n\r\n\r\nfunction PublishedFolders() {\r\n  const { data: folders, isLoading } = useQuery<PublishedFolder[]>(\r\n    \"/publishedfolder\"\r\n  );\r\n  const { licensed } = useAppStore();\r\n\r\n\r\n  const { copy } = useClipboard({\r\n    onSuccess: (text) => message.info(`URL command copied.`),\r\n  });\r\n\r\n\r\n  const islicensed = licensed(Feature.Dashboard);\r\n\r\n  const columns: CustomColumns<PublishedFolder>[] = [\r\n    {\r\n      key: \"path\",\r\n      title: \"Path\",\r\n      dataIndex: \"path\",\r\n    },\r\n    {\r\n      key: \"requestPath\",\r\n      title: \"RequestPath\",\r\n      dataIndex: \"requestPath\",\r\n    },\r\n    {\r\n      key: \"defaultDocument\",\r\n      title: \"Default Document\",\r\n      dataIndex: \"defaultDocument\",\r\n    },\r\n    {\r\n      key: \"role\",\r\n      title: \"Role\",\r\n      dataIndex: \"role\",\r\n      render: (value, record) => {\r\n        if (islicensed) {\r\n          return record.role?.length > 0\r\n            ? record?.role?.map((role) => (\r\n              <Tag key={role} color=\"blue\">\r\n                {role}\r\n              </Tag>\r\n            )) : null;\r\n        }\r\n        return null;\r\n      },\r\n    },\r\n    {\r\n      key: \"authentication\",\r\n      title: \"Authentication\",\r\n      dataIndex: \"authentication\",\r\n      align: \"center\",\r\n      render: (text, record) =>\r\n        record?.authentication ? \"Enabled\" : \"Disabled\",\r\n    },\r\n    {\r\n      width: \"fit-content\",\r\n      dataIndex: \"actions\",\r\n      render: (text, record) => {\r\n        return (\r\n          <Space>\r\n            <Modal>\r\n              <EditModal record={record} allowedWithOneWayGitSync={false} />\r\n            </Modal>\r\n            <DeleteButton resource={record} allowedWithOneWayGitSync={false} />\r\n            <Button\r\n              type=\"text\"\r\n              icon={<CopyOutlined />}\r\n              onClick={() =>\r\n                copy(`${window.location.origin}${record.requestPath}`)\r\n              }\r\n            />\r\n          </Space>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <PageHeader title=\"Published Folders\" subTitle=\"Local folders shared over HTTP to allow for downloads from the folder.\" extra={[\r\n      <DocsButton url=\"platform/published-folders\" />\r\n    ]}>\r\n      <Table\r\n        title=\"Published Folders\"\r\n        actions={[\r\n          <Modal>\r\n            <FolderModal />\r\n          </Modal>,\r\n        ]}\r\n        columns={columns}\r\n        loading={isLoading}\r\n        data={folders}\r\n      />\r\n    </PageHeader>\r\n\r\n  );\r\n}\r\n\r\nexport default PublishedFolders;\r\n"],"sourceRoot":""}
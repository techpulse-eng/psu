(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[25,2,8],{1003:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));n(0);var r=n(928),i=n(70),a=n(593),c=n(3);function o(e){var t=e.title;return Object(c.jsx)(r.a,{title:t,status:"warning",extra:Object(c.jsx)(i.a,{icon:Object(c.jsx)(a.a,{}),onClick:function(){window.location.href="https://ironmansoftware.com/powershell-universal?rel=product"},children:"Buy License"})})}},1447:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return z}));var r=n(0),i=n(449),a=n(450),c=n(92),o=n(70),s=n(452),l=n(954),d=n(930),u=n(415),j=n(48),m=n(588),b=n(127),h=n(989),f=n(455),O=n(453),x=n(209),v=n(3);function p(){var e=Object(b.e)(),t=e.onOk,n=e.form;return Object(v.jsxs)(r.Fragment,{children:[Object(v.jsx)(b.d,{requiredRoles:["Administrator","Operator"],requiredAccessControls:j.b.Create,allowedWithOneWayGitSync:!1,children:Object(v.jsx)(o.a,{children:"Create New Terminal"})}),Object(v.jsx)(b.b,{title:"Create new terminal",onClickOk:function(){t("/terminal","create",{})},formName:"create_terminal_form",children:Object(v.jsx)(x.b,{schemaName:"terminal",children:Object(v.jsx)(x.d,{name:"create_terminal_form",form:n,preserve:!1})})})]})}var y=n(43),w=n(414),I=n(440),C=n(431),g=n(36),k=n(117),T=n.n(k),S=n(22),W=n(72),N=n.n(W);function A(){var e=Object(u.a)("/terminal/instance",{enabled:!1,refetchOnWindowFocus:!1}),t=e.data,n=e.isLoading,r=e.refetch,i=Object(d.a)((function(e){return T.a.delete("/api/v1/terminal/instance/".concat(e)).then((function(e){return e.data}))}),{onError:function(e,t,n){a.b.error("Terminal ".concat(t,"; ").concat(null===e||void 0===e?void 0:e.message))},onSuccess:function(e,t){S.a.refetchQueries("/terminal/instance",{stale:!0})}}).mutateAsync,l=[{title:"Terminal",dataIndex:"terminal",key:"terminal",onFilter:function(e,t){return t.name.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.name.localeCompare(t.name)},width:100},{title:"User",dataIndex:"identity",key:"identity",render:function(e,t){return Object(v.jsx)("span",{children:t.identity.name})}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){switch(t.status){case 0:return Object(v.jsx)("span",{children:"Connecting"});case 1:return Object(v.jsx)("span",{children:"Connected"});case 2:return Object(v.jsx)("span",{children:"Idle"});case 3:return Object(v.jsx)("span",{children:"Terminated"})}}},{title:"Start Time",dataIndex:"startTime",key:"startTime",render:function(e,t){return Object(v.jsxs)(s.b,{children:[Object(v.jsx)(w.a.Text,{type:"secondary",style:{fontSize:12},children:Object(v.jsx)(I.a,{style:{color:"inherit",fontSize:"inherit"}})}),Object(v.jsx)(w.a.Text,{type:"secondary",style:{fontSize:12},children:N()().to(N()(null===t||void 0===t?void 0:t.startTime))})]})}},{width:"fit-content",dataIndex:"actions",render:function(e,t){var n=Object(v.jsx)(c.a,{title:"View Command History",children:Object(v.jsx)(g.b,{to:"/admin/automation/terminal/".concat(t.id,"/history"),children:Object(v.jsx)(o.a,{icon:Object(v.jsx)(I.a,{}),type:"text"})})});return 3===t.status?n:Object(v.jsxs)(s.b,{children:[Object(v.jsx)(c.a,{title:"Open Terminal",children:Object(v.jsx)(g.b,{to:"/admin/automation/terminal/".concat(t.id),children:Object(v.jsx)(o.a,{icon:Object(v.jsx)(m.a,{}),type:"text"})})}),n,Object(v.jsx)(o.a,{icon:Object(v.jsx)(C.a,{}),onClick:function(){return i(t.id)},danger:!0,type:"text"})]})}}];return Object(v.jsx)(O.default,{title:"Terminal Instances",columns:l,data:t,loading:n,queryFn:r})}var q=n(99),F=n(1003),E=n(111),G=n(456),L=n(37),R=i.a.TabPane,_=function(e){var t=e.terminalId,n=Object(y.h)(),r=Object(d.a)((function(e){return T.a.post(Object(L.s)("/api/v1/terminal/instance"),{id:e}).then((function(e){return e.data}))}),{onError:function(e,t,n){a.b.error("Terminal ".concat(t,"; ").concat(null===e||void 0===e?void 0:e.message))},onSuccess:function(e,t){S.a.refetchQueries("/terminal/instance",{stale:!0}),n(Object(L.s)("/admin/automation/terminal/".concat(e.id)))}}),i=r.mutateAsync,s=r.isLoading;return Object(v.jsx)(c.a,{title:"Open Terminal",children:Object(v.jsx)(o.a,{icon:Object(v.jsx)(m.a,{}),onClick:function(){return i(t)},type:"text",loading:s})})};function z(){var e=Object(E.a)().licensed,t=Object(u.a)("/terminal",{enabled:!1,refetchOnWindowFocus:!1}),n=t.data,r=t.isLoading,a=t.refetch,c=[{title:"Name",dataIndex:"name",key:"name",onFilter:function(e,t){return t.name.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.name.localeCompare(t.name)},width:100},{title:"Description",dataIndex:"description",key:"description",onFilter:function(e,t){return t.version.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.version.localeCompare(t.version)},width:100},{title:"Environment",dataIndex:"environment",key:"environment",onFilter:function(e,t){return t.version.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.version.localeCompare(t.version)},width:100},{width:"fit-content",dataIndex:"actions",render:function(e,t){return Object(v.jsxs)(s.b,{children:[Object(v.jsx)(q.a,{requiredRoles:["Administrator"],children:Object(v.jsx)(b.a,{children:Object(v.jsx)(h.default,{record:t,allowedWithOneWayGitSync:!1})})}),Object(v.jsx)(q.a,{requiredRoles:["Administrator"],children:Object(v.jsx)(f.default,{resource:t,allowedWithOneWayGitSync:!1})}),Object(v.jsx)(q.a,{requiredRoles:["Administrator"],children:Object(v.jsx)(_,{terminalId:t.id})})]})}}];return e(j.e.Automation)?Object(v.jsx)(l.a,{title:"Terminals",subTitle:"PowerShell terminals in the browser.",extra:[Object(v.jsx)(G.a,{url:"automation/terminals"})],children:Object(v.jsxs)(i.a,{defaultActiveKey:"1",children:[Object(v.jsx)(R,{tab:"Terminals",children:Object(v.jsx)(O.default,{title:"Terminals",actions:[Object(v.jsx)(b.a,{children:Object(v.jsx)(p,{})})],columns:c,data:n,loading:r,queryFn:a})},"1"),Object(v.jsx)(R,{tab:"Instances",children:Object(v.jsx)(A,{})},"2")]})}):Object(v.jsx)(F.default,{title:"Terminals are only available for licensed instances."})}},983:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(0);var r=n(932),i=n(452),a=n(414),c=n(3);function o(){return Object(c.jsx)(r.a,{type:"info",message:Object(c.jsxs)(i.b,{align:"center",style:{width:"100%",justifyContent:"space-between"},children:["Authentication requires a license.",Object(c.jsx)(a.a.Link,{href:"https://ironmansoftware.com/powershell-universal/?rel=product",target:"_blank",children:"Buy License."})]})})}},989:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var r=n(12),i=n(74),a=(n(0),n(48)),c=n(70),o=n(209),s=n(457),l=n(127),d=n(299),u=n(983),j=n(111),m=n(3);function b(e){var t,n=e.record,b=e.schemaName,h=e.allowedWithOneWayGitSync,f=Object(i.a)(e,["record","schemaName","allowedWithOneWayGitSync"]),O=Object(s.a)().getButtonProps,x=Object(d.a)(),v=Object(l.e)(),p=v.onOk,y=v.form,w=Object(j.a)().licensed;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.d,{requiredRoles:["Administrator","Operator"],requiredAccessControls:a.b.Edit,accessControls:f.accessControls,allowedWithOneWayGitSync:h,children:Object(m.jsx)(c.a,Object(r.a)(Object(r.a)(Object(r.a)({},f),O({action:"edit"})),{},{action:"edit"}))}),Object(m.jsxs)(l.b,{title:"Edit Resource",onClickOk:function(){var e,t,r,i,a,c,o,s,l,d,u,j="tag"===(null===n||void 0===n||null===(e=n.resourceInfo)||void 0===e?void 0:e.schemaName)||"role"===(null===n||void 0===n||null===(t=n.resourceInfo)||void 0===t?void 0:t.schemaName)||"endpoint"===(null===n||void 0===n||null===(r=n.resourceInfo)||void 0===r?void 0:r.schemaName)||"ratelimit"===(null===n||void 0===n||null===(i=n.resourceInfo)||void 0===i?void 0:i.schemaName)||"dashboard"===(null===n||void 0===n||null===(a=n.resourceInfo)||void 0===a?void 0:a.schemaName)||"schedule"===(null===n||void 0===n||null===(c=n.resourceInfo)||void 0===c?void 0:c.schemaName)||"publishedfolder"===(null===n||void 0===n||null===(o=n.resourceInfo)||void 0===o?void 0:o.schemaName)?null===n||void 0===n||null===(s=n.resourceInfo)||void 0===s?void 0:s.self:null===n||void 0===n||null===(l=n.resourceInfo)||void 0===l?void 0:l.parent;"page"===(null===n||void 0===n||null===(d=n.resourceInfo)||void 0===d?void 0:d.schemaName)&&(j=(null===n||void 0===n||null===(u=n.resourceInfo)||void 0===u?void 0:u.self)+"?ignoreContent=true"),p(j,"update",n)},children:[Object(m.jsx)(o.b,{schemaName:b||(null===n||void 0===n||null===(t=n.resourceInfo)||void 0===t?void 0:t.schemaName),children:Object(m.jsx)(o.d,{name:"edit_form",form:y,inEditMode:!0,preserve:!1,defaultValues:x(n)})}),!w(a.e.Dashboard)&&Object(m.jsx)(u.a,{})]})]})}}}]);
//# sourceMappingURL=25.7dfcdd9b.chunk.js.map
{"version":3,"sources":["components/ui/TagLink.tsx","components/schedule/scheduleModal.tsx","components/schedule/schedules.tsx","components/ui/BuyLicenseAlertBox.tsx","components/ui/EditModal.tsx"],"names":["TagLink","text","to","color","style","ScheduleModal","useModalContext","onOk","form","Modal","requiredRoles","requiredAccessControls","AccessControlTypes","Create","allowedWithOneWayGitSync","children","title","onClickOk","formName","Form","schemaName","name","preserve","columns","key","editable","render","record","script","dataIndex","paused","nextExecution","formatDate","responsive","credential","width","EditModal","DeleteButton","resource","Schedules","useQuery","enabled","refetchOnWindowFocus","schedules","data","isLoading","refetch","subTitle","extra","url","Table","actions","loading","queryFn","BuyLicenseAlertBox","type","message","align","justifyContent","Link","href","target","props","getButtonProps","useActionButton","normalizedRecord","useNormalizeData","licensed","useAppStore","Edit","accessControls","action","resourceInfo","self","parent","inEditMode","defaultValues","Feature","Dashboard"],"mappings":"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","file":"static/js/27.22e1eba8.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Tag } from \"antd\";\r\n\r\nexport default function TagLink({ text, to }) {\r\n  return (\r\n    <Tag color=\"blue\">\r\n      <Link style={{ color: \"inherit\" }} to={to}>\r\n        {text}\r\n      </Link>\r\n    </Tag>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport { AccessControlTypes, Schedule } from \"types\";\r\nimport { Button } from \"antd\";\r\nimport {\r\n  ModalContent,\r\n  ModalOpenButton,\r\n  useModalContext,\r\n} from \"components/ui/Modal\";\r\nimport { Form, FormContentBase } from \"components/ui/Form/Form\";\r\n\r\nexport default function ScheduleModal() {\r\n  const { onOk, form } = useModalContext();\r\n\r\n  function handleOk() {\r\n    onOk(\"/schedule\", \"create\", {} as Schedule);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <ModalOpenButton requiredRoles={[\"Administrator\", \"Operator\"]} requiredAccessControls={AccessControlTypes.Create} allowedWithOneWayGitSync={false}>\r\n        <Button children=\"Create New Schedule\" />\r\n      </ModalOpenButton>\r\n      <ModalContent title=\"Create new schedule\" onClickOk={handleOk} formName=\"create_schedule_form\">\r\n        <Form schemaName=\"schedule\">\r\n          <FormContentBase\r\n            name=\"create_schedule_form\"\r\n            form={form}\r\n            preserve={false}\r\n          />\r\n        </Form>\r\n      </ModalContent>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CustomColumns, Schedule } from \"../../types\";\r\nimport { useQuery } from \"react-query3\";\r\nimport { formatDate } from \"components/utils/utils\";\r\nimport { PageHeader, Space } from \"antd\";\r\nimport { Modal } from \"components/ui/Modal\";\r\nimport Table from \"components/ui/Table\";\r\nimport TagLink from \"components/ui/TagLink\";\r\nimport EditModal from \"components/ui/EditModal\";\r\nimport DeleteButton from \"components/ui/DeleteButton\";\r\nimport ScheduleModal from \"./scheduleModal\";\r\nimport DocsButton from \"components/docsButton\";\r\n\r\nconst columns: CustomColumns<Schedule>[] = [\r\n  {\r\n    title: \"Script\",\r\n    key: \"script\",\r\n    editable: false,\r\n    render: (text, record) => (\r\n      <TagLink\r\n        to={`/admin/automation/scripts/${record?.script}`}\r\n        text={record?.script}\r\n      />\r\n    ),\r\n  },\r\n  {\r\n    title: \"Name\",\r\n    dataIndex: \"name\",\r\n    key: \"name\",\r\n    editable: false,\r\n  },\r\n  {\r\n    title: \"Schedule\",\r\n    dataIndex: \"description\",\r\n    key: \"description\",\r\n    editable: false,\r\n  },\r\n  {\r\n    title: \"Next Execution\",\r\n    key: \"nextExecution\",\r\n    editable: false,\r\n    render: (text, record) => record.paused ? \"Paused\" : record.nextExecution ? formatDate(record.nextExecution) : \"As soon as possible\",\r\n  },\r\n  {\r\n    title: \"Environment\",\r\n    key: \"environment\",\r\n    dataIndex: \"environment\",\r\n    editable: false,\r\n    render: (text) => (text ? text : \"Default\"),\r\n    responsive: [\"xl\"],\r\n  },\r\n  {\r\n    key: \"runAs\",\r\n    title: \"Run As\",\r\n    editable: false,\r\n    render: (text, record) => record?.credential || \"Default\",\r\n    responsive: [\"xl\"],\r\n  },\r\n  {\r\n    width: \"fit-content\",\r\n    dataIndex: \"actions\",\r\n    editable: false,\r\n    render: (text, record) => {\r\n      return (\r\n        <Space>\r\n          <Modal>\r\n            <EditModal record={record} allowedWithOneWayGitSync={false} />\r\n          </Modal>\r\n          <DeleteButton resource={record} allowedWithOneWayGitSync={false} />\r\n        </Space>\r\n      );\r\n    },\r\n  },\r\n];\r\n\r\nexport default function Schedules() {\r\n  const { data: schedules, isLoading, refetch } = useQuery<Schedule[]>(\r\n    \"/schedule\",\r\n    {\r\n      enabled: false,\r\n      refetchOnWindowFocus: false,\r\n    }\r\n  );\r\n\r\n  return (\r\n    <PageHeader title=\"Schedules\" subTitle=\"CRON, one-time, and continuously scheduled scripts.\" extra={[\r\n      <DocsButton url=\"automation/schedules\" />\r\n    ]}>\r\n      <Table\r\n        title=\"Schedules\"\r\n        actions={[\r\n          <Modal>\r\n            <ScheduleModal />\r\n          </Modal>,\r\n        ]}\r\n        columns={columns}\r\n        data={schedules}\r\n        loading={isLoading}\r\n        queryFn={refetch}\r\n      />\r\n    </PageHeader>\r\n\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Alert, Space, Typography } from \"antd\";\r\n\r\nexport default function BuyLicenseAlertBox() {\r\n  return (\r\n    <Alert\r\n      type=\"info\"\r\n      message={\r\n        <Space\r\n          align=\"center\"\r\n          style={{ width: \"100%\", justifyContent: \"space-between\" }}\r\n        >\r\n          Authentication requires a license.\r\n          <Typography.Link\r\n            href=\"https://ironmansoftware.com/powershell-universal/?rel=product\"\r\n            target=\"_blank\"\r\n          >\r\n            Buy License.\r\n          </Typography.Link>\r\n        </Space>\r\n      }\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { AccessControlTypes, Feature, PSUTypes, RoleGuardProps } from \"types\";\r\nimport { Button, ButtonProps } from \"antd\";\r\nimport { Form, FormContentBase } from \"./Form/Form\";\r\nimport { useActionButton } from \"components/utils/hooks/useActionButton\";\r\nimport { useModalContext, ModalOpenButton, ModalContent } from \"./Modal\";\r\nimport useNormalizeData from \"components/utils/normalizedRecord\";\r\nimport BuyLicenseAlertBox from \"./BuyLicenseAlertBox\";\r\nimport useAppStore from \"components/context/app/Hooks\";\r\n\r\n\r\ntype EditModalProps = {\r\n  action?: string;\r\n  record: PSUTypes;\r\n  schemaName?: string | undefined;\r\n  accessControl?: AccessControlTypes;\r\n  allowedWithOneWayGitSync: boolean;\r\n} & Omit<ButtonProps, \"resource\"> &\r\n  Omit<RoleGuardProps, \"children\">;\r\n\r\nexport default function EditModal({\r\n  record,\r\n  schemaName,\r\n  allowedWithOneWayGitSync,\r\n  ...props\r\n}: EditModalProps) {\r\n  const { getButtonProps } = useActionButton();\r\n  const normalizedRecord = useNormalizeData();\r\n  const { onOk, form } = useModalContext();\r\n  const { licensed } = useAppStore()\r\n\r\n  function handleOk() {\r\n\r\n    let key = record?.resourceInfo?.schemaName === \"tag\" ||\r\n      record?.resourceInfo?.schemaName === \"role\" ||\r\n      record?.resourceInfo?.schemaName === \"endpoint\" ||\r\n      record?.resourceInfo?.schemaName === \"ratelimit\" ||\r\n      record?.resourceInfo?.schemaName === \"dashboard\" ||\r\n      record?.resourceInfo?.schemaName === \"schedule\" ||\r\n      record?.resourceInfo?.schemaName === \"publishedfolder\"\r\n      ? record?.resourceInfo?.self\r\n      : record?.resourceInfo?.parent\r\n\r\n    if (record?.resourceInfo?.schemaName === \"page\") {\r\n      key = record?.resourceInfo?.self + \"?ignoreContent=true\"\r\n    }\r\n\r\n    onOk(key,\r\n      \"update\",\r\n      record\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ModalOpenButton requiredRoles={[\"Administrator\", \"Operator\"]} requiredAccessControls={AccessControlTypes.Edit} accessControls={props.accessControls} allowedWithOneWayGitSync={allowedWithOneWayGitSync}>\r\n        <Button\r\n          {...props}\r\n          {...getButtonProps({ action: \"edit\" })}\r\n          action=\"edit\"\r\n        />\r\n      </ModalOpenButton>\r\n      <ModalContent title=\"Edit Resource\" onClickOk={handleOk}>\r\n        <Form schemaName={schemaName || record?.resourceInfo?.schemaName}>\r\n          <FormContentBase\r\n            name=\"edit_form\"\r\n            form={form}\r\n            inEditMode={true}\r\n            preserve={false}\r\n            defaultValues={normalizedRecord(record)}\r\n          />\r\n        </Form>\r\n        {!licensed(Feature.Dashboard) && <BuyLicenseAlertBox />}\r\n      </ModalContent>\r\n    </>\r\n  );\r\n}\r\n"],"sourceRoot":""}
{"version":3,"file":"Components_map_UDLayerControlBaseLayer_jsx.xxxxxxxxxxxxxxxxxxxx.bundle.js","mappings":"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","sources":["webpack://materialui/./Components/map/UDLayerControlBaseLayer.jsx","webpack://materialui/./Components/map/utils.jsx","webpack://materialui/./node_modules/react-leaflet/es/LayersControl.js","webpack://materialui/./node_modules/react-leaflet/es/MapControl.js"],"sourcesContent":["import React from 'react';\r\nimport { LayersControl } from 'react-leaflet';\r\nimport { isGuid } from './utils';\r\n\r\nexport default class UDLayerControlBaseLayer extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            content: props.content\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        if (!isGuid(this.props.id)) {\r\n            this.pubSubToken = UniversalDashboard.subscribe(this.props.id, this.onIncomingEvent.bind(this));\r\n        }\r\n    }\r\n\r\n    onRemoveChild(id) {\r\n        var content = this.state.content;\r\n        if (!Array.isArray(content)) {\r\n            content = [content];\r\n        }\r\n\r\n        content = content.filter(x => x.id !== id);\r\n\r\n        this.setState({\r\n            content\r\n        })\r\n    }\r\n\r\n    onIncomingEvent(eventName, event) {\r\n        if (event.type === \"removeElement\") {\r\n            this.props.onRemove(this.props.id);\r\n        }\r\n\r\n        if (event.type === \"addElement\") {\r\n            var content = this.state.content;\r\n            if (!Array.isArray(content)) {\r\n                content = [content];\r\n            }\r\n\r\n            content = content.concat(event.elements);\r\n\r\n            this.setState({\r\n                content\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        var content = this.state.content;\r\n        if (!Array.isArray(content)) {\r\n            content = [content];\r\n        }\r\n\r\n        return <LayersControl.BaseLayer {...this.props} >\r\n            {content.map(x => {\r\n                x.onRemove = this.onRemoveChild.bind(this);\r\n                return UniversalDashboard.renderComponent(x);\r\n            })}\r\n        </LayersControl.BaseLayer>\r\n    }\r\n}","export function isGuid(str) {\r\n    if (str == null) { return false }\r\n\r\n    if (str[0] === \"{\") \r\n    {\r\n        str = str.substring(1, str.length - 1);\r\n    }\r\n    var regexGuid = /^(\\{){0,1}[0-9a-fA-F]{8}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{12}(\\}){0,1}$/gi;\r\n    var regexGuid = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\r\n    return regexGuid.test(str);\r\n}","\"use strict\";\n\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Control } from 'leaflet';\nimport React, { cloneElement, Component, Children, Fragment } from 'react';\nimport { LeafletProvider, withLeaflet } from './context';\nimport MapControl from './MapControl';\n// Abtract class for layer container, extended by BaseLayer and Overlay\nexport var ControlledLayer = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ControlledLayer, _Component);\n\n  function ControlledLayer() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"contextValue\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"layer\", void 0);\n\n    return _this;\n  }\n\n  var _proto = ControlledLayer.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(_ref) {\n    var checked = _ref.checked;\n\n    if (this.props.leaflet.map == null) {\n      return;\n    } // Handle dynamically (un)checking the layer => adding/removing from the map\n\n\n    if (this.props.checked === true && (checked == null || checked === false)) {\n      this.props.leaflet.map.addLayer(this.layer);\n    } else if (checked === true && (this.props.checked == null || this.props.checked === false)) {\n      this.props.leaflet.map.removeLayer(this.layer);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.removeLayerControl(this.layer);\n  };\n\n  _proto.addLayer = function addLayer() {\n    throw new Error('Must be implemented in extending class');\n  };\n\n  _proto.removeLayer = function removeLayer(layer) {\n    this.props.removeLayer(layer);\n  };\n\n  _proto.render = function render() {\n    var children = this.props.children;\n    return children ? /*#__PURE__*/React.createElement(LeafletProvider, {\n      value: this.contextValue\n    }, children) : null;\n  };\n\n  return ControlledLayer;\n}(Component);\n\nvar BaseLayer = /*#__PURE__*/function (_ControlledLayer) {\n  _inheritsLoose(BaseLayer, _ControlledLayer);\n\n  function BaseLayer(props) {\n    var _this2;\n\n    _this2 = _ControlledLayer.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this2), \"addLayer\", function (layer) {\n      _this2.layer = layer; // Keep layer reference to handle dynamic changes of props\n\n      var _this2$props = _this2.props,\n          addBaseLayer = _this2$props.addBaseLayer,\n          checked = _this2$props.checked,\n          name = _this2$props.name;\n      addBaseLayer(layer, name, checked);\n    });\n\n    _this2.contextValue = _extends({}, props.leaflet, {\n      layerContainer: {\n        addLayer: _this2.addLayer.bind(_assertThisInitialized(_this2)),\n        removeLayer: _this2.removeLayer.bind(_assertThisInitialized(_this2))\n      }\n    });\n    return _this2;\n  }\n\n  return BaseLayer;\n}(ControlledLayer);\n\nvar Overlay = /*#__PURE__*/function (_ControlledLayer2) {\n  _inheritsLoose(Overlay, _ControlledLayer2);\n\n  function Overlay(props) {\n    var _this3;\n\n    _this3 = _ControlledLayer2.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this3), \"addLayer\", function (layer) {\n      _this3.layer = layer; // Keep layer reference to handle dynamic changes of props\n\n      var _this3$props = _this3.props,\n          addOverlay = _this3$props.addOverlay,\n          checked = _this3$props.checked,\n          name = _this3$props.name;\n      addOverlay(layer, name, checked);\n    });\n\n    _this3.contextValue = _extends({}, props.leaflet, {\n      layerContainer: {\n        addLayer: _this3.addLayer.bind(_assertThisInitialized(_this3)),\n        removeLayer: _this3.removeLayer.bind(_assertThisInitialized(_this3))\n      }\n    });\n    return _this3;\n  }\n\n  return Overlay;\n}(ControlledLayer);\n\nvar LayersControl = /*#__PURE__*/function (_MapControl) {\n  _inheritsLoose(LayersControl, _MapControl);\n\n  function LayersControl(props) {\n    var _this4;\n\n    _this4 = _MapControl.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this4), \"controlProps\", void 0);\n\n    _this4.controlProps = {\n      addBaseLayer: _this4.addBaseLayer.bind(_assertThisInitialized(_this4)),\n      addOverlay: _this4.addOverlay.bind(_assertThisInitialized(_this4)),\n      leaflet: props.leaflet,\n      removeLayer: _this4.removeLayer.bind(_assertThisInitialized(_this4)),\n      removeLayerControl: _this4.removeLayerControl.bind(_assertThisInitialized(_this4))\n    };\n    return _this4;\n  }\n\n  var _proto2 = LayersControl.prototype;\n\n  _proto2.createLeafletElement = function createLeafletElement(props) {\n    var _children = props.children,\n        options = _objectWithoutPropertiesLoose(props, [\"children\"]);\n\n    return new Control.Layers(undefined, undefined, options);\n  };\n\n  _proto2.updateLeafletElement = function updateLeafletElement(fromProps, toProps) {\n    _MapControl.prototype.updateLeafletElement.call(this, fromProps, toProps);\n\n    if (toProps.collapsed !== fromProps.collapsed) {\n      if (toProps.collapsed === true) {\n        this.leafletElement.collapse();\n      } else {\n        this.leafletElement.expand();\n      }\n    }\n  };\n\n  _proto2.componentWillUnmount = function componentWillUnmount() {\n    var _this5 = this;\n\n    setTimeout(function () {\n      _MapControl.prototype.componentWillUnmount.call(_this5);\n    }, 0);\n  };\n\n  _proto2.addBaseLayer = function addBaseLayer(layer, name, checked) {\n    if (checked === void 0) {\n      checked = false;\n    }\n\n    if (checked && this.props.leaflet.map != null) {\n      this.props.leaflet.map.addLayer(layer);\n    }\n\n    this.leafletElement.addBaseLayer(layer, name);\n  };\n\n  _proto2.addOverlay = function addOverlay(layer, name, checked) {\n    if (checked === void 0) {\n      checked = false;\n    }\n\n    if (checked && this.props.leaflet.map != null) {\n      this.props.leaflet.map.addLayer(layer);\n    }\n\n    this.leafletElement.addOverlay(layer, name);\n  };\n\n  _proto2.removeLayer = function removeLayer(layer) {\n    if (this.props.leaflet.map != null) {\n      this.props.leaflet.map.removeLayer(layer);\n    }\n  };\n\n  _proto2.removeLayerControl = function removeLayerControl(layer) {\n    this.leafletElement.removeLayer(layer);\n  };\n\n  _proto2.render = function render() {\n    var _this6 = this;\n\n    var children = Children.map(this.props.children, function (child) {\n      return child ? /*#__PURE__*/cloneElement(child, _this6.controlProps) : null;\n    });\n    return /*#__PURE__*/React.createElement(Fragment, null, children);\n  };\n\n  return LayersControl;\n}(MapControl);\n\nvar LayersControlExport = withLeaflet(LayersControl);\nLayersControlExport.BaseLayer = BaseLayer;\nLayersControlExport.Overlay = Overlay;\nexport default LayersControlExport;","\"use strict\";\n\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Control } from 'leaflet';\nimport { Component } from 'react';\n\nvar MapControl = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(MapControl, _Component);\n\n  function MapControl(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"leafletElement\", void 0);\n\n    _this.leafletElement = _this.createLeafletElement(_this.props);\n    return _this;\n  }\n\n  var _proto = MapControl.prototype;\n\n  _proto.createLeafletElement = function createLeafletElement(_props) {\n    throw new Error('createLeafletElement() must be implemented');\n  };\n\n  _proto.updateLeafletElement = function updateLeafletElement(fromProps, toProps) {\n    if (toProps.position !== fromProps.position) {\n      this.leafletElement.setPosition(toProps.position);\n    }\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.leafletElement.addTo(this.props.leaflet.map);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    this.updateLeafletElement(prevProps, this.props);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.leafletElement.remove();\n  };\n\n  _proto.render = function render() {\n    return null;\n  };\n\n  return MapControl;\n}(Component);\n\nexport { MapControl as default };"],"names":["React","LayersControl","isGuid","UDLayerControlBaseLayer","props","state","content","id","pubSubToken","UniversalDashboard","subscribe","onIncomingEvent","bind","Array","isArray","filter","x","setState","eventName","event","type","onRemove","concat","elements","map","onRemoveChild","renderComponent","Component","str","substring","length","regexGuid","test"],"sourceRoot":""}